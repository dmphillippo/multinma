<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Plots of model fit diagnostics — plot.nma_dic • multinma</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/paper/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  

<meta property="og:title" content="Plots of model fit diagnostics — plot.nma_dic" />
<meta property="og:description" content="The plot() method for nma_dic objects produced by dic() produces
several useful diagnostic plots for checking model fit and model comparison.
Further detail on these plots and their interpretation is given by
Dias et al. (2011)
." />
<meta property="og:image" content="https://dmphillippo.github.io/multinma/logo.svg" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">multinma</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.3.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/vignette_overview.html">Overview of Examples</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Examples</li>
    <li>
      <a href="../articles/example_atrial_fibrillation.html">Example: Atrial fibrillation</a>
    </li>
    <li>
      <a href="../articles/example_bcg_vaccine.html">Example: BCG vaccine for tuberculosis</a>
    </li>
    <li>
      <a href="../articles/example_blocker.html">Example: Beta blockers</a>
    </li>
    <li>
      <a href="../articles/example_diabetes.html">Example: Diabetes</a>
    </li>
    <li>
      <a href="../articles/example_dietary_fat.html">Example: Dietary fat</a>
    </li>
    <li>
      <a href="../articles/example_hta_psoriasis.html">Example: Plaque psoriasis HTA report</a>
    </li>
    <li>
      <a href="../articles/example_parkinsons.html">Example: Parkinson's disease</a>
    </li>
    <li>
      <a href="../articles/example_plaque_psoriasis.html">Example: Plaque psoriasis ML-NMR</a>
    </li>
    <li>
      <a href="../articles/example_smoking.html">Example: Smoking cessation</a>
    </li>
    <li>
      <a href="../articles/example_statins.html">Example: Statins for cholesterol lowering</a>
    </li>
    <li>
      <a href="../articles/example_thrombolytics.html">Example: Thrombolytic treatments</a>
    </li>
    <li>
      <a href="../articles/example_transfusion.html">Example: White blood cell transfusion</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/dmphillippo/multinma/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Plots of model fit diagnostics</h1>
    <small class="dont-index">Source: <a href='https://github.com/dmphillippo/multinma/blob/master/R/nma_dic-class.R'><code>R/nma_dic-class.R</code></a></small>
    <div class="hidden name"><code>plot.nma_dic.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The <code><a href='https://rdrr.io/r/graphics/plot.default.html'>plot()</a></code> method for <a href='nma_dic-class.html'>nma_dic</a> objects produced by <code><a href='dic.html'>dic()</a></code> produces
several useful diagnostic plots for checking model fit and model comparison.
Further detail on these plots and their interpretation is given by
Dias et al. (2011)
.</p>
    </div>

    <pre class="usage"><span class='co'># S3 method for nma_dic</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span>
  <span class='va'>x</span>,
  <span class='va'>y</span>,
  <span class='va'>...</span>,
  show_uncertainty <span class='op'>=</span> <span class='cn'>TRUE</span>,
  stat <span class='op'>=</span> <span class='st'>"pointinterval"</span>,
  orientation <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"vertical"</span>, <span class='st'>"horizontal"</span>, <span class='st'>"x"</span>, <span class='st'>"y"</span><span class='op'>)</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>A <code>nma_dic</code> object</p></td>
    </tr>
    <tr>
      <th>y</th>
      <td><p>(Optional) A second <code>nma_dic</code> object, to produce "dev-dev" plots for
model comparison.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Additional arguments passed on to other methods</p></td>
    </tr>
    <tr>
      <th>show_uncertainty</th>
      <td><p>Logical, show uncertainty with a <code>ggdist</code> plot
stat? Default <code>TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>stat</th>
      <td><p>Character string specifying the <code>ggdist</code> plot stat to use if
<code>show_uncertainty = TRUE</code>, default <code>"pointinterval"</code>. If <code>y</code> is provided,
currently only <code>"pointinterval"</code> is supported.</p></td>
    </tr>
    <tr>
      <th>orientation</th>
      <td><p>Whether the <code>ggdist</code> geom is drawn horizontally
(<code>"horizontal"</code>) or vertically (<code>"vertical"</code>). Only used for residual
deviance plots, default <code>"vertical"</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <code>ggplot</code> object.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>When a single <code>nma_dic</code> object is given, a plot of the residual
deviance contribution for each data point is produced. For a good fitting
model, each data point is expected to have a residual deviance of 1; larger
values indicate data points that are fit poorly by the model.</p>
<p>When two <code>nma_dic</code> objects are given, a "dev-dev" plot comparing the
residual deviance contributions under each model is produced. Data points
with residual deviance contributions lying on the line of equality are fit
equally well under either model. Data points lying below the line of
equality indicate better fit under the second model (<code>y</code>); conversely, data
points lying above the line of equality indicate better fit under the first
model (<code>x</code>). A common use case is to compare a standard consistency model
(fitted using <code><a href='nma.html'>nma()</a></code> with <code>consistency = "consistency"</code>) with an unrelated
mean effects (UME) inconsistency model (fitted using <code><a href='nma.html'>nma()</a></code> with
<code>consistency = "ume"</code>), to check for potential inconsistency.</p>
<p>See Dias et al. (2011)
 for further details.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Dias S, Welton NJ, Sutton AJ, Ades AE (2011).
&#8220;NICE DSU Technical Support Document 2: A generalised linear modelling framework for pair-wise and network meta-analysis of randomised controlled trials.&#8221;
National Institute for Health and Care Excellence.
<a href='http://nicedsu.org.uk/'>http://nicedsu.org.uk/</a>.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>## Smoking cessation</span>
<span class='co'># \donttest{</span>
<span class='co'># Run smoking FE NMA example if not already available</span>
<span class='kw'>if</span> <span class='op'>(</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/exists.html'>exists</a></span><span class='op'>(</span><span class='st'>"smk_fit_FE"</span><span class='op'>)</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/utils/example.html'>example</a></span><span class='op'>(</span><span class='st'>"example_smk_fe"</span><span class='op'>)</span>
<span class='co'># }</span>
<span class='co'># \donttest{</span>
<span class='co'># Run smoking RE NMA example if not already available</span>
<span class='kw'>if</span> <span class='op'>(</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/exists.html'>exists</a></span><span class='op'>(</span><span class='st'>"smk_fit_RE"</span><span class='op'>)</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/utils/example.html'>example</a></span><span class='op'>(</span><span class='st'>"example_smk_re"</span><span class='op'>)</span>
<span class='co'># }</span>
<span class='co'># \donttest{</span>
<span class='co'># Compare DIC of FE and RE models</span>
<span class='op'>(</span><span class='va'>smk_dic_FE</span> <span class='op'>&lt;-</span> <span class='fu'><a href='dic.html'>dic</a></span><span class='op'>(</span><span class='va'>smk_fit_FE</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; Residual deviance: 267<span style='color: #555555;'> (on 50 data points)</span><span>
#&gt;                pD: 26.9
#&gt;               DIC: 293.9</div><div class='input'><span class='op'>(</span><span class='va'>smk_dic_RE</span> <span class='op'>&lt;-</span> <span class='fu'><a href='dic.html'>dic</a></span><span class='op'>(</span><span class='va'>smk_fit_RE</span><span class='op'>)</span><span class='op'>)</span>   <span class='co'># substantially better fit</span>
</div><div class='output co'>#&gt; Residual deviance: 54.4</span><span style='color: #555555;'> (on 50 data points)</span><span>
#&gt;                pD: 44.2
#&gt;               DIC: 98.6</div><div class='input'>
<span class='co'># Plot residual deviance contributions under RE model</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>smk_dic_RE</span><span class='op'>)</span>
</div><div class='img'><img src='plot.nma_dic-1.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># Further customisation is possible using ggplot commands</span>
<span class='co'># For example, highlighting data points with residual deviance above a certain threshold</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>smk_dic_RE</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>ggplot2</span><span class='fu'>::</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>colour <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='va'>..y..</span> <span class='op'>&gt;</span> <span class='fl'>1.5</span>, <span class='st'>"darkorange"</span>, <span class='st'>"black"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>ggplot2</span><span class='fu'>::</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_identity.html'>scale_colour_identity</a></span><span class='op'>(</span><span class='op'>)</span>
</div><div class='img'><img src='plot.nma_dic-2.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># Or by posterior probability, for example here a central probability of 0.6</span>
<span class='co'># corresponds to a lower tail probability of (1 - 0.6)/2 = 0.2</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>smk_dic_RE</span>, .width <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0.6</span>, <span class='fl'>0.95</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>ggplot2</span><span class='fu'>::</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>colour <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='va'>..ymin..</span> <span class='op'>&gt;</span> <span class='fl'>1</span>, <span class='st'>"darkorange"</span>, <span class='st'>"black"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>ggplot2</span><span class='fu'>::</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_identity.html'>scale_colour_identity</a></span><span class='op'>(</span><span class='op'>)</span>
</div><div class='img'><img src='plot.nma_dic-3.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># Check for inconsistency using UME model</span>
<span class='co'># }</span>
<span class='co'># \donttest{</span>
<span class='co'># Run smoking UME NMA example if not already available</span>
<span class='kw'>if</span> <span class='op'>(</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/exists.html'>exists</a></span><span class='op'>(</span><span class='st'>"smk_fit_RE_UME"</span><span class='op'>)</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/utils/example.html'>example</a></span><span class='op'>(</span><span class='st'>"example_smk_ume"</span><span class='op'>)</span>
<span class='co'># }</span>
<span class='co'># \donttest{</span>
<span class='co'># Compare DIC</span>
<span class='va'>smk_dic_RE</span>
</div><div class='output co'>#&gt; Residual deviance: 54.4</span><span style='color: #555555;'> (on 50 data points)</span><span>
#&gt;                pD: 44.2
#&gt;               DIC: 98.6</div><div class='input'><span class='op'>(</span><span class='va'>smk_dic_RE_UME</span> <span class='op'>&lt;-</span> <span class='fu'><a href='dic.html'>dic</a></span><span class='op'>(</span><span class='va'>smk_fit_RE_UME</span><span class='op'>)</span><span class='op'>)</span>  <span class='co'># no difference in fit</span>
</div><div class='output co'>#&gt; Residual deviance: 53.6</span><span style='color: #555555;'> (on 50 data points)</span><span>
#&gt;                pD: 44.8
#&gt;               DIC: 98.4</div><div class='input'>
<span class='co'># Compare residual deviance contributions with a "dev-dev" plot</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>smk_dic_RE</span>, <span class='va'>smk_dic_RE_UME</span><span class='op'>)</span>
</div><div class='img'><img src='plot.nma_dic-4.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># By default the dev-dev plot can be a little cluttered</span>
<span class='co'># Hiding the credible intervals</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>smk_dic_RE</span>, <span class='va'>smk_dic_RE_UME</span>, show_uncertainty <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
</div><div class='img'><img src='plot.nma_dic-5.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># Changing transparency</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>smk_dic_RE</span>, <span class='va'>smk_dic_RE_UME</span>, point_alpha <span class='op'>=</span> <span class='fl'>0.5</span>, interval_alpha <span class='op'>=</span> <span class='fl'>0.1</span><span class='op'>)</span>
</div><div class='img'><img src='plot.nma_dic-6.png' alt='' width='700' height='433' /></div><div class='input'><span class='co'># }</span>
</div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by David M. Phillippo.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


