<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Example: Plaque psoriasis HTA report • multinma</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/paper/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Example: Plaque psoriasis HTA report">
<meta property="og:description" content="multinma">
<meta property="og:image" content="https://dmphillippo.github.io/multinma/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">multinma</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/vignette_overview.html">Overview of Examples</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Examples</li>
    <li>
      <a href="../articles/example_atrial_fibrillation.html">Example: Atrial fibrillation</a>
    </li>
    <li>
      <a href="../articles/example_bcg_vaccine.html">Example: BCG vaccine for tuberculosis</a>
    </li>
    <li>
      <a href="../articles/example_blocker.html">Example: Beta blockers</a>
    </li>
    <li>
      <a href="../articles/example_diabetes.html">Example: Diabetes</a>
    </li>
    <li>
      <a href="../articles/example_dietary_fat.html">Example: Dietary fat</a>
    </li>
    <li>
      <a href="../articles/example_hta_psoriasis.html">Example: Plaque psoriasis HTA report</a>
    </li>
    <li>
      <a href="../articles/example_parkinsons.html">Example: Parkinson's disease</a>
    </li>
    <li>
      <a href="../articles/example_plaque_psoriasis.html">Example: Plaque psoriasis ML-NMR</a>
    </li>
    <li>
      <a href="../articles/example_smoking.html">Example: Smoking cessation</a>
    </li>
    <li>
      <a href="../articles/example_statins.html">Example: Statins for cholesterol lowering</a>
    </li>
    <li>
      <a href="../articles/example_thrombolytics.html">Example: Thrombolytic treatments</a>
    </li>
    <li>
      <a href="../articles/example_transfusion.html">Example: White blood cell transfusion</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/dmphillippo/multinma/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="example_hta_psoriasis_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Example: Plaque psoriasis HTA report</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/dmphillippo/multinma/blob/master/vignettes/example_hta_psoriasis.Rmd"><code>vignettes/example_hta_psoriasis.Rmd</code></a></small>
      <div class="hidden name"><code>example_hta_psoriasis.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dmphillippo.github.io/multinma/">multinma</a></span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/options.html">options</a></span><span class="op">(</span>mc.cores <span class="op">=</span> <span class="fu">parallel</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/parallel/detectCores.html">detectCores</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>#&gt; For execution on a local, multicore CPU with excess RAM we recommend calling
#&gt; options(mc.cores = parallel::detectCores())
#&gt; 
#&gt; Attaching package: 'multinma'
#&gt; The following objects are masked from 'package:stats':
#&gt; 
#&gt;     dgamma, pgamma, qgamma</code></pre>
<p>This vignette describes the analysis of treatments for moderate-to-severe plaque psoriasis from an HTA report <span class="citation">(Woolacott et al. 2006)</span>, replicating the analysis in NICE Technical Support Document 2 <span class="citation">(Dias et al. 2011)</span>. The data are available in this package as <code>hta_psoriasis</code>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">hta_psoriasis</span><span class="op">)</span>
<span class="co">#&gt;   studyn   studyc year trtn             trtc sample_size PASI50 PASI75 PASI90</span>
<span class="co">#&gt; 1      1  Elewski 2004    1  Supportive care         193     12      5      1</span>
<span class="co">#&gt; 2      1  Elewski 2004    2 Etanercept 25 mg         196     59     46     21</span>
<span class="co">#&gt; 3      1  Elewski 2004    3 Etanercept 50 mg         194     54     56     40</span>
<span class="co">#&gt; 4      2 Gottlieb 2003    1  Supportive care          55      5      1      0</span>
<span class="co">#&gt; 5      2 Gottlieb 2003    2 Etanercept 25 mg          57     23     11      6</span>
<span class="co">#&gt; 6      3  Lebwohl 2003    1  Supportive care         122     13      5      1</span></code></pre></div>
<p>Outcomes are ordered multinomial success/failure to achieve 50%, 75%, or 90% reduction in symptoms on the Psoriasis Area and Severity Index (PASI) scale. Some studies report ordered outcomes at all three cutpoints, others only one or two:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">hta_psoriasis</span>, <span class="va">studyc</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Elewski"</span>, <span class="st">"Gordon"</span>, <span class="st">"ACD2058g"</span>, <span class="st">"Altmeyer"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;   studyn   studyc year trtn             trtc sample_size PASI50 PASI75 PASI90</span>
<span class="co">#&gt; 1      1  Elewski 2004    1  Supportive care         193     12      5      1</span>
<span class="co">#&gt; 2      1  Elewski 2004    2 Etanercept 25 mg         196     59     46     21</span>
<span class="co">#&gt; 3      1  Elewski 2004    3 Etanercept 50 mg         194     54     56     40</span>
<span class="co">#&gt; 4      5   Gordon 2003    1  Supportive care         187     18      8     NA</span>
<span class="co">#&gt; 5      5   Gordon 2003    4       Efalizumab         369    118     98     NA</span>
<span class="co">#&gt; 6      6 ACD2058g 2004    1  Supportive care         170     25     NA     NA</span>
<span class="co">#&gt; 7      6 ACD2058g 2004    4       Efalizumab         162     99     NA     NA</span>
<span class="co">#&gt; 8     10 Altmeyer 1994    1  Supportive care          51     NA      1     NA</span>
<span class="co">#&gt; 9     10 Altmeyer 1994    6         Fumaderm          49     NA     12     NA</span></code></pre></div>
<p>Here, the outcome counts are given as “exclusive” counts. That is, for a study reporting all outcomes (e.g. Elewski), the counts represent the categories 50 &lt; PASI &lt; 75, 75 &lt; PASI &lt; 90, and 90 &lt; PASI &lt; 100, and the corresponding columns are named by the lower end of the interval.  Missing values are used where studies only report a subset of the outcomes. For a study reporting only two outcomes, say PASI50 and PASI75 as in Gordon, the counts represent the categories 50 &lt; PASI &lt; 75 and 75 &lt; PASI &lt; 100. For a study reporting only one outcome, say PASI70 as in Altmeyer, the count represents 70 &lt; PASI &lt; 100. We also need the count for the lowest category (i.e. no higher outcomes achieved), which is equal to the sample size minus the counts in the other observed categories.</p>
<div id="setting-up-the-network" class="section level3">
<h3 class="hasAnchor">
<a href="#setting-up-the-network" class="anchor"></a>Setting up the network</h3>
<p>We begin by setting up the network. We have arm-level ordered multinomial count data, so we use the function <code><a href="../reference/set_agd_arm.html">set_agd_arm()</a></code>. The function <code><a href="../reference/multi.html">multi()</a></code> helps us to specify the ordered outcomes correctly.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pso_net</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/set_agd_arm.html">set_agd_arm</a></span><span class="op">(</span><span class="va">hta_psoriasis</span>, 
                       study <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">studyc</span>, <span class="va">year</span><span class="op">)</span>, 
                       trt <span class="op">=</span> <span class="va">trtc</span>, 
                       r <span class="op">=</span> <span class="fu"><a href="../reference/multi.html">multi</a></span><span class="op">(</span>r0 <span class="op">=</span> <span class="va">sample_size</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/colSums.html">rowSums</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span><span class="va">PASI50</span>, <span class="va">PASI75</span>, <span class="va">PASI90</span><span class="op">)</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, 
                                 <span class="va">PASI50</span>, <span class="va">PASI75</span>, <span class="va">PASI90</span>,
                                 inclusive <span class="op">=</span> <span class="cn">FALSE</span>, 
                                 type <span class="op">=</span> <span class="st">"ordered"</span><span class="op">)</span><span class="op">)</span>
<span class="va">pso_net</span>
<span class="co">#&gt; A network with 16 AgD studies (arm-based).</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; ------------------------------------------------------- AgD studies (arm-based) ---- </span>
<span class="co">#&gt;  Study         Treatments                                              </span>
<span class="co">#&gt;  ACD2058g 2004 2: Supportive care | Efalizumab                         </span>
<span class="co">#&gt;  ACD2600g 2004 2: Supportive care | Efalizumab                         </span>
<span class="co">#&gt;  Altmeyer 1994 2: Supportive care | Fumaderm                           </span>
<span class="co">#&gt;  Chaudari 2001 2: Supportive care | Infliximab                         </span>
<span class="co">#&gt;  Elewski 2004  3: Supportive care | Etanercept 25 mg | Etanercept 50 mg</span>
<span class="co">#&gt;  Ellis 1991    2: Supportive care | Ciclosporin                        </span>
<span class="co">#&gt;  Gordon 2003   2: Supportive care | Efalizumab                         </span>
<span class="co">#&gt;  Gottlieb 2003 2: Supportive care | Etanercept 25 mg                   </span>
<span class="co">#&gt;  Gottlieb 2004 2: Supportive care | Infliximab                         </span>
<span class="co">#&gt;  Guenther 1991 2: Supportive care | Ciclosporin                        </span>
<span class="co">#&gt;  ... plus 6 more studies</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  Outcome type: ordered (4 categories)</span>
<span class="co">#&gt; ------------------------------------------------------------------------------------</span>
<span class="co">#&gt; Total number of treatments: 8</span>
<span class="co">#&gt; Total number of studies: 16</span>
<span class="co">#&gt; Reference treatment is: Supportive care</span>
<span class="co">#&gt; Network is connected</span></code></pre></div>
<p>Plot the network structure.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">pso_net</span>, weight_edges <span class="op">=</span> <span class="cn">TRUE</span>, weight_nodes <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span> 
  <span class="co"># Nudge the legend over</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.box.spacing <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/unit.html">unit</a></span><span class="op">(</span><span class="fl">0.75</span>, <span class="st">"in"</span><span class="op">)</span>,
                 plot.margin <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">margin</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0</span>, <span class="fl">0.1</span>, <span class="fl">0.75</span>, <span class="st">"in"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="example_hta_psoriasis_files/figure-html/hta_psoriasis_network_plot-1.png" width="700" style="display: block; margin: auto;"></p>
</div>
<div id="meta-analysis-models" class="section level3">
<h3 class="hasAnchor">
<a href="#meta-analysis-models" class="anchor"></a>Meta-analysis models</h3>
<p>We fit both fixed effect (FE) and random effects (RE) models.</p>
<div id="fixed-effect-meta-analysis" class="section level4">
<h4 class="hasAnchor">
<a href="#fixed-effect-meta-analysis" class="anchor"></a>Fixed effect meta-analysis</h4>
<p>First, we fit a fixed effect model using the <code><a href="../reference/nma.html">nma()</a></code> function with <code>trt_effects = "fixed"</code>, using a probit link function <code>link = "probit"</code>. We use <span class="math inline">\(\mathrm{N}(0, 10^2)\)</span> prior distributions for the treatment effects <span class="math inline">\(d_k\)</span>, and <span class="math inline">\(\mathrm{N}(0, 100^2)\)</span> prior distributions for the study-specific intercepts <span class="math inline">\(\mu_j\)</span>. We can examine the range of parameter values implied by these prior distributions with the <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> method:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="fu"><a href="../reference/priors.html">normal</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; A Normal prior distribution: location = 0, scale = 10.</span>
<span class="co">#&gt; 50% of the prior density lies between -6.74 and 6.74.</span>
<span class="co">#&gt; 95% of the prior density lies between -19.6 and 19.6.</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="fu"><a href="../reference/priors.html">normal</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">100</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; A Normal prior distribution: location = 0, scale = 100.</span>
<span class="co">#&gt; 50% of the prior density lies between -67.45 and 67.45.</span>
<span class="co">#&gt; 95% of the prior density lies between -196 and 196.</span></code></pre></div>
<p>We also need to specify prior distributions for the latent cutpoints <span class="math inline">\(c_\textrm{PASI75}\)</span> and <span class="math inline">\(c_\textrm{PASI90}\)</span> on the underlying scale - here the PASI standardised mean difference due to the probit link (the cutpoint <span class="math inline">\(c_\textrm{PASI50}=0\)</span>). To make these easier to reason about, we actually specify priors on the <em>differences</em> between adjacent cutpoints, e.g. <span class="math inline">\(c_\textrm{PASI90} - c_\textrm{PASI75}\)</span> and <span class="math inline">\(c_\textrm{PASI75} - c_\textrm{PASI50}\)</span>. These can be given any positive-valued prior distribution, and Stan will automatically impose the necessary ordering constraints behind the scenes. We choose to give these implicit flat priors <code><a href="../reference/priors.html">flat()</a></code>. </p>
<p>The model is fitted using the <code><a href="../reference/nma.html">nma()</a></code> function.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pso_fit_FE</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/nma.html">nma</a></span><span class="op">(</span><span class="va">pso_net</span>, 
                  trt_effects <span class="op">=</span> <span class="st">"fixed"</span>,
                  link <span class="op">=</span> <span class="st">"probit"</span>,
                  prior_intercept <span class="op">=</span> <span class="fu"><a href="../reference/priors.html">normal</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">100</span><span class="op">)</span>,
                  prior_trt <span class="op">=</span> <span class="fu"><a href="../reference/priors.html">normal</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>,
                  prior_aux <span class="op">=</span> <span class="fu"><a href="../reference/priors.html">flat</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; Note: Setting "Supportive care" as the network reference treatment.</span></code></pre></div>
<p>Basic parameter summaries are given by the <code><a href="https://rdrr.io/r/base/print.html">print()</a></code> method:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pso_fit_FE</span>
<span class="co">#&gt; A fixed effects NMA with a ordered likelihood (probit link).</span>
<span class="co">#&gt; Inference for Stan model: ordered_multinomial.</span>
<span class="co">#&gt; 4 chains, each with iter=2000; warmup=1000; thin=1; </span>
<span class="co">#&gt; post-warmup draws per chain=1000, total post-warmup draws=4000.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;                         mean se_mean   sd     2.5%      25%      50%      75%    97.5% n_eff Rhat</span>
<span class="co">#&gt; d[Ciclosporin]          1.92    0.01 0.34     1.29     1.68     1.90     2.13     2.62  1217    1</span>
<span class="co">#&gt; d[Efalizumab]           1.19    0.00 0.06     1.08     1.15     1.19     1.23     1.31  2068    1</span>
<span class="co">#&gt; d[Etanercept 25 mg]     1.51    0.00 0.10     1.32     1.45     1.51     1.58     1.71  2210    1</span>
<span class="co">#&gt; d[Etanercept 50 mg]     1.92    0.00 0.10     1.73     1.85     1.92     1.99     2.12  2559    1</span>
<span class="co">#&gt; d[Fumaderm]             1.49    0.01 0.50     0.62     1.14     1.44     1.79     2.58  2311    1</span>
<span class="co">#&gt; d[Infliximab]           2.34    0.00 0.26     1.84     2.16     2.33     2.51     2.87  3208    1</span>
<span class="co">#&gt; d[Methotrexate]         1.62    0.01 0.45     0.78     1.31     1.60     1.91     2.52  1398    1</span>
<span class="co">#&gt; lp__                -3405.17    0.09 3.65 -3413.33 -3407.40 -3404.82 -3402.45 -3399.20  1488    1</span>
<span class="co">#&gt; cc[PASI50]              0.00     NaN 0.00     0.00     0.00     0.00     0.00     0.00   NaN  NaN</span>
<span class="co">#&gt; cc[PASI75]              0.76    0.00 0.03     0.70     0.74     0.76     0.78     0.82  5292    1</span>
<span class="co">#&gt; cc[PASI90]              1.56    0.00 0.05     1.46     1.53     1.56     1.60     1.67  6220    1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Samples were drawn using NUTS(diag_e) at Mon Jan 11 09:40:31 2021.</span>
<span class="co">#&gt; For each parameter, n_eff is a crude measure of effective sample size,</span>
<span class="co">#&gt; and Rhat is the potential scale reduction factor on split chains (at </span>
<span class="co">#&gt; convergence, Rhat=1).</span></code></pre></div>
<blockquote>
<p><strong>Note:</strong> the treatment effects are the <em>opposite sign</em> to those in TSD 2 <span class="citation">(Dias et al. 2011)</span>. This is because we parameterise the linear predictor as <span class="math inline">\(\mu_j + d_k + c_m\)</span>, rather than <span class="math inline">\(\mu_j + d_k - c_m\)</span>. The interpretation here thus follows that of a standard binomial probit (or logit) regression; SMDs (or log ORs) greater than zero mean that the treatment increases the probability of an event compared to the comparator (and less than zero mean a reduction in probability). Here higher outcomes are positive, and all of the active treatments are estimated to increase the response (i.e. a greater reduction) on the PASI scale compared to the network reference (supportive care).</p>
</blockquote>
<p>By default, summaries of the study-specific intercepts <span class="math inline">\(\mu_j\)</span> are hidden, but could be examined by changing the <code>pars</code> argument:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Not run</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">pso_fit_FE</span>, pars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"d"</span>, <span class="st">"mu"</span>, <span class="st">"cc"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>The prior and posterior distributions can be compared visually using the <code><a href="../reference/plot_prior_posterior.html">plot_prior_posterior()</a></code> function:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plot_prior_posterior.html">plot_prior_posterior</a></span><span class="op">(</span><span class="va">pso_fit_FE</span><span class="op">)</span></code></pre></div>
<p><img src="example_hta_psoriasis_files/figure-html/pso_FE_pp_plot-1.png" width="700" style="display: block; margin: auto;"></p>
<p>Focusing specifically on the cutpoints we see that these are highly identified by the data, which is why the implicit flat priors work for these parameters.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plot_prior_posterior.html">plot_prior_posterior</a></span><span class="op">(</span><span class="va">pso_fit_FE</span>, prior <span class="op">=</span> <span class="st">"aux"</span><span class="op">)</span></code></pre></div>
<p><img src="example_hta_psoriasis_files/figure-html/pso_FE_pp_cutpoint_plot-1.png" width="700" style="display: block; margin: auto;"></p>
</div>
<div id="random-effects-meta-analysis" class="section level4">
<h4 class="hasAnchor">
<a href="#random-effects-meta-analysis" class="anchor"></a>Random effects meta-analysis</h4>
<p>We now fit a random effects model using the <code><a href="../reference/nma.html">nma()</a></code> function with <code>trt_effects = "random"</code>. Again, we use <span class="math inline">\(\mathrm{N}(0, 10^2)\)</span> prior distributions for the treatment effects <span class="math inline">\(d_k\)</span>, <span class="math inline">\(\mathrm{N}(0, 100^2)\)</span> prior distributions for the study-specific intercepts <span class="math inline">\(\mu_j\)</span>, implicit flat prior distributions for the latent cutpoints, and we additionally use a <span class="math inline">\(\textrm{half-N}(2.5^2)\)</span> prior for the heterogeneity standard deviation <span class="math inline">\(\tau\)</span>. We can examine the range of parameter values implied by these prior distributions with the <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> method:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="fu"><a href="../reference/priors.html">normal</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; A Normal prior distribution: location = 0, scale = 10.</span>
<span class="co">#&gt; 50% of the prior density lies between -6.74 and 6.74.</span>
<span class="co">#&gt; 95% of the prior density lies between -19.6 and 19.6.</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="fu"><a href="../reference/priors.html">normal</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">100</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; A Normal prior distribution: location = 0, scale = 100.</span>
<span class="co">#&gt; 50% of the prior density lies between -67.45 and 67.45.</span>
<span class="co">#&gt; 95% of the prior density lies between -196 and 196.</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="fu"><a href="../reference/priors.html">half_normal</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">2.5</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; A half-Normal prior distribution: location = 0, scale = 2.5.</span>
<span class="co">#&gt; 50% of the prior density lies between 0 and 1.69.</span>
<span class="co">#&gt; 95% of the prior density lies between 0 and 4.9.</span></code></pre></div>
<p>Fitting the RE model</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pso_fit_RE</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/nma.html">nma</a></span><span class="op">(</span><span class="va">pso_net</span>, 
                  trt_effects <span class="op">=</span> <span class="st">"random"</span>,
                  link <span class="op">=</span> <span class="st">"probit"</span>,
                  prior_intercept <span class="op">=</span> <span class="fu"><a href="../reference/priors.html">normal</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">100</span><span class="op">)</span>,
                  prior_trt <span class="op">=</span> <span class="fu"><a href="../reference/priors.html">normal</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>,
                  prior_aux <span class="op">=</span> <span class="fu"><a href="../reference/priors.html">flat</a></span><span class="op">(</span><span class="op">)</span>,
                  prior_het <span class="op">=</span> <span class="fu"><a href="../reference/priors.html">half_normal</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">2.5</span><span class="op">)</span>,
                  adapt_delta <span class="op">=</span> <span class="fl">0.99</span><span class="op">)</span></code></pre></div>
<pre><code>#&gt; Note: Setting "Supportive care" as the network reference treatment.</code></pre>
<p>Basic parameter summaries are given by the <code><a href="https://rdrr.io/r/base/print.html">print()</a></code> method:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pso_fit_RE</span>
<span class="co">#&gt; A random effects NMA with a ordered likelihood (probit link).</span>
<span class="co">#&gt; Inference for Stan model: ordered_multinomial.</span>
<span class="co">#&gt; 4 chains, each with iter=5000; warmup=2500; thin=1; </span>
<span class="co">#&gt; post-warmup draws per chain=2500, total post-warmup draws=10000.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;                         mean se_mean   sd     2.5%      25%      50%      75%    97.5% n_eff Rhat</span>
<span class="co">#&gt; d[Ciclosporin]          2.03    0.01 0.43     1.29     1.75     2.00     2.29     2.95  2898 1.00</span>
<span class="co">#&gt; d[Efalizumab]           1.19    0.00 0.19     0.81     1.10     1.19     1.28     1.59  4200 1.00</span>
<span class="co">#&gt; d[Etanercept 25 mg]     1.53    0.00 0.25     1.04     1.40     1.52     1.65     2.06  4514 1.00</span>
<span class="co">#&gt; d[Etanercept 50 mg]     1.93    0.00 0.28     1.35     1.79     1.93     2.07     2.53  5305 1.00</span>
<span class="co">#&gt; d[Fumaderm]             1.48    0.01 0.62     0.31     1.08     1.46     1.86     2.79  8839 1.00</span>
<span class="co">#&gt; d[Infliximab]           2.31    0.00 0.39     1.53     2.08     2.31     2.55     3.10  7123 1.00</span>
<span class="co">#&gt; d[Methotrexate]         1.73    0.01 0.63     0.59     1.32     1.69     2.10     3.08  3474 1.00</span>
<span class="co">#&gt; lp__                -3410.41    0.19 6.81 -3424.48 -3414.91 -3410.20 -3405.54 -3398.08  1272 1.01</span>
<span class="co">#&gt; tau                     0.32    0.01 0.22     0.02     0.16     0.27     0.44     0.85   936 1.01</span>
<span class="co">#&gt; cc[PASI50]              0.00     NaN 0.00     0.00     0.00     0.00     0.00     0.00   NaN  NaN</span>
<span class="co">#&gt; cc[PASI75]              0.76    0.00 0.03     0.70     0.74     0.76     0.78     0.82 20555 1.00</span>
<span class="co">#&gt; cc[PASI90]              1.56    0.00 0.05     1.46     1.53     1.56     1.60     1.67 23977 1.00</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Samples were drawn using NUTS(diag_e) at Mon Jan 11 09:41:56 2021.</span>
<span class="co">#&gt; For each parameter, n_eff is a crude measure of effective sample size,</span>
<span class="co">#&gt; and Rhat is the potential scale reduction factor on split chains (at </span>
<span class="co">#&gt; convergence, Rhat=1).</span></code></pre></div>
<p>By default, summaries of the study-specific intercepts <span class="math inline">\(\mu_j\)</span> and study-specific relative effects <span class="math inline">\(\delta_{jk}\)</span> are hidden, but could be examined by changing the <code>pars</code> argument:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Not run</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">pso_fit_RE</span>, pars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"d"</span>, <span class="st">"cc"</span>, <span class="st">"mu"</span>, <span class="st">"delta"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>The prior and posterior distributions can be compared visually using the <code><a href="../reference/plot_prior_posterior.html">plot_prior_posterior()</a></code> function:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/plot_prior_posterior.html">plot_prior_posterior</a></span><span class="op">(</span><span class="va">pso_fit_RE</span>, prior <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"trt"</span>, <span class="st">"aux"</span>, <span class="st">"het"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="example_hta_psoriasis_files/figure-html/pso_RE_pp_plot-1.png" width="700" style="display: block; margin: auto;"></p>
</div>
<div id="model-comparison" class="section level4">
<h4 class="hasAnchor">
<a href="#model-comparison" class="anchor"></a>Model comparison</h4>
<p>Model fit can be checked using the <code><a href="../reference/dic.html">dic()</a></code> function:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">(</span><span class="va">dic_FE</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dic.html">dic</a></span><span class="op">(</span><span class="va">pso_fit_FE</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; Residual deviance: 75 (on 58 data points)</span>
<span class="co">#&gt;                pD: 25.6</span>
<span class="co">#&gt;               DIC: 100.5</span></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">(</span><span class="va">dic_RE</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dic.html">dic</a></span><span class="op">(</span><span class="va">pso_fit_RE</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; Residual deviance: 62.5 (on 58 data points)</span>
<span class="co">#&gt;                pD: 33.5</span>
<span class="co">#&gt;               DIC: 96</span></code></pre></div>
<p>The random effects model has a lower DIC and the residual deviance is closer to the number of data points, so is preferred in this case.</p>
<p>We can also examine the residual deviance contributions with the corresponding <code><a href="https://rdrr.io/r/graphics/plot.default.html">plot()</a></code> method.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">dic_FE</span><span class="op">)</span></code></pre></div>
<p><img src="example_hta_psoriasis_files/figure-html/pso_FE_resdev_plot-1.png" width="700" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">dic_RE</span><span class="op">)</span></code></pre></div>
<p><img src="example_hta_psoriasis_files/figure-html/pso_RE_resdev_plot-1.png" width="700" style="display: block; margin: auto;"></p>
<p>Most data points are fit well, with posterior mean residual deviances close to the degrees of freedom. The Meffert 1997 study has a substantially higher residual deviance contribution, which could be investigated further to see why this study appears to be an outlier.</p>
</div>
</div>
<div id="further-results" class="section level3">
<h3 class="hasAnchor">
<a href="#further-results" class="anchor"></a>Further results</h3>
<p><span class="citation">Dias et al. (2011)</span> produce absolute predictions of probability of achieving responses at each PASI cutoff, assuming a Normal distribution for the baseline probit probability of PASI50 response on supportive care with mean <span class="math inline">\(-1.097\)</span> and precision <span class="math inline">\(123\)</span>. We can replicate these results using the <code><a href="https://rdrr.io/r/stats/predict.html">predict()</a></code> method. The <code>baseline</code> argument takes a <code><a href="../reference/distr.html">distr()</a></code> distribution object, with which we specify the corresponding Normal distribution. We set <code>type = "response"</code> to produce predicted probabilities (<code>type = "link"</code> would produce predicted probit probabilities).</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pred_FE</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span><span class="op">(</span><span class="va">pso_fit_FE</span>, 
                   baseline <span class="op">=</span> <span class="fu"><a href="../reference/distr.html">distr</a></span><span class="op">(</span><span class="va">qnorm</span>, mean <span class="op">=</span> <span class="op">-</span><span class="fl">1.097</span>, sd <span class="op">=</span> <span class="fl">123</span><span class="op">^</span><span class="op">-</span><span class="fl">0.5</span><span class="op">)</span>, 
                   type <span class="op">=</span> <span class="st">"response"</span><span class="op">)</span>
<span class="va">pred_FE</span>
<span class="co">#&gt;                                mean   sd 2.5%  25%  50%  75% 97.5% Bulk_ESS Tail_ESS Rhat</span>
<span class="co">#&gt; pred[Supportive care, PASI50]  0.14 0.02 0.10 0.12 0.14 0.15  0.18     3675     3431    1</span>
<span class="co">#&gt; pred[Supportive care, PASI75]  0.03 0.01 0.02 0.03 0.03 0.04  0.05     3824     3675    1</span>
<span class="co">#&gt; pred[Supportive care, PASI90]  0.00 0.00 0.00 0.00 0.00 0.00  0.01     4182     3645    1</span>
<span class="co">#&gt; pred[Ciclosporin, PASI50]      0.78 0.10 0.57 0.72 0.79 0.85  0.94     1352     2061    1</span>
<span class="co">#&gt; pred[Ciclosporin, PASI75]      0.52 0.13 0.28 0.43 0.52 0.62  0.78     1373     2038    1</span>
<span class="co">#&gt; pred[Ciclosporin, PASI90]      0.24 0.11 0.08 0.16 0.22 0.30  0.49     1387     1974    1</span>
<span class="co">#&gt; pred[Efalizumab, PASI50]       0.54 0.04 0.45 0.51 0.54 0.57  0.62     3010     3464    1</span>
<span class="co">#&gt; pred[Efalizumab, PASI75]       0.25 0.04 0.19 0.23 0.25 0.28  0.33     3103     3210    1</span>
<span class="co">#&gt; pred[Efalizumab, PASI90]       0.07 0.02 0.04 0.06 0.07 0.08  0.11     3080     3389    1</span>
<span class="co">#&gt; pred[Etanercept 25 mg, PASI50] 0.66 0.05 0.56 0.63 0.66 0.69  0.75     2440     3231    1</span>
<span class="co">#&gt; pred[Etanercept 25 mg, PASI75] 0.37 0.05 0.27 0.33 0.37 0.40  0.47     2562     3138    1</span>
<span class="co">#&gt; pred[Etanercept 25 mg, PASI90] 0.13 0.03 0.08 0.11 0.12 0.15  0.19     2741     3257    1</span>
<span class="co">#&gt; pred[Etanercept 50 mg, PASI50] 0.79 0.04 0.71 0.77 0.79 0.82  0.86     2738     3194    1</span>
<span class="co">#&gt; pred[Etanercept 50 mg, PASI75] 0.53 0.05 0.42 0.49 0.53 0.56  0.64     2806     3246    1</span>
<span class="co">#&gt; pred[Etanercept 50 mg, PASI90] 0.23 0.04 0.16 0.20 0.23 0.26  0.32     2931     3360    1</span>
<span class="co">#&gt; pred[Fumaderm, PASI50]         0.63 0.17 0.30 0.52 0.64 0.76  0.93     2728     1985    1</span>
<span class="co">#&gt; pred[Fumaderm, PASI75]         0.37 0.17 0.10 0.24 0.34 0.48  0.77     2732     1968    1</span>
<span class="co">#&gt; pred[Fumaderm, PASI90]         0.15 0.12 0.02 0.06 0.11 0.19  0.47     2714     1844    1</span>
<span class="co">#&gt; pred[Infliximab, PASI50]       0.88 0.05 0.76 0.85 0.89 0.92  0.96     3349     2848    1</span>
<span class="co">#&gt; pred[Infliximab, PASI75]       0.68 0.10 0.47 0.61 0.69 0.75  0.85     3339     3192    1</span>
<span class="co">#&gt; pred[Infliximab, PASI90]       0.38 0.10 0.19 0.30 0.37 0.45  0.60     3408     2975    1</span>
<span class="co">#&gt; pred[Methotrexate, PASI50]     0.68 0.15 0.37 0.58 0.70 0.79  0.92     1476     2231    1</span>
<span class="co">#&gt; pred[Methotrexate, PASI75]     0.41 0.16 0.14 0.29 0.40 0.53  0.75     1489     2165    1</span>
<span class="co">#&gt; pred[Methotrexate, PASI90]     0.17 0.11 0.03 0.09 0.15 0.23  0.45     1505     2128    1</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">pred_FE</span><span class="op">)</span></code></pre></div>
<p><img src="example_hta_psoriasis_files/figure-html/pso_pred_FE-1.png" width="700" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pred_RE</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span><span class="op">(</span><span class="va">pso_fit_RE</span>, 
                   baseline <span class="op">=</span> <span class="fu"><a href="../reference/distr.html">distr</a></span><span class="op">(</span><span class="va">qnorm</span>, mean <span class="op">=</span> <span class="op">-</span><span class="fl">1.097</span>, sd <span class="op">=</span> <span class="fl">123</span><span class="op">^</span><span class="op">-</span><span class="fl">0.5</span><span class="op">)</span>, 
                   type <span class="op">=</span> <span class="st">"response"</span><span class="op">)</span>
<span class="va">pred_RE</span>
<span class="co">#&gt;                                mean   sd 2.5%  25%  50%  75% 97.5% Bulk_ESS Tail_ESS Rhat</span>
<span class="co">#&gt; pred[Supportive care, PASI50]  0.14 0.02 0.10 0.12 0.14 0.15  0.18     9814     9874    1</span>
<span class="co">#&gt; pred[Supportive care, PASI75]  0.03 0.01 0.02 0.03 0.03 0.04  0.05    10467     9864    1</span>
<span class="co">#&gt; pred[Supportive care, PASI90]  0.00 0.00 0.00 0.00 0.00 0.00  0.01    11519     9729    1</span>
<span class="co">#&gt; pred[Ciclosporin, PASI50]      0.80 0.11 0.57 0.74 0.82 0.88  0.97     3350     3928    1</span>
<span class="co">#&gt; pred[Ciclosporin, PASI75]      0.56 0.15 0.28 0.45 0.56 0.67  0.87     3378     3950    1</span>
<span class="co">#&gt; pred[Ciclosporin, PASI90]      0.28 0.14 0.08 0.18 0.26 0.36  0.62     3399     4069    1</span>
<span class="co">#&gt; pred[Efalizumab, PASI50]       0.54 0.08 0.38 0.49 0.54 0.58  0.70     5349     3980    1</span>
<span class="co">#&gt; pred[Efalizumab, PASI75]       0.26 0.07 0.14 0.22 0.25 0.29  0.41     5424     4100    1</span>
<span class="co">#&gt; pred[Efalizumab, PASI90]       0.08 0.03 0.03 0.06 0.07 0.09  0.15     5541     4140    1</span>
<span class="co">#&gt; pred[Etanercept 25 mg, PASI50] 0.66 0.09 0.47 0.61 0.67 0.72  0.84     5503     4131    1</span>
<span class="co">#&gt; pred[Etanercept 25 mg, PASI75] 0.38 0.10 0.20 0.32 0.37 0.43  0.59     5555     4313    1</span>
<span class="co">#&gt; pred[Etanercept 25 mg, PASI90] 0.14 0.06 0.05 0.10 0.13 0.16  0.28     5637     4229    1</span>
<span class="co">#&gt; pred[Etanercept 50 mg, PASI50] 0.79 0.08 0.59 0.75 0.80 0.84  0.93     5772     4235    1</span>
<span class="co">#&gt; pred[Etanercept 50 mg, PASI75] 0.53 0.11 0.30 0.47 0.53 0.59  0.76     5802     4167    1</span>
<span class="co">#&gt; pred[Etanercept 50 mg, PASI90] 0.24 0.09 0.09 0.19 0.23 0.28  0.46     5871     4201    1</span>
<span class="co">#&gt; pred[Fumaderm, PASI50]         0.63 0.20 0.22 0.49 0.64 0.78  0.95     9282     5464    1</span>
<span class="co">#&gt; pred[Fumaderm, PASI75]         0.37 0.20 0.06 0.22 0.35 0.50  0.83     9294     5285    1</span>
<span class="co">#&gt; pred[Fumaderm, PASI90]         0.16 0.14 0.01 0.06 0.11 0.21  0.55     9355     5295    1</span>
<span class="co">#&gt; pred[Infliximab, PASI50]       0.87 0.08 0.66 0.83 0.89 0.93  0.98     7378     4971    1</span>
<span class="co">#&gt; pred[Infliximab, PASI75]       0.67 0.13 0.36 0.58 0.68 0.76  0.90     7436     4813    1</span>
<span class="co">#&gt; pred[Infliximab, PASI90]       0.37 0.14 0.12 0.28 0.36 0.46  0.68     7447     5043    1</span>
<span class="co">#&gt; pred[Methotrexate, PASI50]     0.70 0.18 0.30 0.59 0.72 0.84  0.98     4024     3725    1</span>
<span class="co">#&gt; pred[Methotrexate, PASI75]     0.45 0.21 0.10 0.30 0.44 0.60  0.90     4027     3803    1</span>
<span class="co">#&gt; pred[Methotrexate, PASI90]     0.21 0.17 0.02 0.09 0.17 0.29  0.67     4076     3668    1</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">pred_RE</span><span class="op">)</span></code></pre></div>
<p><img src="example_hta_psoriasis_files/figure-html/pso_pred_RE-1.png" width="700" style="display: block; margin: auto;"></p>
<p>We can modify the plots using standard <code>ggplot2</code> functions. For example, to plot the cutpoints together with a colour coding (instead of split into facets):</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">pred_RE</span>, position <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_dodge.html">position_dodge</a></span><span class="op">(</span>width <span class="op">=</span> <span class="fl">0.75</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_null.html">facet_null</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>colour <span class="op">=</span> <span class="va">Category</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html">scale_colour_brewer</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"Blues"</span><span class="op">)</span></code></pre></div>
<p><img src="example_hta_psoriasis_files/figure-html/pso_pred_RE_colour-1.png" width="700" style="display: block; margin: auto;"></p>
<p>If the <code>baseline</code> argument is omitted, predicted probabilities will be produced for every study in the network based on their estimated baseline probit probability <span class="math inline">\(\mu_j\)</span>.</p>
<p>Treatment rankings, rank probabilities, and cumulative rank probabilities can also be produced. We set <code>lower_better = FALSE</code> since higher outcome categories are better (the outcomes are positive).</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">(</span><span class="va">pso_ranks</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/posterior_ranks.html">posterior_ranks</a></span><span class="op">(</span><span class="va">pso_fit_RE</span>, lower_better <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;                        mean   sd 2.5% 25% 50% 75% 97.5% Bulk_ESS Tail_ESS Rhat</span>
<span class="co">#&gt; rank[Supportive care]  7.99 0.11    8   8   8   8     8     5520       NA    1</span>
<span class="co">#&gt; rank[Ciclosporin]      2.76 1.27    1   2   3   4     5     6521     7135    1</span>
<span class="co">#&gt; rank[Efalizumab]       6.35 0.82    4   6   7   7     7     5460       NA    1</span>
<span class="co">#&gt; rank[Etanercept 25 mg] 4.92 1.08    3   4   5   6     7     6787     6159    1</span>
<span class="co">#&gt; rank[Etanercept 50 mg] 3.05 1.21    1   2   3   4     5     5720     4234    1</span>
<span class="co">#&gt; rank[Fumaderm]         4.92 1.94    1   3   5   7     7     8860     5862    1</span>
<span class="co">#&gt; rank[Infliximab]       1.83 1.21    1   1   1   2     5     3118     3969    1</span>
<span class="co">#&gt; rank[Methotrexate]     4.19 1.88    1   3   4   6     7     5827     5437    1</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">pso_ranks</span><span class="op">)</span></code></pre></div>
<p><img src="example_hta_psoriasis_files/figure-html/hta_psoriasis_ranks-1.png" width="700" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">(</span><span class="va">pso_rankprobs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/posterior_ranks.html">posterior_rank_probs</a></span><span class="op">(</span><span class="va">pso_fit_RE</span>, lower_better <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;                     p_rank[1] p_rank[2] p_rank[3] p_rank[4] p_rank[5] p_rank[6] p_rank[7] p_rank[8]</span>
<span class="co">#&gt; d[Supportive care]       0.00      0.00      0.00      0.00      0.00      0.00      0.01      0.99</span>
<span class="co">#&gt; d[Ciclosporin]           0.17      0.29      0.27      0.17      0.07      0.02      0.00      0.00</span>
<span class="co">#&gt; d[Efalizumab]            0.00      0.00      0.01      0.02      0.10      0.36      0.52      0.00</span>
<span class="co">#&gt; d[Etanercept 25 mg]      0.00      0.01      0.08      0.21      0.38      0.26      0.05      0.00</span>
<span class="co">#&gt; d[Etanercept 50 mg]      0.08      0.30      0.27      0.24      0.09      0.02      0.01      0.00</span>
<span class="co">#&gt; d[Fumaderm]              0.07      0.09      0.09      0.11      0.16      0.19      0.27      0.01</span>
<span class="co">#&gt; d[Infliximab]            0.58      0.18      0.13      0.07      0.03      0.01      0.00      0.00</span>
<span class="co">#&gt; d[Methotrexate]          0.10      0.13      0.15      0.18      0.16      0.14      0.14      0.00</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">pso_rankprobs</span><span class="op">)</span></code></pre></div>
<p><img src="example_hta_psoriasis_files/figure-html/hta_psoriasis_rankprobs-1.png" width="700" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">(</span><span class="va">pso_cumrankprobs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/posterior_ranks.html">posterior_rank_probs</a></span><span class="op">(</span><span class="va">pso_fit_RE</span>, lower_better <span class="op">=</span> <span class="cn">FALSE</span>, cumulative <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;                     p_rank[1] p_rank[2] p_rank[3] p_rank[4] p_rank[5] p_rank[6] p_rank[7] p_rank[8]</span>
<span class="co">#&gt; d[Supportive care]       0.00      0.00      0.00      0.00      0.00      0.00      0.01         1</span>
<span class="co">#&gt; d[Ciclosporin]           0.17      0.46      0.73      0.90      0.98      1.00      1.00         1</span>
<span class="co">#&gt; d[Efalizumab]            0.00      0.00      0.01      0.03      0.13      0.48      1.00         1</span>
<span class="co">#&gt; d[Etanercept 25 mg]      0.00      0.02      0.10      0.31      0.69      0.95      1.00         1</span>
<span class="co">#&gt; d[Etanercept 50 mg]      0.08      0.37      0.65      0.88      0.98      0.99      1.00         1</span>
<span class="co">#&gt; d[Fumaderm]              0.07      0.16      0.25      0.37      0.53      0.72      0.99         1</span>
<span class="co">#&gt; d[Infliximab]            0.58      0.76      0.89      0.96      0.99      1.00      1.00         1</span>
<span class="co">#&gt; d[Methotrexate]          0.10      0.22      0.37      0.55      0.71      0.86      1.00         1</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">pso_cumrankprobs</span><span class="op">)</span></code></pre></div>
<p><img src="example_hta_psoriasis_files/figure-html/hta_psoriasis_cumrankprobs-1.png" width="700" style="display: block; margin: auto;"></p>
</div>
<div id="references" class="section level2 unnumbered">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<div id="refs" class="references">
<div id="ref-TSD2">
<p>Dias, S., N. J. Welton, A. J. Sutton, and A. E. Ades. 2011. “NICE DSU Technical Support Document 2: A Generalised Linear Modelling Framework for Pair-Wise and Network Meta-Analysis of Randomised Controlled Trials.” National Institute for Health and Care Excellence. <a href="http://nicedsu.org.uk/">http://nicedsu.org.uk/</a>.</p>
</div>
<div id="ref-Woolacott2006">
<p>Woolacott, N., N. Hawkins, A. Mason, A. Kainth, Z. Khadjesari, Y. Bravo Vergel, K. Misso, et al. 2006. “Etanercept and Efalizumab for the Treatment of Psoriasis: A Systematic Review.” <em>Health Technology Assessment</em> 10 (46). <a href="https://doi.org/10.3310/hta10460">https://doi.org/10.3310/hta10460</a>.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by David M. Phillippo.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
