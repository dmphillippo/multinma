<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Example: Smoking cessation • multinma</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<!-- katex math --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" integrity="sha384-7zkQWkzuo3B5mTepMUcHkMB5jZaolc2xDwL6VFqjFALcbeS9Ggm/Yr2r3Dy4lfFg" crossorigin="anonymous"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script><script src="../katex-auto.js"></script><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.10/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Example: Smoking cessation">
<meta name="robots" content="noindex">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">multinma</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.8.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/vignette_overview.html">Overview of Examples</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Examples</h6></li>
    <li><a class="dropdown-item" href="../articles/example_atrial_fibrillation.html">Example: Atrial fibrillation</a></li>
    <li><a class="dropdown-item" href="../articles/example_bcg_vaccine.html">Example: BCG vaccine for tuberculosis</a></li>
    <li><a class="dropdown-item" href="../articles/example_blocker.html">Example: Beta blockers</a></li>
    <li><a class="dropdown-item" href="../articles/example_diabetes.html">Example: Diabetes</a></li>
    <li><a class="dropdown-item" href="../articles/example_dietary_fat.html">Example: Dietary fat</a></li>
    <li><a class="dropdown-item" href="../articles/example_hta_psoriasis.html">Example: Plaque psoriasis HTA report</a></li>
    <li><a class="dropdown-item" href="../articles/example_ndmm.html">Example: Newly diagnosed multiple myeloma</a></li>
    <li><a class="dropdown-item" href="../articles/example_parkinsons.html">Example: Parkinson's disease</a></li>
    <li><a class="dropdown-item" href="../articles/example_plaque_psoriasis.html">Example: Plaque psoriasis ML-NMR</a></li>
    <li><a class="dropdown-item" href="../articles/example_smoking.html">Example: Smoking cessation</a></li>
    <li><a class="dropdown-item" href="../articles/example_social_anxiety.html">Example: Social Anxiety</a></li>
    <li><a class="dropdown-item" href="../articles/example_statins.html">Example: Statins for cholesterol lowering</a></li>
    <li><a class="dropdown-item" href="../articles/example_thrombolytics.html">Example: Thrombolytic treatments</a></li>
    <li><a class="dropdown-item" href="../articles/example_transfusion.html">Example: White blood cell transfusion</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/dmphillippo/multinma/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Example: Smoking cessation</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/dmphillippo/multinma/blob/develop/vignettes/example_smoking.Rmd" class="external-link"><code>vignettes/example_smoking.Rmd</code></a></small>
      <div class="d-none name"><code>example_smoking.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dmphillippo.github.io/multinma/">multinma</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>mc.cores <span class="op">=</span> <span class="fu">parallel</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/parallel/detectCores.html" class="external-link">detectCores</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; For execution on a local, multicore CPU with excess RAM we recommend calling</span></span>
<span><span class="co">#&gt; options(mc.cores = parallel::detectCores())</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'multinma'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     dgamma, pgamma, qgamma</span></span></code></pre>
<p>This vignette describes the analysis of smoking cessation data <span class="citation">(<a href="#ref-Hasselblad1998">Hasselblad
1998</a>)</span>, replicating the analysis in NICE Technical Support
Document 4 <span class="citation">(<a href="#ref-TSD4">Dias et al.
2011</a>)</span>. The data are available in this package as
<code>smoking</code>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">smoking</span><span class="op">)</span></span>
<span><span class="co">#&gt;   studyn trtn                   trtc  r   n</span></span>
<span><span class="co">#&gt; 1      1    1        No intervention  9 140</span></span>
<span><span class="co">#&gt; 2      1    3 Individual counselling 23 140</span></span>
<span><span class="co">#&gt; 3      1    4      Group counselling 10 138</span></span>
<span><span class="co">#&gt; 4      2    2              Self-help 11  78</span></span>
<span><span class="co">#&gt; 5      2    3 Individual counselling 12  85</span></span>
<span><span class="co">#&gt; 6      2    4      Group counselling 29 170</span></span></code></pre></div>
<div class="section level2">
<h2 id="setting-up-the-network">Setting up the network<a class="anchor" aria-label="anchor" href="#setting-up-the-network"></a>
</h2>
<p>We begin by setting up the network. We have arm-level count data
giving the number quitting smoking (<code>r</code>) out of the total
(<code>n</code>) in each arm, so we use the function
<code><a href="../reference/set_agd_arm.html">set_agd_arm()</a></code>. Treatment “No intervention” is set as the
network reference treatment.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">smknet</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/set_agd_arm.html">set_agd_arm</a></span><span class="op">(</span><span class="va">smoking</span>, </span>
<span>                      study <span class="op">=</span> <span class="va">studyn</span>,</span>
<span>                      trt <span class="op">=</span> <span class="va">trtc</span>,</span>
<span>                      r <span class="op">=</span> <span class="va">r</span>, </span>
<span>                      n <span class="op">=</span> <span class="va">n</span>,</span>
<span>                      trt_ref <span class="op">=</span> <span class="st">"No intervention"</span><span class="op">)</span></span>
<span><span class="va">smknet</span></span>
<span><span class="co">#&gt; A network with 24 AgD studies (arm-based).</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #555555;">-------------------------------------------------------</span> <span style="font-weight: bold;">AgD studies (arm-based)</span> <span style="color: #555555;">----</span> </span></span>
<span><span class="co">#&gt;  Study Treatment arms                                                 </span></span>
<span><span class="co">#&gt;  1     3: No intervention | Group counselling | Individual counselling</span></span>
<span><span class="co">#&gt;  2     3: Group counselling | Individual counselling | Self-help      </span></span>
<span><span class="co">#&gt;  3     2: No intervention | Individual counselling                    </span></span>
<span><span class="co">#&gt;  4     2: No intervention | Individual counselling                    </span></span>
<span><span class="co">#&gt;  5     2: No intervention | Individual counselling                    </span></span>
<span><span class="co">#&gt;  6     2: No intervention | Individual counselling                    </span></span>
<span><span class="co">#&gt;  7     2: No intervention | Individual counselling                    </span></span>
<span><span class="co">#&gt;  8     2: No intervention | Individual counselling                    </span></span>
<span><span class="co">#&gt;  9     2: No intervention | Individual counselling                    </span></span>
<span><span class="co">#&gt;  10    2: No intervention | Self-help                                 </span></span>
<span><span class="co">#&gt; <span style="color: #555555;"> ... plus 14 more studies</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Outcome type: count</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">------------------------------------------------------------------------------------</span></span></span>
<span><span class="co">#&gt; Total number of treatments: 4</span></span>
<span><span class="co">#&gt; Total number of studies: 24</span></span>
<span><span class="co">#&gt; Reference treatment is: No intervention</span></span>
<span><span class="co">#&gt; Network is <span style="color: #00BB00;">connected</span></span></span></code></pre></div>
<p>Plot the network structure.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">smknet</span>, weight_edges <span class="op">=</span> <span class="cn">TRUE</span>, weight_nodes <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="example_smoking_files/figure-html/smoking_network_plot-1.png" width="100%" style="display: block; margin: auto;"></p>
</div>
<div class="section level2">
<h2 id="random-effects-nma">Random effects NMA<a class="anchor" aria-label="anchor" href="#random-effects-nma"></a>
</h2>
<p>Following TSD 4, we fit a random effects NMA model, using the
<code><a href="../reference/nma.html">nma()</a></code> function with <code>trt_effects = "random"</code>. We
use <span class="math inline">\mathrm{N}(0, 100^2)</span> prior
distributions for the treatment effects <span class="math inline">d_k</span> and study-specific intercepts <span class="math inline">\mu_j</span>, and a <span class="math inline">\textrm{half-N}(5^2)</span> prior distribution for
the between-study heterogeneity standard deviation <span class="math inline">\tau</span>. We can examine the range of parameter
values implied by these prior distributions with the
<code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> method:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="fu"><a href="../reference/priors.html">normal</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">100</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; A Normal prior distribution: location = 0, scale = 100.</span></span>
<span><span class="co">#&gt; 50% of the prior density lies between -67.45 and 67.45.</span></span>
<span><span class="co">#&gt; 95% of the prior density lies between -196 and 196.</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="fu"><a href="../reference/priors.html">half_normal</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; A half-Normal prior distribution: location = 0, scale = 5.</span></span>
<span><span class="co">#&gt; 50% of the prior density lies between 0 and 3.37.</span></span>
<span><span class="co">#&gt; 95% of the prior density lies between 0 and 9.8.</span></span></code></pre></div>
<p>The model is fitted using the <code><a href="../reference/nma.html">nma()</a></code> function. By
default, this will use a Binomial likelihood and a logit link function,
auto-detected from the data.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">smkfit</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/nma.html">nma</a></span><span class="op">(</span><span class="va">smknet</span>, </span>
<span>              trt_effects <span class="op">=</span> <span class="st">"random"</span>,</span>
<span>              prior_intercept <span class="op">=</span> <span class="fu"><a href="../reference/priors.html">normal</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">100</span><span class="op">)</span>,</span>
<span>              prior_trt <span class="op">=</span> <span class="fu"><a href="../reference/priors.html">normal</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">100</span><span class="op">)</span>,</span>
<span>              prior_het <span class="op">=</span> <span class="fu"><a href="../reference/priors.html">normal</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;  / 2000 [ 50%]  (Warmup)</span></span>
<span><span class="co">#&gt; Chain 3: Iteration: 1001 / 2000 [ 50%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2: Iteration: 1000 / 2000 [ 50%]  (Warmup)</span></span>
<span><span class="co">#&gt; Chain 2: Iteration: 1001 / 2000 [ 50%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1: Iteration: 1200 / 2000 [ 60%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2: Iteration: 1200 / 2000 [ 60%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3: Iteration: 1200 / 2000 [ 60%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1: Iteration: 1400 / 2000 [ 70%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2: Iteration: 1400 / 2000 [ 70%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3: Iteration: 1400 / 2000 [ 70%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1: Iteration: 1600 / 2000 [ 80%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2: Iteration: 1600 / 2000 [ 80%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3: Iteration: 1600 / 2000 [ 80%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1: Iteration: 1800 / 2000 [ 90%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2: Iteration: 1800 / 2000 [ 90%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3: Iteration: 1800 / 2000 [ 90%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1: Iteration: 2000 / 2000 [100%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1: </span></span>
<span><span class="co">#&gt; Chain 1:  Elapsed Time: 0.588 seconds (Warm-up)</span></span>
<span><span class="co">#&gt; Chain 1:                0.456 seconds (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1:                1.044 seconds (Total)</span></span>
<span><span class="co">#&gt; Chain 1: </span></span>
<span><span class="co">#&gt; Chain 2: Iteration: 2000 / 2000 [100%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2: </span></span>
<span><span class="co">#&gt; Chain 2:  Elapsed Time: 0.617 seconds (Warm-up)</span></span>
<span><span class="co">#&gt; Chain 2:                0.447 seconds (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2:                1.064 seconds (Total)</span></span>
<span><span class="co">#&gt; Chain 2: </span></span>
<span><span class="co">#&gt; Chain 3: Iteration: 2000 / 2000 [100%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3: </span></span>
<span><span class="co">#&gt; Chain 3:  Elapsed Time: 0.593 seconds (Warm-up)</span></span>
<span><span class="co">#&gt; Chain 3:                0.498 seconds (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3:                1.091 seconds (Total)</span></span>
<span><span class="co">#&gt; Chain 3:</span></span></code></pre></div>
<p>Basic parameter summaries are given by the <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code>
method:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">smkfit</span></span>
<span><span class="co">#&gt; A random effects NMA with a binomial likelihood (logit link).</span></span>
<span><span class="co">#&gt; Inference for Stan model: binomial_1par.</span></span>
<span><span class="co">#&gt; 4 chains, each with iter=2000; warmup=1000; thin=1; </span></span>
<span><span class="co">#&gt; post-warmup draws per chain=1000, total post-warmup draws=4000.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;                               mean se_mean   sd     2.5%      25%      50%      75%    97.5%</span></span>
<span><span class="co">#&gt; d[Group counselling]          1.11    0.01 0.45     0.22     0.82     1.10     1.40     2.05</span></span>
<span><span class="co">#&gt; d[Individual counselling]     0.85    0.01 0.25     0.39     0.68     0.83     1.00     1.36</span></span>
<span><span class="co">#&gt; d[Self-help]                  0.49    0.01 0.42    -0.32     0.23     0.48     0.75     1.34</span></span>
<span><span class="co">#&gt; lp__                      -5767.58    0.19 6.30 -5781.19 -5771.58 -5767.27 -5763.13 -5756.26</span></span>
<span><span class="co">#&gt; tau                           0.85    0.01 0.18     0.56     0.72     0.82     0.96     1.26</span></span>
<span><span class="co">#&gt;                           n_eff Rhat</span></span>
<span><span class="co">#&gt; d[Group counselling]       1582 1.00</span></span>
<span><span class="co">#&gt; d[Individual counselling]   889 1.01</span></span>
<span><span class="co">#&gt; d[Self-help]               1751 1.00</span></span>
<span><span class="co">#&gt; lp__                       1137 1.01</span></span>
<span><span class="co">#&gt; tau                        1067 1.00</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Samples were drawn using NUTS(diag_e) at Tue May 27 13:34:11 2025.</span></span>
<span><span class="co">#&gt; For each parameter, n_eff is a crude measure of effective sample size,</span></span>
<span><span class="co">#&gt; and Rhat is the potential scale reduction factor on split chains (at </span></span>
<span><span class="co">#&gt; convergence, Rhat=1).</span></span></code></pre></div>
<p>By default, summaries of the study-specific intercepts <span class="math inline">\mu_j</span> and study-specific relative effects
<span class="math inline">\delta_{jk}</span> are hidden, but could be
examined by changing the <code>pars</code> argument:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Not run</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">smkfit</span>, pars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"d"</span>, <span class="st">"tau"</span>, <span class="st">"mu"</span>, <span class="st">"delta"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>The prior and posterior distributions can be compared visually using
the <code><a href="../reference/plot_prior_posterior.html">plot_prior_posterior()</a></code> function:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_prior_posterior.html">plot_prior_posterior</a></span><span class="op">(</span><span class="va">smkfit</span><span class="op">)</span></span></code></pre></div>
<p><img src="example_smoking_files/figure-html/smoking_pp_plot-1.png" width="100%" style="display: block; margin: auto;"></p>
<p>By default, this displays all model parameters given prior
distributions (in this case <span class="math inline">d_k</span>, <span class="math inline">\mu_j</span>, and <span class="math inline">\tau</span>), but this may be changed using the
<code>prior</code> argument:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_prior_posterior.html">plot_prior_posterior</a></span><span class="op">(</span><span class="va">smkfit</span>, prior <span class="op">=</span> <span class="st">"het"</span><span class="op">)</span></span></code></pre></div>
<p><img src="example_smoking_files/figure-html/smoking_pp_plot_tau-1.png" width="700" style="display: block; margin: auto;"></p>
<p>Model fit can be checked using the <code><a href="../reference/dic.html">dic()</a></code> function</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">dic_consistency</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dic.html">dic</a></span><span class="op">(</span><span class="va">smkfit</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Residual deviance: 53.5<span style="color: #555555;"> (on 50 data points)</span></span></span>
<span><span class="co">#&gt;                pD: 43.5</span></span>
<span><span class="co">#&gt;               DIC: 97</span></span></code></pre></div>
<p>and the residual deviance contributions examined with the
corresponding <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> method</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">dic_consistency</span><span class="op">)</span></span></code></pre></div>
<p><img src="example_smoking_files/figure-html/smoking_resdev_plot-1.png" width="768" style="display: block; margin: auto;"></p>
<p>Overall model fit seems to be adequate, with almost all points
showing good fit (mean residual deviance contribution of 1). The only
two points with higher residual deviance (i.e. worse fit) correspond to
the two zero counts in the data:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">smoking</span><span class="op">[</span><span class="va">smoking</span><span class="op">$</span><span class="va">r</span> <span class="op">==</span> <span class="fl">0</span>, <span class="op">]</span></span>
<span><span class="co">#&gt;    studyn trtn            trtc r  n</span></span>
<span><span class="co">#&gt; 13      6    1 No intervention 0 33</span></span>
<span><span class="co">#&gt; 31     15    1 No intervention 0 20</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="checking-for-inconsistency">Checking for inconsistency<a class="anchor" aria-label="anchor" href="#checking-for-inconsistency"></a>
</h2>
<blockquote>
<p><strong>Note:</strong> The results of the inconsistency models here
are slightly different to those of Dias et al. <span class="citation">(<a href="#ref-Dias2010">2010</a>, <a href="#ref-TSD4">2011</a>)</span>, although the overall conclusions are
the same. This is due to the presence of multi-arm trials and a
different ordering of treatments, meaning that inconsistency is
parameterised differently within the multi-arm trials. The same results
as Dias et al. are obtained if the network is instead set up with
<code>trtn</code> as the treatment variable.</p>
</blockquote>
<div class="section level3">
<h3 id="unrelated-mean-effects">Unrelated mean effects<a class="anchor" aria-label="anchor" href="#unrelated-mean-effects"></a>
</h3>
<p>We first fit an unrelated mean effects (UME) model <span class="citation">(<a href="#ref-TSD4">Dias et al. 2011</a>)</span> to
assess the consistency assumption. Again, we use the function
<code><a href="../reference/nma.html">nma()</a></code>, but now with the argument
<code>consistency = "ume"</code>.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">smkfit_ume</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/nma.html">nma</a></span><span class="op">(</span><span class="va">smknet</span>, </span>
<span>                  consistency <span class="op">=</span> <span class="st">"ume"</span>,</span>
<span>                  trt_effects <span class="op">=</span> <span class="st">"random"</span>,</span>
<span>                  prior_intercept <span class="op">=</span> <span class="fu"><a href="../reference/priors.html">normal</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">100</span><span class="op">)</span>,</span>
<span>                  prior_trt <span class="op">=</span> <span class="fu"><a href="../reference/priors.html">normal</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">100</span><span class="op">)</span>,</span>
<span>                  prior_het <span class="op">=</span> <span class="fu"><a href="../reference/priors.html">normal</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;  2000 [ 50%]  (Warmup)</span></span>
<span><span class="co">#&gt; Chain 1: Iteration: 1001 / 2000 [ 50%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3: Iteration: 1200 / 2000 [ 60%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2: Iteration: 1000 / 2000 [ 50%]  (Warmup)</span></span>
<span><span class="co">#&gt; Chain 2: Iteration: 1001 / 2000 [ 50%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1: Iteration: 1200 / 2000 [ 60%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3: Iteration: 1400 / 2000 [ 70%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2: Iteration: 1200 / 2000 [ 60%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3: Iteration: 1600 / 2000 [ 80%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2: Iteration: 1400 / 2000 [ 70%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1: Iteration: 1400 / 2000 [ 70%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3: Iteration: 1800 / 2000 [ 90%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2: Iteration: 1600 / 2000 [ 80%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1: Iteration: 1600 / 2000 [ 80%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3: Iteration: 2000 / 2000 [100%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3: </span></span>
<span><span class="co">#&gt; Chain 3:  Elapsed Time: 0.529 seconds (Warm-up)</span></span>
<span><span class="co">#&gt; Chain 3:                0.418 seconds (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3:                0.947 seconds (Total)</span></span>
<span><span class="co">#&gt; Chain 3: </span></span>
<span><span class="co">#&gt; Chain 2: Iteration: 1800 / 2000 [ 90%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1: Iteration: 1800 / 2000 [ 90%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2: Iteration: 2000 / 2000 [100%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2: </span></span>
<span><span class="co">#&gt; Chain 2:  Elapsed Time: 0.625 seconds (Warm-up)</span></span>
<span><span class="co">#&gt; Chain 2:                0.436 seconds (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2:                1.061 seconds (Total)</span></span>
<span><span class="co">#&gt; Chain 2: </span></span>
<span><span class="co">#&gt; Chain 1: Iteration: 2000 / 2000 [100%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1: </span></span>
<span><span class="co">#&gt; Chain 1:  Elapsed Time: 0.59 seconds (Warm-up)</span></span>
<span><span class="co">#&gt; Chain 1:                0.567 seconds (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1:                1.157 seconds (Total)</span></span>
<span><span class="co">#&gt; Chain 1:</span></span>
<span><span class="va">smkfit_ume</span></span></code></pre></div>
<p>Comparing the model fit statistics</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dic_consistency</span></span>
<span><span class="co">#&gt; Residual deviance: 53.5<span style="color: #555555;"> (on 50 data points)</span></span></span>
<span><span class="co">#&gt;                pD: 43.5</span></span>
<span><span class="co">#&gt;               DIC: 97</span></span>
<span><span class="op">(</span><span class="va">dic_ume</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dic.html">dic</a></span><span class="op">(</span><span class="va">smkfit_ume</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Residual deviance: 53.9<span style="color: #555555;"> (on 50 data points)</span></span></span>
<span><span class="co">#&gt;                pD: 45.1</span></span>
<span><span class="co">#&gt;               DIC: 99</span></span></code></pre></div>
<p>We see that there is little to choose between the two models.
However, it is also important to examine the individual contributions to
model fit of each data point under the two models (a so-called “dev-dev”
plot). Passing two <code>nma_dic</code> objects produced by the
<code><a href="../reference/dic.html">dic()</a></code> function to the <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> method produces
this dev-dev plot:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">dic_consistency</span>, <span class="va">dic_ume</span>, point_alpha <span class="op">=</span> <span class="fl">0.5</span>, interval_alpha <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span></span></code></pre></div>
<p><img src="example_smoking_files/figure-html/smoking_devdev_plot-1.png" width="700" style="display: block; margin: auto;"></p>
<p>All points lie roughly on the line of equality, so there is no
evidence for inconsistency here.</p>
</div>
<div class="section level3">
<h3 id="node-splitting">Node-splitting<a class="anchor" aria-label="anchor" href="#node-splitting"></a>
</h3>
<p>Another method for assessing inconsistency is node-splitting <span class="citation">(<a href="#ref-TSD4">Dias et al. 2011</a>, <a href="#ref-Dias2010">2010</a>)</span>. Whereas the UME model assesses
inconsistency globally, node-splitting assesses inconsistency locally
for each potentially inconsistent comparison (those with both direct and
indirect evidence) in turn.</p>
<p>Node-splitting can be performed using the <code><a href="../reference/nma.html">nma()</a></code> function
with the argument <code>consistency = "nodesplit"</code>. By default,
all possible comparisons will be split (as determined by the
<code><a href="../reference/get_nodesplits.html">get_nodesplits()</a></code> function). Alternatively, a specific
comparison or comparisons to split can be provided to the
<code>nodesplit</code> argument.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">smk_nodesplit</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/nma.html">nma</a></span><span class="op">(</span><span class="va">smknet</span>, </span>
<span>                     consistency <span class="op">=</span> <span class="st">"nodesplit"</span>,</span>
<span>                     trt_effects <span class="op">=</span> <span class="st">"random"</span>,</span>
<span>                     prior_intercept <span class="op">=</span> <span class="fu"><a href="../reference/priors.html">normal</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">100</span><span class="op">)</span>,</span>
<span>                     prior_trt <span class="op">=</span> <span class="fu"><a href="../reference/priors.html">normal</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">100</span><span class="op">)</span>,</span>
<span>                     prior_het <span class="op">=</span> <span class="fu"><a href="../reference/priors.html">normal</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Fitting model 1 of 7, node-split: Group counselling vs. No intervention</span></span>
<span><span class="co">#&gt; 0 / 2000 [ 50%]  (Warmup)</span></span>
<span><span class="co">#&gt; Chain 3: Iteration: 1001 / 2000 [ 50%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1: Iteration: 1000 / 2000 [ 50%]  (Warmup)</span></span>
<span><span class="co">#&gt; Chain 1: Iteration: 1001 / 2000 [ 50%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2: Iteration: 1200 / 2000 [ 60%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3: Iteration: 1200 / 2000 [ 60%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1: Iteration: 1200 / 2000 [ 60%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2: Iteration: 1400 / 2000 [ 70%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3: Iteration: 1400 / 2000 [ 70%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1: Iteration: 1400 / 2000 [ 70%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2: Iteration: 1600 / 2000 [ 80%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3: Iteration: 1600 / 2000 [ 80%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1: Iteration: 1600 / 2000 [ 80%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2: Iteration: 1800 / 2000 [ 90%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3: Iteration: 1800 / 2000 [ 90%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1: Iteration: 1800 / 2000 [ 90%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2: Iteration: 2000 / 2000 [100%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2: </span></span>
<span><span class="co">#&gt; Chain 2:  Elapsed Time: 0.626 seconds (Warm-up)</span></span>
<span><span class="co">#&gt; Chain 2:                0.491 seconds (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2:                1.117 seconds (Total)</span></span>
<span><span class="co">#&gt; Chain 2: </span></span>
<span><span class="co">#&gt; Chain 3: Iteration: 2000 / 2000 [100%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3: </span></span>
<span><span class="co">#&gt; Chain 3:  Elapsed Time: 0.651 seconds (Warm-up)</span></span>
<span><span class="co">#&gt; Chain 3:                0.499 seconds (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3:                1.15 seconds (Total)</span></span>
<span><span class="co">#&gt; Chain 3: </span></span>
<span><span class="co">#&gt; Chain 1: Iteration: 2000 / 2000 [100%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1: </span></span>
<span><span class="co">#&gt; Chain 1:  Elapsed Time: 0.697 seconds (Warm-up)</span></span>
<span><span class="co">#&gt; Chain 1:                0.477 seconds (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1:                1.174 seconds (Total)</span></span>
<span><span class="co">#&gt; Chain 1:</span></span>
<span><span class="co">#&gt; Fitting model 2 of 7, node-split: Individual counselling vs. No intervention</span></span>
<span><span class="co">#&gt; Chain 2: Iteration: 1400 / 2000 [ 70%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3: Iteration: 1400 / 2000 [ 70%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1: Iteration: 1800 / 2000 [ 90%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2: Iteration: 1600 / 2000 [ 80%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3: Iteration: 1600 / 2000 [ 80%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1: Iteration: 2000 / 2000 [100%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1: </span></span>
<span><span class="co">#&gt; Chain 1:  Elapsed Time: 1.224 seconds (Warm-up)</span></span>
<span><span class="co">#&gt; Chain 1:                0.957 seconds (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1:                2.181 seconds (Total)</span></span>
<span><span class="co">#&gt; Chain 1: </span></span>
<span><span class="co">#&gt; Chain 2: Iteration: 1800 / 2000 [ 90%]  (Sampling)</span></span>
<span><span class="co">#&gt;  </span></span>
<span><span class="co">#&gt; Chain 3: Iteration: 2000 / 2000 [100%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3: </span></span>
<span><span class="co">#&gt; Chain 3:  Elapsed Time: 0.651 seconds (Warm-up)</span></span>
<span><span class="co">#&gt; Chain 3:                0.499 seconds (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3:                1.15 seconds (Total)</span></span>
<span><span class="co">#&gt; Chain 3: </span></span>
<span><span class="co">#&gt; Chain 1: Iteration: 2000 / 2000 [100%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1: </span></span>
<span><span class="co">#&gt; Chain 1:  Elapsed Time: 0.697 seconds (Warm-up)</span></span>
<span><span class="co">#&gt; Chain 1:                0.477 seconds (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1:                1.174 seconds (Total)</span></span>
<span><span class="co">#&gt; Chain 1:</span></span>
<span><span class="co">#&gt; Fitting model 3 of 7, node-split: Self-help vs. No intervention</span></span>
<span><span class="co">#&gt;  2000 [ 50%]  (Warmup)</span></span>
<span><span class="co">#&gt; Chain 3: Iteration: 1001 / 2000 [ 50%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2: Iteration: 1000 / 2000 [ 50%]  (Warmup)</span></span>
<span><span class="co">#&gt; Chain 2: Iteration: 1001 / 2000 [ 50%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1: Iteration: 1200 / 2000 [ 60%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3: Iteration: 1200 / 2000 [ 60%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2: Iteration: 1200 / 2000 [ 60%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1: Iteration: 1400 / 2000 [ 70%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3: Iteration: 1400 / 2000 [ 70%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2: Iteration: 1400 / 2000 [ 70%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3: Iteration: 1600 / 2000 [ 80%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1: Iteration: 1600 / 2000 [ 80%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2: Iteration: 1600 / 2000 [ 80%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3: Iteration: 1800 / 2000 [ 90%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2: Iteration: 1800 / 2000 [ 90%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1: Iteration: 1800 / 2000 [ 90%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3: Iteration: 2000 / 2000 [100%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3: </span></span>
<span><span class="co">#&gt; Chain 3:  Elapsed Time: 0.877 seconds (Warm-up)</span></span>
<span><span class="co">#&gt; Chain 3:                0.618 seconds (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3:                1.495 seconds (Total)</span></span>
<span><span class="co">#&gt; Chain 3: </span></span>
<span><span class="co">#&gt; Chain 2: Iteration: 2000 / 2000 [100%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2: </span></span>
<span><span class="co">#&gt; Chain 2:  Elapsed Time: 0.884 seconds (Warm-up)</span></span>
<span><span class="co">#&gt; Chain 2:                0.717 seconds (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2:                1.601 seconds (Total)</span></span>
<span><span class="co">#&gt; Chain 2: </span></span>
<span><span class="co">#&gt; Chain 1: Iteration: 2000 / 2000 [100%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1: </span></span>
<span><span class="co">#&gt; Chain 1:  Elapsed Time: 0.8 seconds (Warm-up)</span></span>
<span><span class="co">#&gt; Chain 1:                0.872 seconds (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1:                1.672 seconds (Total)</span></span>
<span><span class="co">#&gt; Chain 1:</span></span>
<span><span class="co">#&gt; Fitting model 4 of 7, node-split: Individual counselling vs. Group counselling</span></span>
<span><span class="co">#&gt;  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1: Iteration: 1200 / 2000 [ 60%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3: Iteration: 1400 / 2000 [ 70%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2: Iteration: 1200 / 2000 [ 60%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1: Iteration: 1400 / 2000 [ 70%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3: Iteration: 1600 / 2000 [ 80%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2: Iteration: 1400 / 2000 [ 70%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1: Iteration: 1600 / 2000 [ 80%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3: Iteration: 1800 / 2000 [ 90%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1: Iteration: 1800 / 2000 [ 90%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2: Iteration: 1600 / 2000 [ 80%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3: Iteration: 2000 / 2000 [100%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3: </span></span>
<span><span class="co">#&gt; Chain 3:  Elapsed Time: 0.662 seconds (Warm-up)</span></span>
<span><span class="co">#&gt; Chain 3:                0.495 seconds (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3:                1.157 seconds (Total)</span></span>
<span><span class="co">#&gt; Chain 3: </span></span>
<span><span class="co">#&gt; Chain 1: Iteration: 2000 / 2000 [100%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1: </span></span>
<span><span class="co">#&gt; Chain 1:  Elapsed Time: 0.694 seconds (Warm-up)</span></span>
<span><span class="co">#&gt; Chain 1:                0.584 seconds (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1:                1.278 seconds (Total)</span></span>
<span><span class="co">#&gt; Chain 1: </span></span>
<span><span class="co">#&gt; Chain 2: Iteration: 1800 / 2000 [ 90%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1: Iteration: 2000 / 2000 [100%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1: </span></span>
<span><span class="co">#&gt; Chain 1:  Elapsed Time: 0.8 seconds (Warm-up)</span></span>
<span><span class="co">#&gt; Chain 1:                0.872 seconds (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1:                1.672 seconds (Total)</span></span>
<span><span class="co">#&gt; Chain 1:</span></span>
<span><span class="co">#&gt; Fitting model 5 of 7, node-split: Self-help vs. Group counselling</span></span>
<span><span class="co">#&gt; / 2000 [ 50%]  (Warmup)</span></span>
<span><span class="co">#&gt; Chain 2: Iteration: 1001 / 2000 [ 50%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3: Iteration: 1000 / 2000 [ 50%]  (Warmup)</span></span>
<span><span class="co">#&gt; Chain 3: Iteration: 1001 / 2000 [ 50%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2: Iteration: 1200 / 2000 [ 60%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1: Iteration: 1200 / 2000 [ 60%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3: Iteration: 1200 / 2000 [ 60%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2: Iteration: 1400 / 2000 [ 70%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1: Iteration: 1400 / 2000 [ 70%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3: Iteration: 1400 / 2000 [ 70%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2: Iteration: 1600 / 2000 [ 80%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3: Iteration: 1600 / 2000 [ 80%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1: Iteration: 1600 / 2000 [ 80%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2: Iteration: 1800 / 2000 [ 90%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3: Iteration: 1800 / 2000 [ 90%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1: Iteration: 1800 / 2000 [ 90%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2: Iteration: 2000 / 2000 [100%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2: </span></span>
<span><span class="co">#&gt; Chain 2:  Elapsed Time: 0.622 seconds (Warm-up)</span></span>
<span><span class="co">#&gt; Chain 2:                0.471 seconds (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2:                1.093 seconds (Total)</span></span>
<span><span class="co">#&gt; Chain 2: </span></span>
<span><span class="co">#&gt; Chain 3: Iteration: 2000 / 2000 [100%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3: </span></span>
<span><span class="co">#&gt; Chain 3:  Elapsed Time: 0.631 seconds (Warm-up)</span></span>
<span><span class="co">#&gt; Chain 3:                0.464 seconds (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3:                1.095 seconds (Total)</span></span>
<span><span class="co">#&gt; Chain 3: </span></span>
<span><span class="co">#&gt; Chain 1: Iteration: 2000 / 2000 [100%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1: </span></span>
<span><span class="co">#&gt; Chain 1:  Elapsed Time: 0.625 seconds (Warm-up)</span></span>
<span><span class="co">#&gt; Chain 1:                0.513 seconds (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1:                1.138 seconds (Total)</span></span>
<span><span class="co">#&gt; Chain 1:</span></span>
<span><span class="co">#&gt; Fitting model 6 of 7, node-split: Self-help vs. Individual counselling</span></span>
<span><span class="co">#&gt; (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2: Iteration: 1400 / 2000 [ 70%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1: Iteration: 1200 / 2000 [ 60%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3: Iteration: 1200 / 2000 [ 60%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2: Iteration: 1600 / 2000 [ 80%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1: Iteration: 1400 / 2000 [ 70%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2: Iteration: 1800 / 2000 [ 90%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3: Iteration: 1400 / 2000 [ 70%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1: Iteration: 1600 / 2000 [ 80%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2: Iteration: 2000 / 2000 [100%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2: </span></span>
<span><span class="co">#&gt; Chain 2:  Elapsed Time: 0.638 seconds (Warm-up)</span></span>
<span><span class="co">#&gt; Chain 2:                0.45 seconds (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2:                1.088 seconds (Total)</span></span>
<span><span class="co">#&gt; Chain 2: </span></span>
<span><span class="co">#&gt; Chain 1: Iteration: 1800 / 2000 [ 90%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3: Iteration: 1600 / 2000 [ 80%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1: Iteration: 2000 / 2000 [100%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1: </span></span>
<span><span class="co">#&gt; Chain 1:  Elapsed Time: 0.738 seconds (Warm-up)</span></span>
<span><span class="co">#&gt; Chain 1:                0.53 seconds (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1:                1.268 seconds (Total)</span></span>
<span><span class="co">#&gt; Chain 1: </span></span>
<span><span class="co">#&gt; Chain 3: Iteration: 1800 / 2000 [ 90%]  (Sampling)</span></span>
<span><span class="co">#&gt;  </span></span>
<span><span class="co">#&gt; Chain 1: Iteration: 2000 / 2000 [100%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1: </span></span>
<span><span class="co">#&gt; Chain 1:  Elapsed Time: 0.625 seconds (Warm-up)</span></span>
<span><span class="co">#&gt; Chain 1:                0.513 seconds (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1:                1.138 seconds (Total)</span></span>
<span><span class="co">#&gt; Chain 1:</span></span>
<span><span class="co">#&gt; Fitting model 7 of 7, consistency model</span></span>
<span><span class="co">#&gt;  2000 [ 50%]  (Warmup)</span></span>
<span><span class="co">#&gt; Chain 2: Iteration: 1001 / 2000 [ 50%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3: Iteration: 1000 / 2000 [ 50%]  (Warmup)</span></span>
<span><span class="co">#&gt; Chain 3: Iteration: 1001 / 2000 [ 50%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1: Iteration: 1200 / 2000 [ 60%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2: Iteration: 1200 / 2000 [ 60%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3: Iteration: 1200 / 2000 [ 60%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1: Iteration: 1400 / 2000 [ 70%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3: Iteration: 1400 / 2000 [ 70%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2: Iteration: 1400 / 2000 [ 70%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1: Iteration: 1600 / 2000 [ 80%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3: Iteration: 1600 / 2000 [ 80%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2: Iteration: 1600 / 2000 [ 80%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1: Iteration: 1800 / 2000 [ 90%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3: Iteration: 1800 / 2000 [ 90%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2: Iteration: 1800 / 2000 [ 90%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1: Iteration: 2000 / 2000 [100%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1: </span></span>
<span><span class="co">#&gt; Chain 1:  Elapsed Time: 0.6 seconds (Warm-up)</span></span>
<span><span class="co">#&gt; Chain 1:                0.435 seconds (Sampling)</span></span>
<span><span class="co">#&gt; Chain 1:                1.035 seconds (Total)</span></span>
<span><span class="co">#&gt; Chain 1: </span></span>
<span><span class="co">#&gt; Chain 3: Iteration: 2000 / 2000 [100%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3: </span></span>
<span><span class="co">#&gt; Chain 3:  Elapsed Time: 0.653 seconds (Warm-up)</span></span>
<span><span class="co">#&gt; Chain 3:                0.457 seconds (Sampling)</span></span>
<span><span class="co">#&gt; Chain 3:                1.11 seconds (Total)</span></span>
<span><span class="co">#&gt; Chain 3: </span></span>
<span><span class="co">#&gt; Chain 2: Iteration: 2000 / 2000 [100%]  (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2: </span></span>
<span><span class="co">#&gt; Chain 2:  Elapsed Time: 0.649 seconds (Warm-up)</span></span>
<span><span class="co">#&gt; Chain 2:                0.479 seconds (Sampling)</span></span>
<span><span class="co">#&gt; Chain 2:                1.128 seconds (Total)</span></span>
<span><span class="co">#&gt; Chain 2: </span></span>
<span><span class="co">#&gt; :</span></span></code></pre></div>
<p>The <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> method summarises the node-splitting
results, displaying the direct and indirect estimates <span class="math inline">d_\mathrm{dir}</span> and <span class="math inline">d_\mathrm{ind}</span> from each node-split model,
the network estimate <span class="math inline">d_\mathrm{net}</span>
from the consistency model, the inconsistency factor <span class="math inline">\omega = d_\mathrm{dir} - d_\mathrm{ind}</span>, and
a Bayesian <span class="math inline">p</span>-value for inconsistency on
each comparison. Since random effects models are fitted, the
heterogeneity standard deviation <span class="math inline">\tau</span>
under each node-split model and under the consistency model is also
displayed. The DIC model fit statistics are also provided.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">smk_nodesplit</span><span class="op">)</span></span>
<span><span class="co">#&gt; Node-splitting models fitted for 6 comparisons.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #555555;">------------------------------</span> <span style="font-weight: bold;">Node-split Group counselling vs. No intervention</span> <span style="color: #555555;">----</span> </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;                  mean   sd  2.5%   25%   50%  75% 97.5% Bulk_ESS Tail_ESS Rhat</span></span>
<span><span class="co">#&gt; d_net            1.08 0.43  0.25  0.80  1.07 1.35  1.98     2179     2443    1</span></span>
<span><span class="co">#&gt; d_dir            1.07 0.75 -0.40  0.58  1.04 1.54  2.62     3496     2691    1</span></span>
<span><span class="co">#&gt; d_ind            1.17 0.56  0.08  0.79  1.15 1.53  2.28     1500     1802    1</span></span>
<span><span class="co">#&gt; omega           -0.09 0.91 -1.81 -0.70 -0.11 0.50  1.77     2383     2719    1</span></span>
<span><span class="co">#&gt; tau              0.88 0.20  0.55  0.73  0.85 0.99  1.35      997     1524    1</span></span>
<span><span class="co">#&gt; tau_consistency  0.83 0.18  0.54  0.70  0.81 0.94  1.25     1430     2327    1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Residual deviance: 53.8<span style="color: #555555;"> (on 50 data points)</span></span></span>
<span><span class="co">#&gt;                pD: 44.1</span></span>
<span><span class="co">#&gt;               DIC: 97.9</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Bayesian p-value: 0.89</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #555555;">-------------------------</span> <span style="font-weight: bold;">Node-split Individual counselling vs. No intervention</span> <span style="color: #555555;">----</span> </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;                 mean   sd  2.5%   25%  50%  75% 97.5% Bulk_ESS Tail_ESS Rhat</span></span>
<span><span class="co">#&gt; d_net           0.84 0.24  0.40  0.68 0.83 0.98  1.33     1247     2061    1</span></span>
<span><span class="co">#&gt; d_dir           0.87 0.24  0.43  0.71 0.87 1.02  1.37     1917     2370    1</span></span>
<span><span class="co">#&gt; d_ind           0.55 0.63 -0.65  0.13 0.54 0.96  1.80     1385     2313    1</span></span>
<span><span class="co">#&gt; omega           0.32 0.65 -0.95 -0.10 0.33 0.76  1.55     1541     2365    1</span></span>
<span><span class="co">#&gt; tau             0.85 0.19  0.55  0.71 0.82 0.95  1.29     1090     1658    1</span></span>
<span><span class="co">#&gt; tau_consistency 0.83 0.18  0.54  0.70 0.81 0.94  1.25     1430     2327    1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Residual deviance: 54.7<span style="color: #555555;"> (on 50 data points)</span></span></span>
<span><span class="co">#&gt;                pD: 44.5</span></span>
<span><span class="co">#&gt;               DIC: 99.1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Bayesian p-value: 0.59</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #555555;">--------------------------------------</span> <span style="font-weight: bold;">Node-split Self-help vs. No intervention</span> <span style="color: #555555;">----</span> </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;                  mean   sd  2.5%   25%   50%  75% 97.5% Bulk_ESS Tail_ESS Rhat</span></span>
<span><span class="co">#&gt; d_net            0.49 0.40 -0.29  0.23  0.48 0.75  1.30     1895     2212    1</span></span>
<span><span class="co">#&gt; d_dir            0.34 0.55 -0.75 -0.01  0.33 0.68  1.42     3074     2991    1</span></span>
<span><span class="co">#&gt; d_ind            0.70 0.61 -0.47  0.30  0.70 1.09  1.90     2235     2495    1</span></span>
<span><span class="co">#&gt; omega           -0.36 0.83 -2.04 -0.90 -0.36 0.18  1.28     2294     2366    1</span></span>
<span><span class="co">#&gt; tau              0.88 0.20  0.57  0.74  0.85 0.99  1.32     1098     2054    1</span></span>
<span><span class="co">#&gt; tau_consistency  0.83 0.18  0.54  0.70  0.81 0.94  1.25     1430     2327    1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Residual deviance: 53.6<span style="color: #555555;"> (on 50 data points)</span></span></span>
<span><span class="co">#&gt;                pD: 44.2</span></span>
<span><span class="co">#&gt;               DIC: 97.8</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Bayesian p-value: 0.66</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #555555;">-----------------------</span> <span style="font-weight: bold;">Node-split Individual counselling vs. Group counselling</span> <span style="color: #555555;">----</span> </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;                  mean   sd  2.5%   25%   50%   75% 97.5% Bulk_ESS Tail_ESS Rhat</span></span>
<span><span class="co">#&gt; d_net           -0.24 0.40 -1.05 -0.51 -0.24  0.02  0.53     3229     2694    1</span></span>
<span><span class="co">#&gt; d_dir           -0.10 0.48 -1.05 -0.42 -0.10  0.20  0.84     3440     3085    1</span></span>
<span><span class="co">#&gt; d_ind           -0.54 0.61 -1.74 -0.94 -0.53 -0.13  0.68     1684     2247    1</span></span>
<span><span class="co">#&gt; omega            0.43 0.68 -0.87 -0.02  0.43  0.87  1.78     1826     2417    1</span></span>
<span><span class="co">#&gt; tau              0.87 0.19  0.55  0.73  0.84  0.98  1.31      981     1828    1</span></span>
<span><span class="co">#&gt; tau_consistency  0.83 0.18  0.54  0.70  0.81  0.94  1.25     1430     2327    1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Residual deviance: 53.9<span style="color: #555555;"> (on 50 data points)</span></span></span>
<span><span class="co">#&gt;                pD: 44.3</span></span>
<span><span class="co">#&gt;               DIC: 98.2</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Bayesian p-value: 0.52</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #555555;">------------------------------------</span> <span style="font-weight: bold;">Node-split Self-help vs. Group counselling</span> <span style="color: #555555;">----</span> </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;                  mean   sd  2.5%   25%   50%   75% 97.5% Bulk_ESS Tail_ESS Rhat</span></span>
<span><span class="co">#&gt; d_net           -0.59 0.47 -1.53 -0.90 -0.59 -0.28  0.31     2833     2619    1</span></span>
<span><span class="co">#&gt; d_dir           -0.62 0.64 -1.91 -1.05 -0.61 -0.19  0.62     3445     2767    1</span></span>
<span><span class="co">#&gt; d_ind           -0.61 0.67 -1.96 -1.04 -0.60 -0.16  0.65     1852     2014    1</span></span>
<span><span class="co">#&gt; omega           -0.01 0.86 -1.70 -0.58 -0.01  0.55  1.74     1873     2755    1</span></span>
<span><span class="co">#&gt; tau              0.87 0.19  0.57  0.74  0.85  0.98  1.30     1043     1830    1</span></span>
<span><span class="co">#&gt; tau_consistency  0.83 0.18  0.54  0.70  0.81  0.94  1.25     1430     2327    1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Residual deviance: 53.7<span style="color: #555555;"> (on 50 data points)</span></span></span>
<span><span class="co">#&gt;                pD: 44</span></span>
<span><span class="co">#&gt;               DIC: 97.6</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Bayesian p-value: 0.99</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #555555;">-------------------------------</span> <span style="font-weight: bold;">Node-split Self-help vs. Individual counselling</span> <span style="color: #555555;">----</span> </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;                  mean   sd  2.5%   25%   50%   75% 97.5% Bulk_ESS Tail_ESS Rhat</span></span>
<span><span class="co">#&gt; d_net           -0.35 0.41 -1.17 -0.61 -0.35 -0.09  0.46     2293     2588    1</span></span>
<span><span class="co">#&gt; d_dir            0.07 0.66 -1.19 -0.35  0.07  0.49  1.39     3070     2653    1</span></span>
<span><span class="co">#&gt; d_ind           -0.63 0.52 -1.72 -0.96 -0.62 -0.28  0.37     1740     2022    1</span></span>
<span><span class="co">#&gt; omega            0.70 0.82 -0.85  0.16  0.69  1.21  2.34     2261     2662    1</span></span>
<span><span class="co">#&gt; tau              0.86 0.20  0.54  0.72  0.83  0.97  1.30     1122     1750    1</span></span>
<span><span class="co">#&gt; tau_consistency  0.83 0.18  0.54  0.70  0.81  0.94  1.25     1430     2327    1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Residual deviance: 53.6<span style="color: #555555;"> (on 50 data points)</span></span></span>
<span><span class="co">#&gt;                pD: 43.9</span></span>
<span><span class="co">#&gt;               DIC: 97.5</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Bayesian p-value: 0.39</span></span></code></pre></div>
<p>The DIC of each inconsistency model is unchanged from the consistency
model, no node-splits result in reduced heterogeneity standard deviation
<span class="math inline">\tau</span> compared to the consistency model,
and the Bayesian <span class="math inline">p</span>-values are all
large. There is no evidence of inconsistency.</p>
<p>We can visually compare the posterior distributions of the direct,
indirect, and network estimates using the <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> method.
These are all in agreement; the posterior densities of the direct and
indirect estimates overlap. Notice that there is not much indirect
information for the Individual counselling vs. No intervention
comparison, so the network (consistency) estimate is very similar to the
direct estimate for this comparison.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">smk_nodesplit</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"bottom"</span>, legend.direction <span class="op">=</span> <span class="st">"horizontal"</span><span class="op">)</span></span></code></pre></div>
<p><img src="example_smoking_files/figure-html/smk_nodesplit-1.png" width="672" style="display: block; margin: auto;"></p>
</div>
</div>
<div class="section level2">
<h2 id="further-results">Further results<a class="anchor" aria-label="anchor" href="#further-results"></a>
</h2>
<p>Pairwise relative effects, for all pairwise contrasts with
<code>all_contrasts = TRUE</code>.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">smk_releff</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/relative_effects.html">relative_effects</a></span><span class="op">(</span><span class="va">smkfit</span>, all_contrasts <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;                                                  mean   sd  2.5%   25%   50%   75% 97.5%</span></span>
<span><span class="co">#&gt; d[Group counselling vs. No intervention]         1.11 0.45  0.22  0.82  1.10  1.40  2.05</span></span>
<span><span class="co">#&gt; d[Individual counselling vs. No intervention]    0.85 0.25  0.39  0.68  0.83  1.00  1.36</span></span>
<span><span class="co">#&gt; d[Self-help vs. No intervention]                 0.49 0.42 -0.32  0.23  0.48  0.75  1.34</span></span>
<span><span class="co">#&gt; d[Individual counselling vs. Group counselling] -0.26 0.43 -1.10 -0.55 -0.26  0.02  0.56</span></span>
<span><span class="co">#&gt; d[Self-help vs. Group counselling]              -0.62 0.49 -1.60 -0.93 -0.61 -0.30  0.35</span></span>
<span><span class="co">#&gt; d[Self-help vs. Individual counselling]         -0.36 0.42 -1.21 -0.62 -0.35 -0.09  0.47</span></span>
<span><span class="co">#&gt;                                                 Bulk_ESS Tail_ESS Rhat</span></span>
<span><span class="co">#&gt; d[Group counselling vs. No intervention]            1736     1873 1.00</span></span>
<span><span class="co">#&gt; d[Individual counselling vs. No intervention]        901     1593 1.01</span></span>
<span><span class="co">#&gt; d[Self-help vs. No intervention]                    1822     2102 1.00</span></span>
<span><span class="co">#&gt; d[Individual counselling vs. Group counselling]     2768     2704 1.00</span></span>
<span><span class="co">#&gt; d[Self-help vs. Group counselling]                  3048     3098 1.00</span></span>
<span><span class="co">#&gt; d[Self-help vs. Individual counselling]             2360     2533 1.00</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">smk_releff</span>, ref_line <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></code></pre></div>
<p><img src="example_smoking_files/figure-html/smoking_releff-1.png" width="700" style="display: block; margin: auto;"></p>
<p>Treatment rankings, rank probabilities, and cumulative rank
probabilities. We set <code>lower_better = FALSE</code> since a higher
log odds of cessation is better (the outcome is positive).</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">smk_ranks</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/posterior_ranks.html">posterior_ranks</a></span><span class="op">(</span><span class="va">smkfit</span>, lower_better <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;                              mean   sd 2.5% 25% 50% 75% 97.5% Bulk_ESS Tail_ESS Rhat</span></span>
<span><span class="co">#&gt; rank[No intervention]        3.88 0.33    3   4   4   4     4     2240       NA    1</span></span>
<span><span class="co">#&gt; rank[Group counselling]      1.37 0.62    1   1   1   2     3     3157     2727    1</span></span>
<span><span class="co">#&gt; rank[Individual counselling] 1.92 0.63    1   2   2   2     3     2937     3132    1</span></span>
<span><span class="co">#&gt; rank[Self-help]              2.82 0.70    1   3   3   3     4     2612       NA    1</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">smk_ranks</span><span class="op">)</span></span></code></pre></div>
<p><img src="example_smoking_files/figure-html/smoking_ranks-1.png" width="700" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">smk_rankprobs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/posterior_ranks.html">posterior_rank_probs</a></span><span class="op">(</span><span class="va">smkfit</span>, lower_better <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;                           p_rank[1] p_rank[2] p_rank[3] p_rank[4]</span></span>
<span><span class="co">#&gt; d[No intervention]             0.00      0.00      0.11      0.88</span></span>
<span><span class="co">#&gt; d[Group counselling]           0.70      0.23      0.07      0.00</span></span>
<span><span class="co">#&gt; d[Individual counselling]      0.24      0.60      0.16      0.00</span></span>
<span><span class="co">#&gt; d[Self-help]                   0.06      0.18      0.65      0.11</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">smk_rankprobs</span><span class="op">)</span></span></code></pre></div>
<p><img src="example_smoking_files/figure-html/smoking_rankprobs-1.png" width="700" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">smk_cumrankprobs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/posterior_ranks.html">posterior_rank_probs</a></span><span class="op">(</span><span class="va">smkfit</span>, lower_better <span class="op">=</span> <span class="cn">FALSE</span>, cumulative <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;                           p_rank[1] p_rank[2] p_rank[3] p_rank[4]</span></span>
<span><span class="co">#&gt; d[No intervention]             0.00      0.00      0.12         1</span></span>
<span><span class="co">#&gt; d[Group counselling]           0.70      0.93      1.00         1</span></span>
<span><span class="co">#&gt; d[Individual counselling]      0.24      0.84      1.00         1</span></span>
<span><span class="co">#&gt; d[Self-help]                   0.06      0.23      0.89         1</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">smk_cumrankprobs</span><span class="op">)</span></span></code></pre></div>
<p><img src="example_smoking_files/figure-html/smoking_cumrankprobs-1.png" width="700" style="display: block; margin: auto;"></p>
</div>
<div class="section level2 unnumbered">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-Dias2010" class="csl-entry">
Dias, S., N. J. Welton, D. M. Caldwell, and A. E. Ades. 2010.
<span>“Checking Consistency in Mixed Treatment Comparison
Meta-Analysis.”</span> <em>Statistics in Medicine</em> 29 (7-8): 932–44.
<a href="https://doi.org/10.1002/sim.3767" class="external-link">https://doi.org/10.1002/sim.3767</a>.
</div>
<div id="ref-TSD4" class="csl-entry">
Dias, S., N. J. Welton, A. J. Sutton, D. M. Caldwell, G. Lu, and A. E.
Ades. 2011. <span>“<span>NICE DSU Technical Support Document</span> 4:
Inconsistency in Networks of Evidence Based on Randomised Controlled
Trials.”</span> <span>National Institute for Health and Care
Excellence</span>. <a href="https://www.sheffield.ac.uk/nice-dsu" class="external-link">https://www.sheffield.ac.uk/nice-dsu</a>.
</div>
<div id="ref-Hasselblad1998" class="csl-entry">
Hasselblad, V. 1998. <span>“Meta-Analysis of Multitreatment
Studies.”</span> <em>Medical Decision Making</em> 18 (1): 37–43. <a href="https://doi.org/10.1177/0272989x9801800110" class="external-link">https://doi.org/10.1177/0272989x9801800110</a>.
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by David M. Phillippo.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>



  <script data-goatcounter="https://multinma.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
</body>
</html>
