<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Example: Plaque psoriasis HTA report • multinma</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.9/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Example: Plaque psoriasis HTA report">
<meta name="robots" content="noindex">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">multinma</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.7.2.9001</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/vignette_overview.html">Overview of Examples</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Examples</h6></li>
    <li><a class="dropdown-item" href="../articles/example_atrial_fibrillation.html">Example: Atrial fibrillation</a></li>
    <li><a class="dropdown-item" href="../articles/example_bcg_vaccine.html">Example: BCG vaccine for tuberculosis</a></li>
    <li><a class="dropdown-item" href="../articles/example_blocker.html">Example: Beta blockers</a></li>
    <li><a class="dropdown-item" href="../articles/example_diabetes.html">Example: Diabetes</a></li>
    <li><a class="dropdown-item" href="../articles/example_dietary_fat.html">Example: Dietary fat</a></li>
    <li><a class="dropdown-item" href="../articles/example_hta_psoriasis.html">Example: Plaque psoriasis HTA report</a></li>
    <li><a class="dropdown-item" href="../articles/example_ndmm.html">Example: Newly diagnosed multiple myeloma</a></li>
    <li><a class="dropdown-item" href="../articles/example_parkinsons.html">Example: Parkinson's disease</a></li>
    <li><a class="dropdown-item" href="../articles/example_plaque_psoriasis.html">Example: Plaque psoriasis ML-NMR</a></li>
    <li><a class="dropdown-item" href="../articles/example_smoking.html">Example: Smoking cessation</a></li>
    <li><a class="dropdown-item" href="../articles/example_statins.html">Example: Statins for cholesterol lowering</a></li>
    <li><a class="dropdown-item" href="../articles/example_thrombolytics.html">Example: Thrombolytic treatments</a></li>
    <li><a class="dropdown-item" href="../articles/example_transfusion.html">Example: White blood cell transfusion</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/dmphillippo/multinma/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Example: Plaque psoriasis HTA report</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/dmphillippo/multinma/blob/develop/vignettes/example_hta_psoriasis.Rmd" class="external-link"><code>vignettes/example_hta_psoriasis.Rmd</code></a></small>
      <div class="d-none name"><code>example_hta_psoriasis.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dmphillippo.github.io/multinma/">multinma</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>mc.cores <span class="op">=</span> <span class="fu">parallel</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/parallel/detectCores.html" class="external-link">detectCores</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; For execution on a local, multicore CPU with excess RAM we recommend calling</span></span>
<span><span class="co">#&gt; options(mc.cores = parallel::detectCores())</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'multinma'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     dgamma, pgamma, qgamma</span></span></code></pre>
<p>This vignette describes the analysis of treatments for
moderate-to-severe plaque psoriasis from an HTA report <span class="citation">(<a href="#ref-Woolacott2006">Woolacott et al.
2006</a>)</span>, replicating the analysis in NICE Technical Support
Document 2 <span class="citation">(<a href="#ref-TSD2">Dias et al.
2011</a>)</span>. The data are available in this package as
<code>hta_psoriasis</code>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">hta_psoriasis</span><span class="op">)</span></span>
<span><span class="co">#&gt;   studyn   studyc year trtn             trtc sample_size PASI50 PASI75 PASI90</span></span>
<span><span class="co">#&gt; 1      1  Elewski 2004    1  Supportive care         193     12      5      1</span></span>
<span><span class="co">#&gt; 2      1  Elewski 2004    2 Etanercept 25 mg         196     59     46     21</span></span>
<span><span class="co">#&gt; 3      1  Elewski 2004    3 Etanercept 50 mg         194     54     56     40</span></span>
<span><span class="co">#&gt; 4      2 Gottlieb 2003    1  Supportive care          55      5      1      0</span></span>
<span><span class="co">#&gt; 5      2 Gottlieb 2003    2 Etanercept 25 mg          57     23     11      6</span></span>
<span><span class="co">#&gt; 6      3  Lebwohl 2003    1  Supportive care         122     13      5      1</span></span></code></pre></div>
<p>Outcomes are ordered multinomial success/failure to achieve 50%, 75%,
or 90% reduction in symptoms on the Psoriasis Area and Severity Index
(PASI) scale. Some studies report ordered outcomes at all three
cutpoints, others only one or two:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">hta_psoriasis</span>, <span class="va">studyc</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Elewski"</span>, <span class="st">"Gordon"</span>, <span class="st">"ACD2058g"</span>, <span class="st">"Altmeyer"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;   studyn   studyc year trtn             trtc sample_size PASI50 PASI75 PASI90</span></span>
<span><span class="co">#&gt; 1      1  Elewski 2004    1  Supportive care         193     12      5      1</span></span>
<span><span class="co">#&gt; 2      1  Elewski 2004    2 Etanercept 25 mg         196     59     46     21</span></span>
<span><span class="co">#&gt; 3      1  Elewski 2004    3 Etanercept 50 mg         194     54     56     40</span></span>
<span><span class="co">#&gt; 4      5   Gordon 2003    1  Supportive care         187     18      8     NA</span></span>
<span><span class="co">#&gt; 5      5   Gordon 2003    4       Efalizumab         369    118     98     NA</span></span>
<span><span class="co">#&gt; 6      6 ACD2058g 2004    1  Supportive care         170     25     NA     NA</span></span>
<span><span class="co">#&gt; 7      6 ACD2058g 2004    4       Efalizumab         162     99     NA     NA</span></span>
<span><span class="co">#&gt; 8     10 Altmeyer 1994    1  Supportive care          51     NA      1     NA</span></span>
<span><span class="co">#&gt; 9     10 Altmeyer 1994    6         Fumaderm          49     NA     12     NA</span></span></code></pre></div>
<p>Here, the outcome counts are given as “exclusive” counts. That is,
for a study reporting all outcomes (e.g. Elewski), the counts represent
the categories 50 &lt; PASI &lt; 75, 75 &lt; PASI &lt; 90, and 90 &lt;
PASI &lt; 100, and the corresponding columns are named by the lower end
of the interval. Missing values are used where studies only report a
subset of the outcomes. For a study reporting only two outcomes, say
PASI50 and PASI75 as in Gordon, the counts represent the categories 50
&lt; PASI &lt; 75 and 75 &lt; PASI &lt; 100. For a study reporting only
one outcome, say PASI70 as in Altmeyer, the count represents 70 &lt;
PASI &lt; 100. We also need the count for the lowest category (i.e. no
higher outcomes achieved), which is equal to the sample size minus the
counts in the other observed categories.</p>
<div class="section level2">
<h2 id="setting-up-the-network">Setting up the network<a class="anchor" aria-label="anchor" href="#setting-up-the-network"></a>
</h2>
<p>We begin by setting up the network. We have arm-level ordered
multinomial count data, so we use the function
<code><a href="../reference/set_agd_arm.html">set_agd_arm()</a></code>. The function <code><a href="../reference/multi.html">multi()</a></code> helps us
to specify the ordered outcomes correctly.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pso_net</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/set_agd_arm.html">set_agd_arm</a></span><span class="op">(</span><span class="va">hta_psoriasis</span>, </span>
<span>                       study <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">studyc</span>, <span class="va">year</span><span class="op">)</span>, </span>
<span>                       trt <span class="op">=</span> <span class="va">trtc</span>, </span>
<span>                       r <span class="op">=</span> <span class="fu"><a href="../reference/multi.html">multi</a></span><span class="op">(</span>r0 <span class="op">=</span> <span class="va">sample_size</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowSums</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">PASI50</span>, <span class="va">PASI75</span>, <span class="va">PASI90</span><span class="op">)</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, </span>
<span>                                 <span class="va">PASI50</span>, <span class="va">PASI75</span>, <span class="va">PASI90</span>,</span>
<span>                                 inclusive <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>                                 type <span class="op">=</span> <span class="st">"ordered"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">pso_net</span></span>
<span><span class="co">#&gt; A network with 16 AgD studies (arm-based).</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #555555;">-------------------------------------------------------</span> <span style="font-weight: bold;">AgD studies (arm-based)</span> <span style="color: #555555;">----</span> </span></span>
<span><span class="co">#&gt;  Study         Treatment arms                                          </span></span>
<span><span class="co">#&gt;  ACD2058g 2004 2: Supportive care | Efalizumab                         </span></span>
<span><span class="co">#&gt;  ACD2600g 2004 2: Supportive care | Efalizumab                         </span></span>
<span><span class="co">#&gt;  Altmeyer 1994 2: Supportive care | Fumaderm                           </span></span>
<span><span class="co">#&gt;  Chaudari 2001 2: Supportive care | Infliximab                         </span></span>
<span><span class="co">#&gt;  Elewski 2004  3: Supportive care | Etanercept 25 mg | Etanercept 50 mg</span></span>
<span><span class="co">#&gt;  Ellis 1991    3: Supportive care | Ciclosporin | Ciclosporin          </span></span>
<span><span class="co">#&gt;  Gordon 2003   2: Supportive care | Efalizumab                         </span></span>
<span><span class="co">#&gt;  Gottlieb 2003 2: Supportive care | Etanercept 25 mg                   </span></span>
<span><span class="co">#&gt;  Gottlieb 2004 3: Supportive care | Infliximab | Infliximab            </span></span>
<span><span class="co">#&gt;  Guenther 1991 2: Supportive care | Ciclosporin                        </span></span>
<span><span class="co">#&gt; <span style="color: #555555;"> ... plus 6 more studies</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Outcome type: ordered (4 categories)</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">------------------------------------------------------------------------------------</span></span></span>
<span><span class="co">#&gt; Total number of treatments: 8</span></span>
<span><span class="co">#&gt; Total number of studies: 16</span></span>
<span><span class="co">#&gt; Reference treatment is: Supportive care</span></span>
<span><span class="co">#&gt; Network is <span style="color: #00BB00;">connected</span></span></span></code></pre></div>
<p>Plot the network structure.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">pso_net</span>, weight_edges <span class="op">=</span> <span class="cn">TRUE</span>, weight_nodes <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="co"># Nudge the legend over</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.box.spacing <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">0.75</span>, <span class="st">"in"</span><span class="op">)</span>,</span>
<span>                 plot.margin <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">margin</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0</span>, <span class="fl">0.1</span>, <span class="fl">0.75</span>, <span class="st">"in"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="example_hta_psoriasis_files/figure-html/hta_psoriasis_network_plot-1.png" width="700" style="display: block; margin: auto;"></p>
</div>
<div class="section level2">
<h2 id="meta-analysis-models">Meta-analysis models<a class="anchor" aria-label="anchor" href="#meta-analysis-models"></a>
</h2>
<p>We fit both fixed effect (FE) and random effects (RE) models.</p>
<div class="section level3">
<h3 id="fixed-effect-meta-analysis">Fixed effect meta-analysis<a class="anchor" aria-label="anchor" href="#fixed-effect-meta-analysis"></a>
</h3>
<p>First, we fit a fixed effect model using the <code><a href="../reference/nma.html">nma()</a></code>
function with <code>trt_effects = "fixed"</code>, using a probit link
function <code>link = "probit"</code>. We use
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">N</mi><mrow><mo stretchy="true" form="prefix">(</mo><mn>0</mn><mo>,</mo><msup><mn>10</mn><mn>2</mn></msup><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\mathrm{N}(0, 10^2)</annotation></semantics></math>
prior distributions for the treatment effects
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>d</mi><mi>k</mi></msub><annotation encoding="application/x-tex">d_k</annotation></semantics></math>,
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">N</mi><mrow><mo stretchy="true" form="prefix">(</mo><mn>0</mn><mo>,</mo><msup><mn>100</mn><mn>2</mn></msup><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\mathrm{N}(0, 100^2)</annotation></semantics></math>
prior distributions for the study-specific intercepts
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>μ</mi><mi>j</mi></msub><annotation encoding="application/x-tex">\mu_j</annotation></semantics></math>.
We can examine the range of parameter values implied by these prior
distributions with the <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> method:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="fu"><a href="../reference/priors.html">normal</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; A Normal prior distribution: location = 0, scale = 10.</span></span>
<span><span class="co">#&gt; 50% of the prior density lies between -6.74 and 6.74.</span></span>
<span><span class="co">#&gt; 95% of the prior density lies between -19.6 and 19.6.</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="fu"><a href="../reference/priors.html">normal</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">100</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; A Normal prior distribution: location = 0, scale = 100.</span></span>
<span><span class="co">#&gt; 50% of the prior density lies between -67.45 and 67.45.</span></span>
<span><span class="co">#&gt; 95% of the prior density lies between -196 and 196.</span></span></code></pre></div>
<p>We also need to specify prior distributions for the latent cutpoints
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>c</mi><mtext mathvariant="normal">PASI75</mtext></msub><annotation encoding="application/x-tex">c_\textrm{PASI75}</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>c</mi><mtext mathvariant="normal">PASI90</mtext></msub><annotation encoding="application/x-tex">c_\textrm{PASI90}</annotation></semantics></math>
on the underlying scale - here the PASI standardised mean difference due
to the probit link (the cutpoint
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>c</mi><mtext mathvariant="normal">PASI50</mtext></msub><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">c_\textrm{PASI50}=0</annotation></semantics></math>).
To make these easier to reason about, we actually specify priors on the
<em>differences</em> between adjacent cutpoints,
e.g. <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>c</mi><mtext mathvariant="normal">PASI90</mtext></msub><mo>−</mo><msub><mi>c</mi><mtext mathvariant="normal">PASI75</mtext></msub></mrow><annotation encoding="application/x-tex">c_\textrm{PASI90} - c_\textrm{PASI75}</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>c</mi><mtext mathvariant="normal">PASI75</mtext></msub><mo>−</mo><msub><mi>c</mi><mtext mathvariant="normal">PASI50</mtext></msub></mrow><annotation encoding="application/x-tex">c_\textrm{PASI75} - c_\textrm{PASI50}</annotation></semantics></math>.
These can be given any positive-valued prior distribution, and Stan will
automatically impose the necessary ordering constraints behind the
scenes. We choose to give these implicit flat priors
<code><a href="../reference/priors.html">flat()</a></code>. </p>
<p>The model is fitted using the <code><a href="../reference/nma.html">nma()</a></code> function.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pso_fit_FE</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/nma.html">nma</a></span><span class="op">(</span><span class="va">pso_net</span>, </span>
<span>                  trt_effects <span class="op">=</span> <span class="st">"fixed"</span>,</span>
<span>                  link <span class="op">=</span> <span class="st">"probit"</span>,</span>
<span>                  prior_intercept <span class="op">=</span> <span class="fu"><a href="../reference/priors.html">normal</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">100</span><span class="op">)</span>,</span>
<span>                  prior_trt <span class="op">=</span> <span class="fu"><a href="../reference/priors.html">normal</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>,</span>
<span>                  prior_aux <span class="op">=</span> <span class="fu"><a href="../reference/priors.html">flat</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Note: Setting "Supportive care" as the network reference treatment.</span></span></code></pre></div>
<p>Basic parameter summaries are given by the <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code>
method:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pso_fit_FE</span></span>
<span><span class="co">#&gt; A fixed effects NMA with a ordered likelihood (probit link).</span></span>
<span><span class="co">#&gt; Inference for Stan model: ordered_multinomial.</span></span>
<span><span class="co">#&gt; 4 chains, each with iter=2000; warmup=1000; thin=1; </span></span>
<span><span class="co">#&gt; post-warmup draws per chain=1000, total post-warmup draws=4000.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;                         mean se_mean   sd     2.5%      25%      50%      75%    97.5% n_eff</span></span>
<span><span class="co">#&gt; d[Ciclosporin]          1.92    0.01 0.33     1.31     1.68     1.91     2.14     2.61  1525</span></span>
<span><span class="co">#&gt; d[Efalizumab]           1.19    0.00 0.06     1.07     1.15     1.19     1.23     1.30  1886</span></span>
<span><span class="co">#&gt; d[Etanercept 25 mg]     1.51    0.00 0.10     1.32     1.45     1.51     1.58     1.70  2002</span></span>
<span><span class="co">#&gt; d[Etanercept 50 mg]     1.92    0.00 0.10     1.72     1.85     1.92     1.99     2.11  2100</span></span>
<span><span class="co">#&gt; d[Fumaderm]             1.48    0.01 0.48     0.63     1.14     1.44     1.78     2.49  2793</span></span>
<span><span class="co">#&gt; d[Infliximab]           2.33    0.01 0.27     1.84     2.14     2.32     2.50     2.88  2568</span></span>
<span><span class="co">#&gt; d[Methotrexate]         1.62    0.01 0.44     0.77     1.33     1.61     1.91     2.49  1833</span></span>
<span><span class="co">#&gt; lp__                -3405.05    0.09 3.52 -3412.77 -3407.19 -3404.72 -3402.54 -3399.05  1610</span></span>
<span><span class="co">#&gt; cc[PASI50]              0.00     NaN 0.00     0.00     0.00     0.00     0.00     0.00   NaN</span></span>
<span><span class="co">#&gt; cc[PASI75]              0.76    0.00 0.03     0.70     0.74     0.76     0.78     0.82  5083</span></span>
<span><span class="co">#&gt; cc[PASI90]              1.56    0.00 0.05     1.46     1.53     1.56     1.60     1.67  5920</span></span>
<span><span class="co">#&gt;                     Rhat</span></span>
<span><span class="co">#&gt; d[Ciclosporin]         1</span></span>
<span><span class="co">#&gt; d[Efalizumab]          1</span></span>
<span><span class="co">#&gt; d[Etanercept 25 mg]    1</span></span>
<span><span class="co">#&gt; d[Etanercept 50 mg]    1</span></span>
<span><span class="co">#&gt; d[Fumaderm]            1</span></span>
<span><span class="co">#&gt; d[Infliximab]          1</span></span>
<span><span class="co">#&gt; d[Methotrexate]        1</span></span>
<span><span class="co">#&gt; lp__                   1</span></span>
<span><span class="co">#&gt; cc[PASI50]           NaN</span></span>
<span><span class="co">#&gt; cc[PASI75]             1</span></span>
<span><span class="co">#&gt; cc[PASI90]             1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Samples were drawn using NUTS(diag_e) at Thu Sep 19 22:15:37 2024.</span></span>
<span><span class="co">#&gt; For each parameter, n_eff is a crude measure of effective sample size,</span></span>
<span><span class="co">#&gt; and Rhat is the potential scale reduction factor on split chains (at </span></span>
<span><span class="co">#&gt; convergence, Rhat=1).</span></span></code></pre></div>
<blockquote>
<p><strong>Note:</strong> the treatment effects are the <em>opposite
sign</em> to those in TSD 2 <span class="citation">(<a href="#ref-TSD2">Dias et al. 2011</a>)</span>. This is because we
parameterise the linear predictor as
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>μ</mi><mi>j</mi></msub><mo>+</mo><msub><mi>d</mi><mi>k</mi></msub><mo>+</mo><msub><mi>c</mi><mi>m</mi></msub></mrow><annotation encoding="application/x-tex">\mu_j + d_k + c_m</annotation></semantics></math>,
rather than
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>μ</mi><mi>j</mi></msub><mo>+</mo><msub><mi>d</mi><mi>k</mi></msub><mo>−</mo><msub><mi>c</mi><mi>m</mi></msub></mrow><annotation encoding="application/x-tex">\mu_j + d_k - c_m</annotation></semantics></math>.
The interpretation here thus follows that of a standard binomial probit
(or logit) regression; SMDs (or log ORs) greater than zero mean that the
treatment increases the probability of an event compared to the
comparator (and less than zero mean a reduction in probability). Here
higher outcomes are positive, and all of the active treatments are
estimated to increase the response (i.e. a greater reduction) on the
PASI scale compared to the network reference (supportive care).</p>
</blockquote>
<p>By default, summaries of the study-specific intercepts
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>μ</mi><mi>j</mi></msub><annotation encoding="application/x-tex">\mu_j</annotation></semantics></math>
are hidden, but could be examined by changing the <code>pars</code>
argument:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Not run</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">pso_fit_FE</span>, pars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"d"</span>, <span class="st">"mu"</span>, <span class="st">"cc"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>The prior and posterior distributions can be compared visually using
the <code><a href="../reference/plot_prior_posterior.html">plot_prior_posterior()</a></code> function:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_prior_posterior.html">plot_prior_posterior</a></span><span class="op">(</span><span class="va">pso_fit_FE</span><span class="op">)</span></span></code></pre></div>
<p><img src="example_hta_psoriasis_files/figure-html/pso_FE_pp_plot-1.png" width="700" style="display: block; margin: auto;"></p>
<p>Focusing specifically on the cutpoints we see that these are highly
identified by the data, which is why the implicit flat priors work for
these parameters.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_prior_posterior.html">plot_prior_posterior</a></span><span class="op">(</span><span class="va">pso_fit_FE</span>, prior <span class="op">=</span> <span class="st">"aux"</span><span class="op">)</span></span></code></pre></div>
<p><img src="example_hta_psoriasis_files/figure-html/pso_FE_pp_cutpoint_plot-1.png" width="700" style="display: block; margin: auto;"></p>
</div>
<div class="section level3">
<h3 id="random-effects-meta-analysis">Random effects meta-analysis<a class="anchor" aria-label="anchor" href="#random-effects-meta-analysis"></a>
</h3>
<p>We now fit a random effects model using the <code><a href="../reference/nma.html">nma()</a></code>
function with <code>trt_effects = "random"</code>. Again, we use
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">N</mi><mrow><mo stretchy="true" form="prefix">(</mo><mn>0</mn><mo>,</mo><msup><mn>10</mn><mn>2</mn></msup><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\mathrm{N}(0, 10^2)</annotation></semantics></math>
prior distributions for the treatment effects
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>d</mi><mi>k</mi></msub><annotation encoding="application/x-tex">d_k</annotation></semantics></math>,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">N</mi><mrow><mo stretchy="true" form="prefix">(</mo><mn>0</mn><mo>,</mo><msup><mn>100</mn><mn>2</mn></msup><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\mathrm{N}(0, 100^2)</annotation></semantics></math>
prior distributions for the study-specific intercepts
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>μ</mi><mi>j</mi></msub><annotation encoding="application/x-tex">\mu_j</annotation></semantics></math>,
implicit flat prior distributions for the latent cutpoints, and we
additionally use a
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">half-N</mtext><mrow><mo stretchy="true" form="prefix">(</mo><msup><mn>2.5</mn><mn>2</mn></msup><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\textrm{half-N}(2.5^2)</annotation></semantics></math>
prior for the heterogeneity standard deviation
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>τ</mi><annotation encoding="application/x-tex">\tau</annotation></semantics></math>.
We can examine the range of parameter values implied by these prior
distributions with the <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> method:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="fu"><a href="../reference/priors.html">normal</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; A Normal prior distribution: location = 0, scale = 10.</span></span>
<span><span class="co">#&gt; 50% of the prior density lies between -6.74 and 6.74.</span></span>
<span><span class="co">#&gt; 95% of the prior density lies between -19.6 and 19.6.</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="fu"><a href="../reference/priors.html">normal</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">100</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; A Normal prior distribution: location = 0, scale = 100.</span></span>
<span><span class="co">#&gt; 50% of the prior density lies between -67.45 and 67.45.</span></span>
<span><span class="co">#&gt; 95% of the prior density lies between -196 and 196.</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="fu"><a href="../reference/priors.html">half_normal</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">2.5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; A half-Normal prior distribution: location = 0, scale = 2.5.</span></span>
<span><span class="co">#&gt; 50% of the prior density lies between 0 and 1.69.</span></span>
<span><span class="co">#&gt; 95% of the prior density lies between 0 and 4.9.</span></span></code></pre></div>
<p>Fitting the RE model</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pso_fit_RE</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/nma.html">nma</a></span><span class="op">(</span><span class="va">pso_net</span>, </span>
<span>                  trt_effects <span class="op">=</span> <span class="st">"random"</span>,</span>
<span>                  link <span class="op">=</span> <span class="st">"probit"</span>,</span>
<span>                  prior_intercept <span class="op">=</span> <span class="fu"><a href="../reference/priors.html">normal</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">100</span><span class="op">)</span>,</span>
<span>                  prior_trt <span class="op">=</span> <span class="fu"><a href="../reference/priors.html">normal</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>,</span>
<span>                  prior_aux <span class="op">=</span> <span class="fu"><a href="../reference/priors.html">flat</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>                  prior_het <span class="op">=</span> <span class="fu"><a href="../reference/priors.html">half_normal</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">2.5</span><span class="op">)</span>,</span>
<span>                  adapt_delta <span class="op">=</span> <span class="fl">0.99</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; Note: Setting "Supportive care" as the network reference treatment.</span></span></code></pre>
<p>Basic parameter summaries are given by the <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code>
method:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pso_fit_RE</span></span>
<span><span class="co">#&gt; A random effects NMA with a ordered likelihood (probit link).</span></span>
<span><span class="co">#&gt; Inference for Stan model: ordered_multinomial.</span></span>
<span><span class="co">#&gt; 4 chains, each with iter=5000; warmup=2500; thin=1; </span></span>
<span><span class="co">#&gt; post-warmup draws per chain=2500, total post-warmup draws=10000.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;                         mean se_mean   sd     2.5%      25%      50%      75%    97.5% n_eff</span></span>
<span><span class="co">#&gt; d[Ciclosporin]          2.02    0.01 0.42     1.30     1.73     1.99     2.27     2.95  3445</span></span>
<span><span class="co">#&gt; d[Efalizumab]           1.18    0.00 0.18     0.82     1.10     1.19     1.27     1.55  4612</span></span>
<span><span class="co">#&gt; d[Etanercept 25 mg]     1.53    0.00 0.25     1.02     1.40     1.52     1.65     2.05  4159</span></span>
<span><span class="co">#&gt; d[Etanercept 50 mg]     1.93    0.00 0.27     1.35     1.80     1.93     2.06     2.51  4818</span></span>
<span><span class="co">#&gt; d[Fumaderm]             1.48    0.01 0.63     0.27     1.08     1.45     1.88     2.77  7699</span></span>
<span><span class="co">#&gt; d[Infliximab]           2.31    0.00 0.38     1.55     2.08     2.31     2.55     3.07  8199</span></span>
<span><span class="co">#&gt; d[Methotrexate]         1.70    0.01 0.62     0.54     1.30     1.67     2.07     3.00  4511</span></span>
<span><span class="co">#&gt; lp__                -3410.46    0.18 6.82 -3424.39 -3414.96 -3410.32 -3405.69 -3397.77  1372</span></span>
<span><span class="co">#&gt; tau                     0.31    0.01 0.22     0.02     0.15     0.27     0.43     0.85   947</span></span>
<span><span class="co">#&gt; cc[PASI50]              0.00     NaN 0.00     0.00     0.00     0.00     0.00     0.00   NaN</span></span>
<span><span class="co">#&gt; cc[PASI75]              0.76    0.00 0.03     0.70     0.73     0.76     0.78     0.82 14642</span></span>
<span><span class="co">#&gt; cc[PASI90]              1.56    0.00 0.05     1.46     1.53     1.56     1.60     1.66 16421</span></span>
<span><span class="co">#&gt;                     Rhat</span></span>
<span><span class="co">#&gt; d[Ciclosporin]      1.00</span></span>
<span><span class="co">#&gt; d[Efalizumab]       1.00</span></span>
<span><span class="co">#&gt; d[Etanercept 25 mg] 1.00</span></span>
<span><span class="co">#&gt; d[Etanercept 50 mg] 1.00</span></span>
<span><span class="co">#&gt; d[Fumaderm]         1.00</span></span>
<span><span class="co">#&gt; d[Infliximab]       1.00</span></span>
<span><span class="co">#&gt; d[Methotrexate]     1.00</span></span>
<span><span class="co">#&gt; lp__                1.00</span></span>
<span><span class="co">#&gt; tau                 1.01</span></span>
<span><span class="co">#&gt; cc[PASI50]           NaN</span></span>
<span><span class="co">#&gt; cc[PASI75]          1.00</span></span>
<span><span class="co">#&gt; cc[PASI90]          1.00</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Samples were drawn using NUTS(diag_e) at Thu Sep 19 22:16:25 2024.</span></span>
<span><span class="co">#&gt; For each parameter, n_eff is a crude measure of effective sample size,</span></span>
<span><span class="co">#&gt; and Rhat is the potential scale reduction factor on split chains (at </span></span>
<span><span class="co">#&gt; convergence, Rhat=1).</span></span></code></pre></div>
<p>By default, summaries of the study-specific intercepts
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>μ</mi><mi>j</mi></msub><annotation encoding="application/x-tex">\mu_j</annotation></semantics></math>
and study-specific relative effects
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>δ</mi><mrow><mi>j</mi><mi>k</mi></mrow></msub><annotation encoding="application/x-tex">\delta_{jk}</annotation></semantics></math>
are hidden, but could be examined by changing the <code>pars</code>
argument:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Not run</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">pso_fit_RE</span>, pars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"d"</span>, <span class="st">"cc"</span>, <span class="st">"mu"</span>, <span class="st">"delta"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>The prior and posterior distributions can be compared visually using
the <code><a href="../reference/plot_prior_posterior.html">plot_prior_posterior()</a></code> function:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_prior_posterior.html">plot_prior_posterior</a></span><span class="op">(</span><span class="va">pso_fit_RE</span>, prior <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"trt"</span>, <span class="st">"aux"</span>, <span class="st">"het"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="example_hta_psoriasis_files/figure-html/pso_RE_pp_plot-1.png" width="700" style="display: block; margin: auto;"></p>
</div>
<div class="section level3">
<h3 id="model-comparison">Model comparison<a class="anchor" aria-label="anchor" href="#model-comparison"></a>
</h3>
<p>Model fit can be checked using the <code><a href="../reference/dic.html">dic()</a></code> function:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">dic_FE</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dic.html">dic</a></span><span class="op">(</span><span class="va">pso_fit_FE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Residual deviance: 74.7<span style="color: #555555;"> (on 58 data points)</span></span></span>
<span><span class="co">#&gt;                pD: 25.2</span></span>
<span><span class="co">#&gt;               DIC: 100</span></span></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">dic_RE</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dic.html">dic</a></span><span class="op">(</span><span class="va">pso_fit_RE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Residual deviance: 62.6<span style="color: #555555;"> (on 58 data points)</span></span></span>
<span><span class="co">#&gt;                pD: 33.3</span></span>
<span><span class="co">#&gt;               DIC: 95.9</span></span></code></pre></div>
<p>The random effects model has a lower DIC and the residual deviance is
closer to the number of data points, so is preferred in this case.</p>
<p>We can also examine the residual deviance contributions with the
corresponding <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> method.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">dic_FE</span><span class="op">)</span></span></code></pre></div>
<p><img src="example_hta_psoriasis_files/figure-html/pso_FE_resdev_plot-1.png" width="700" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">dic_RE</span><span class="op">)</span></span></code></pre></div>
<p><img src="example_hta_psoriasis_files/figure-html/pso_RE_resdev_plot-1.png" width="700" style="display: block; margin: auto;"></p>
<p>Most data points are fit well, with posterior mean residual deviances
close to the degrees of freedom. The Meffert 1997 study has a
substantially higher residual deviance contribution, which could be
investigated further to see why this study appears to be an outlier.</p>
</div>
</div>
<div class="section level2">
<h2 id="further-results">Further results<a class="anchor" aria-label="anchor" href="#further-results"></a>
</h2>
<div class="section level3">
<h3 id="predicted-probabilities-of-response">Predicted probabilities of response<a class="anchor" aria-label="anchor" href="#predicted-probabilities-of-response"></a>
</h3>
<p><span class="citation">Dias et al. (<a href="#ref-TSD2">2011</a>)</span> produce absolute predictions of
probability of achieving responses at each PASI cutoff, assuming a
Normal distribution for the baseline probit probability of PASI50
response on supportive care with mean
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mn>1.097</mn></mrow><annotation encoding="application/x-tex">-1.097</annotation></semantics></math>
and precision
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>123</mn><annotation encoding="application/x-tex">123</annotation></semantics></math>.
We can replicate these results using the <code><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict()</a></code> method.
The <code>baseline</code> argument takes a <code><a href="../reference/distr.html">distr()</a></code>
distribution object, with which we specify the corresponding Normal
distribution. We set <code>type = "response"</code> to produce predicted
probabilities (<code>type = "link"</code> would produce predicted probit
probabilities).</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pred_FE</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">pso_fit_FE</span>, </span>
<span>                   baseline <span class="op">=</span> <span class="fu"><a href="../reference/distr.html">distr</a></span><span class="op">(</span><span class="va">qnorm</span>, mean <span class="op">=</span> <span class="op">-</span><span class="fl">1.097</span>, sd <span class="op">=</span> <span class="fl">123</span><span class="op">^</span><span class="op">-</span><span class="fl">0.5</span><span class="op">)</span>, </span>
<span>                   type <span class="op">=</span> <span class="st">"response"</span><span class="op">)</span></span>
<span><span class="va">pred_FE</span></span>
<span><span class="co">#&gt;                                mean   sd 2.5%  25%  50%  75% 97.5% Bulk_ESS Tail_ESS Rhat</span></span>
<span><span class="co">#&gt; pred[Supportive care, PASI50]  0.14 0.02 0.10 0.12 0.14 0.15  0.18     3631     3432    1</span></span>
<span><span class="co">#&gt; pred[Supportive care, PASI75]  0.03 0.01 0.02 0.03 0.03 0.04  0.05     3724     3434    1</span></span>
<span><span class="co">#&gt; pred[Supportive care, PASI90]  0.00 0.00 0.00 0.00 0.00 0.00  0.01     4040     3841    1</span></span>
<span><span class="co">#&gt; pred[Ciclosporin, PASI50]      0.78 0.10 0.57 0.72 0.79 0.85  0.94     1633     2194    1</span></span>
<span><span class="co">#&gt; pred[Ciclosporin, PASI75]      0.52 0.13 0.28 0.43 0.52 0.61  0.78     1616     2120    1</span></span>
<span><span class="co">#&gt; pred[Ciclosporin, PASI90]      0.24 0.11 0.08 0.16 0.23 0.30  0.49     1646     2169    1</span></span>
<span><span class="co">#&gt; pred[Efalizumab, PASI50]       0.54 0.04 0.45 0.51 0.54 0.57  0.62     2866     3591    1</span></span>
<span><span class="co">#&gt; pred[Efalizumab, PASI75]       0.25 0.03 0.19 0.23 0.25 0.28  0.33     2948     3178    1</span></span>
<span><span class="co">#&gt; pred[Efalizumab, PASI90]       0.07 0.02 0.05 0.06 0.07 0.08  0.11     3189     3694    1</span></span>
<span><span class="co">#&gt; pred[Etanercept 25 mg, PASI50] 0.66 0.05 0.56 0.63 0.66 0.69  0.75     2515     3271    1</span></span>
<span><span class="co">#&gt; pred[Etanercept 25 mg, PASI75] 0.37 0.05 0.27 0.33 0.37 0.40  0.47     2600     3535    1</span></span>
<span><span class="co">#&gt; pred[Etanercept 25 mg, PASI90] 0.13 0.03 0.08 0.11 0.12 0.14  0.19     2802     3523    1</span></span>
<span><span class="co">#&gt; pred[Etanercept 50 mg, PASI50] 0.79 0.04 0.71 0.77 0.79 0.82  0.86     2596     3315    1</span></span>
<span><span class="co">#&gt; pred[Etanercept 50 mg, PASI75] 0.53 0.05 0.42 0.49 0.53 0.56  0.63     2689     3381    1</span></span>
<span><span class="co">#&gt; pred[Etanercept 50 mg, PASI90] 0.23 0.04 0.16 0.20 0.23 0.26  0.32     2813     3509    1</span></span>
<span><span class="co">#&gt; pred[Fumaderm, PASI50]         0.63 0.16 0.32 0.51 0.63 0.76  0.92     3142     2210    1</span></span>
<span><span class="co">#&gt; pred[Fumaderm, PASI75]         0.37 0.17 0.11 0.23 0.34 0.47  0.75     3086     2160    1</span></span>
<span><span class="co">#&gt; pred[Fumaderm, PASI90]         0.14 0.11 0.02 0.06 0.11 0.19  0.44     3055     2146    1</span></span>
<span><span class="co">#&gt; pred[Infliximab, PASI50]       0.88 0.05 0.76 0.85 0.89 0.92  0.97     2858     2694    1</span></span>
<span><span class="co">#&gt; pred[Infliximab, PASI75]       0.68 0.10 0.47 0.61 0.68 0.74  0.86     2832     2656    1</span></span>
<span><span class="co">#&gt; pred[Infliximab, PASI90]       0.37 0.10 0.19 0.30 0.37 0.44  0.60     2893     2673    1</span></span>
<span><span class="co">#&gt; pred[Methotrexate, PASI50]     0.68 0.14 0.37 0.59 0.70 0.79  0.92     1917     2382    1</span></span>
<span><span class="co">#&gt; pred[Methotrexate, PASI75]     0.42 0.16 0.14 0.30 0.41 0.52  0.74     1893     2389    1</span></span>
<span><span class="co">#&gt; pred[Methotrexate, PASI90]     0.17 0.11 0.03 0.09 0.15 0.23  0.43     1923     2344    1</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">pred_FE</span><span class="op">)</span></span></code></pre></div>
<p><img src="example_hta_psoriasis_files/figure-html/pso_pred_FE-1.png" width="700" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pred_RE</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">pso_fit_RE</span>, </span>
<span>                   baseline <span class="op">=</span> <span class="fu"><a href="../reference/distr.html">distr</a></span><span class="op">(</span><span class="va">qnorm</span>, mean <span class="op">=</span> <span class="op">-</span><span class="fl">1.097</span>, sd <span class="op">=</span> <span class="fl">123</span><span class="op">^</span><span class="op">-</span><span class="fl">0.5</span><span class="op">)</span>, </span>
<span>                   type <span class="op">=</span> <span class="st">"response"</span><span class="op">)</span></span>
<span><span class="va">pred_RE</span></span>
<span><span class="co">#&gt;                                mean   sd 2.5%  25%  50%  75% 97.5% Bulk_ESS Tail_ESS Rhat</span></span>
<span><span class="co">#&gt; pred[Supportive care, PASI50]  0.14 0.02 0.10 0.12 0.14 0.15  0.18     9886     9993    1</span></span>
<span><span class="co">#&gt; pred[Supportive care, PASI75]  0.03 0.01 0.02 0.03 0.03 0.04  0.05    10214     9804    1</span></span>
<span><span class="co">#&gt; pred[Supportive care, PASI90]  0.00 0.00 0.00 0.00 0.00 0.00  0.01    11067     9195    1</span></span>
<span><span class="co">#&gt; pred[Ciclosporin, PASI50]      0.80 0.11 0.57 0.74 0.81 0.88  0.97     3818     3904    1</span></span>
<span><span class="co">#&gt; pred[Ciclosporin, PASI75]      0.56 0.15 0.28 0.45 0.55 0.67  0.87     3797     3762    1</span></span>
<span><span class="co">#&gt; pred[Ciclosporin, PASI90]      0.28 0.14 0.08 0.17 0.25 0.35  0.62     3867     3836    1</span></span>
<span><span class="co">#&gt; pred[Efalizumab, PASI50]       0.53 0.08 0.37 0.49 0.53 0.58  0.69     5724     4943    1</span></span>
<span><span class="co">#&gt; pred[Efalizumab, PASI75]       0.26 0.06 0.14 0.22 0.25 0.29  0.40     5807     4872    1</span></span>
<span><span class="co">#&gt; pred[Efalizumab, PASI90]       0.07 0.03 0.03 0.06 0.07 0.09  0.14     5982     5094    1</span></span>
<span><span class="co">#&gt; pred[Etanercept 25 mg, PASI50] 0.66 0.09 0.46 0.61 0.66 0.72  0.84     5290     3843    1</span></span>
<span><span class="co">#&gt; pred[Etanercept 25 mg, PASI75] 0.38 0.10 0.20 0.32 0.37 0.43  0.59     5313     3915    1</span></span>
<span><span class="co">#&gt; pred[Etanercept 25 mg, PASI90] 0.14 0.06 0.05 0.10 0.13 0.16  0.28     5338     4164    1</span></span>
<span><span class="co">#&gt; pred[Etanercept 50 mg, PASI50] 0.79 0.08 0.59 0.75 0.80 0.84  0.92     5769     3818    1</span></span>
<span><span class="co">#&gt; pred[Etanercept 50 mg, PASI75] 0.53 0.11 0.30 0.47 0.53 0.59  0.75     5785     3895    1</span></span>
<span><span class="co">#&gt; pred[Etanercept 50 mg, PASI90] 0.24 0.09 0.09 0.19 0.23 0.28  0.45     5726     3792    1</span></span>
<span><span class="co">#&gt; pred[Fumaderm, PASI50]         0.63 0.20 0.20 0.49 0.64 0.78  0.96     7901     5277    1</span></span>
<span><span class="co">#&gt; pred[Fumaderm, PASI75]         0.37 0.20 0.05 0.22 0.34 0.51  0.83     7915     5162    1</span></span>
<span><span class="co">#&gt; pred[Fumaderm, PASI90]         0.16 0.15 0.01 0.06 0.11 0.22  0.56     7948     4788    1</span></span>
<span><span class="co">#&gt; pred[Infliximab, PASI50]       0.87 0.08 0.67 0.83 0.89 0.93  0.98     8322     5613    1</span></span>
<span><span class="co">#&gt; pred[Infliximab, PASI75]       0.67 0.13 0.37 0.58 0.67 0.76  0.89     8319     5479    1</span></span>
<span><span class="co">#&gt; pred[Infliximab, PASI90]       0.37 0.14 0.13 0.28 0.36 0.46  0.66     8370     5474    1</span></span>
<span><span class="co">#&gt; pred[Methotrexate, PASI50]     0.69 0.18 0.28 0.58 0.72 0.83  0.97     4706     4457    1</span></span>
<span><span class="co">#&gt; pred[Methotrexate, PASI75]     0.44 0.21 0.09 0.29 0.42 0.59  0.88     4700     4651    1</span></span>
<span><span class="co">#&gt; pred[Methotrexate, PASI90]     0.20 0.16 0.02 0.09 0.16 0.28  0.65     4746     4506    1</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">pred_RE</span><span class="op">)</span></span></code></pre></div>
<p><img src="example_hta_psoriasis_files/figure-html/pso_pred_RE-1.png" width="700" style="display: block; margin: auto;"></p>
<p>If instead of information on the baseline PASI 50 response probit
probability we have PASI 50 event counts, we can use these to construct
a Beta distribution for the baseline probability of PASI 50 response.
For example, if 56 out of 408 individuals achieved PASI 50 response on
supportive care in the target population of interest, the appropriate
Beta distribution for the response probability would be
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">Beta</mtext><mrow><mo stretchy="true" form="prefix">(</mo><mn>56</mn><mo>,</mo><mn>408</mn><mo>−</mo><mn>56</mn><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\textrm{Beta}(56, 408-56)</annotation></semantics></math>.
We can specify this Beta distribution for the baseline response using
the <code>baseline_type = "reponse"</code> argument (the default is
<code>"link"</code>, used above for the baseline probit
probability).</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pred_FE_beta</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">pso_fit_FE</span>, </span>
<span>                        baseline <span class="op">=</span> <span class="fu"><a href="../reference/distr.html">distr</a></span><span class="op">(</span><span class="va">qbeta</span>, <span class="fl">56</span>, <span class="fl">408</span><span class="op">-</span><span class="fl">56</span><span class="op">)</span>,</span>
<span>                        baseline_type <span class="op">=</span> <span class="st">"response"</span>,</span>
<span>                        type <span class="op">=</span> <span class="st">"response"</span><span class="op">)</span></span>
<span><span class="va">pred_FE_beta</span></span>
<span><span class="co">#&gt;                                mean   sd 2.5%  25%  50%  75% 97.5% Bulk_ESS Tail_ESS Rhat</span></span>
<span><span class="co">#&gt; pred[Supportive care, PASI50]  0.14 0.02 0.10 0.12 0.14 0.15  0.17     3940     4002    1</span></span>
<span><span class="co">#&gt; pred[Supportive care, PASI75]  0.03 0.01 0.02 0.03 0.03 0.04  0.05     4026     3931    1</span></span>
<span><span class="co">#&gt; pred[Supportive care, PASI90]  0.00 0.00 0.00 0.00 0.00 0.00  0.01     4614     4140    1</span></span>
<span><span class="co">#&gt; pred[Ciclosporin, PASI50]      0.78 0.09 0.58 0.72 0.79 0.85  0.94     1659     2017    1</span></span>
<span><span class="co">#&gt; pred[Ciclosporin, PASI75]      0.52 0.13 0.29 0.43 0.52 0.61  0.78     1636     1987    1</span></span>
<span><span class="co">#&gt; pred[Ciclosporin, PASI90]      0.24 0.11 0.08 0.16 0.23 0.30  0.49     1669     2093    1</span></span>
<span><span class="co">#&gt; pred[Efalizumab, PASI50]       0.54 0.04 0.46 0.51 0.54 0.56  0.61     3238     3759    1</span></span>
<span><span class="co">#&gt; pred[Efalizumab, PASI75]       0.25 0.03 0.19 0.23 0.25 0.28  0.32     3276     3480    1</span></span>
<span><span class="co">#&gt; pred[Efalizumab, PASI90]       0.07 0.02 0.05 0.06 0.07 0.08  0.10     3624     3838    1</span></span>
<span><span class="co">#&gt; pred[Etanercept 25 mg, PASI50] 0.66 0.05 0.56 0.63 0.66 0.69  0.74     2528     3368    1</span></span>
<span><span class="co">#&gt; pred[Etanercept 25 mg, PASI75] 0.37 0.05 0.28 0.34 0.37 0.40  0.46     2682     3458    1</span></span>
<span><span class="co">#&gt; pred[Etanercept 25 mg, PASI90] 0.13 0.03 0.08 0.11 0.13 0.14  0.19     3045     3396    1</span></span>
<span><span class="co">#&gt; pred[Etanercept 50 mg, PASI50] 0.79 0.04 0.71 0.77 0.79 0.82  0.86     2616     3614    1</span></span>
<span><span class="co">#&gt; pred[Etanercept 50 mg, PASI75] 0.53 0.05 0.42 0.49 0.53 0.56  0.62     2735     3551    1</span></span>
<span><span class="co">#&gt; pred[Etanercept 50 mg, PASI90] 0.23 0.04 0.16 0.20 0.23 0.26  0.32     2852     3278    1</span></span>
<span><span class="co">#&gt; pred[Fumaderm, PASI50]         0.63 0.16 0.32 0.51 0.63 0.75  0.92     3227     2153    1</span></span>
<span><span class="co">#&gt; pred[Fumaderm, PASI75]         0.36 0.17 0.11 0.23 0.34 0.47  0.75     3191     2153    1</span></span>
<span><span class="co">#&gt; pred[Fumaderm, PASI90]         0.14 0.11 0.02 0.06 0.11 0.19  0.44     3162     2112    1</span></span>
<span><span class="co">#&gt; pred[Infliximab, PASI50]       0.88 0.05 0.76 0.85 0.89 0.92  0.96     2662     2669    1</span></span>
<span><span class="co">#&gt; pred[Infliximab, PASI75]       0.68 0.10 0.48 0.61 0.68 0.74  0.85     2649     2702    1</span></span>
<span><span class="co">#&gt; pred[Infliximab, PASI90]       0.37 0.10 0.19 0.30 0.37 0.44  0.59     2721     2621    1</span></span>
<span><span class="co">#&gt; pred[Methotrexate, PASI50]     0.68 0.14 0.37 0.59 0.70 0.79  0.92     1918     2206    1</span></span>
<span><span class="co">#&gt; pred[Methotrexate, PASI75]     0.42 0.16 0.13 0.30 0.41 0.52  0.74     1896     2275    1</span></span>
<span><span class="co">#&gt; pred[Methotrexate, PASI90]     0.17 0.11 0.03 0.09 0.15 0.23  0.43     1924     2318    1</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">pred_FE_beta</span><span class="op">)</span></span></code></pre></div>
<p><img src="example_hta_psoriasis_files/figure-html/pso_pred_FE_beta-1.png" width="700" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pred_RE_beta</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">pso_fit_RE</span>, </span>
<span>                        baseline <span class="op">=</span> <span class="fu"><a href="../reference/distr.html">distr</a></span><span class="op">(</span><span class="va">qbeta</span>, <span class="fl">56</span>, <span class="fl">408</span><span class="op">-</span><span class="fl">56</span><span class="op">)</span>,</span>
<span>                        baseline_type <span class="op">=</span> <span class="st">"response"</span>,</span>
<span>                        type <span class="op">=</span> <span class="st">"response"</span><span class="op">)</span></span>
<span><span class="va">pred_RE_beta</span></span>
<span><span class="co">#&gt;                                mean   sd 2.5%  25%  50%  75% 97.5% Bulk_ESS Tail_ESS Rhat</span></span>
<span><span class="co">#&gt; pred[Supportive care, PASI50]  0.14 0.02 0.11 0.13 0.14 0.15  0.17     9843     9606    1</span></span>
<span><span class="co">#&gt; pred[Supportive care, PASI75]  0.03 0.01 0.02 0.03 0.03 0.04  0.05    10312    10142    1</span></span>
<span><span class="co">#&gt; pred[Supportive care, PASI90]  0.00 0.00 0.00 0.00 0.00 0.00  0.01    11248     9733    1</span></span>
<span><span class="co">#&gt; pred[Ciclosporin, PASI50]      0.80 0.11 0.57 0.74 0.81 0.88  0.97     3949     3809    1</span></span>
<span><span class="co">#&gt; pred[Ciclosporin, PASI75]      0.56 0.15 0.28 0.45 0.55 0.66  0.87     3930     3807    1</span></span>
<span><span class="co">#&gt; pred[Ciclosporin, PASI90]      0.28 0.14 0.08 0.18 0.25 0.35  0.62     3994     3711    1</span></span>
<span><span class="co">#&gt; pred[Efalizumab, PASI50]       0.53 0.07 0.38 0.49 0.54 0.58  0.68     5268     4467    1</span></span>
<span><span class="co">#&gt; pred[Efalizumab, PASI75]       0.26 0.06 0.14 0.22 0.25 0.29  0.39     5309     4845    1</span></span>
<span><span class="co">#&gt; pred[Efalizumab, PASI90]       0.07 0.03 0.03 0.06 0.07 0.09  0.14     5412     4570    1</span></span>
<span><span class="co">#&gt; pred[Etanercept 25 mg, PASI50] 0.66 0.09 0.47 0.61 0.66 0.71  0.83     4862     4111    1</span></span>
<span><span class="co">#&gt; pred[Etanercept 25 mg, PASI75] 0.38 0.09 0.20 0.32 0.37 0.43  0.58     4872     3898    1</span></span>
<span><span class="co">#&gt; pred[Etanercept 25 mg, PASI90] 0.14 0.06 0.05 0.10 0.13 0.16  0.28     4890     4331    1</span></span>
<span><span class="co">#&gt; pred[Etanercept 50 mg, PASI50] 0.79 0.08 0.60 0.75 0.80 0.84  0.92     5452     3614    1</span></span>
<span><span class="co">#&gt; pred[Etanercept 50 mg, PASI75] 0.53 0.11 0.30 0.47 0.53 0.59  0.75     5441     3711    1</span></span>
<span><span class="co">#&gt; pred[Etanercept 50 mg, PASI90] 0.24 0.08 0.09 0.19 0.23 0.28  0.45     5403     3761    1</span></span>
<span><span class="co">#&gt; pred[Fumaderm, PASI50]         0.63 0.20 0.20 0.49 0.64 0.78  0.95     7940     5012    1</span></span>
<span><span class="co">#&gt; pred[Fumaderm, PASI75]         0.37 0.20 0.06 0.22 0.34 0.51  0.82     7954     5047    1</span></span>
<span><span class="co">#&gt; pred[Fumaderm, PASI90]         0.16 0.14 0.01 0.06 0.11 0.22  0.55     7995     4970    1</span></span>
<span><span class="co">#&gt; pred[Infliximab, PASI50]       0.87 0.08 0.67 0.83 0.89 0.93  0.98     8400     5360    1</span></span>
<span><span class="co">#&gt; pred[Infliximab, PASI75]       0.67 0.13 0.37 0.59 0.68 0.76  0.89     8396     5573    1</span></span>
<span><span class="co">#&gt; pred[Infliximab, PASI90]       0.37 0.14 0.13 0.28 0.36 0.46  0.66     8454     5928    1</span></span>
<span><span class="co">#&gt; pred[Methotrexate, PASI50]     0.69 0.18 0.29 0.58 0.72 0.84  0.97     4852     4451    1</span></span>
<span><span class="co">#&gt; pred[Methotrexate, PASI75]     0.44 0.21 0.09 0.29 0.43 0.59  0.88     4847     4407    1</span></span>
<span><span class="co">#&gt; pred[Methotrexate, PASI90]     0.20 0.16 0.02 0.09 0.16 0.28  0.64     4893     4362    1</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">pred_RE_beta</span><span class="op">)</span></span></code></pre></div>
<p><img src="example_hta_psoriasis_files/figure-html/pso_pred_RE_beta-1.png" width="700" style="display: block; margin: auto;">
(Notice that these results are equivalent to those calculated above
using the Normal distribution for the baseline probit probability, since
these event counts correspond to the same probit probability.)</p>
<p>We can modify the plots using standard <code>ggplot2</code>
functions. For example, to plot the cutpoints together with a colour
coding (instead of split into facets):</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">pred_RE</span>, position <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_dodge.html" class="external-link">position_dodge</a></span><span class="op">(</span>width <span class="op">=</span> <span class="fl">0.75</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_null.html" class="external-link">facet_null</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>colour <span class="op">=</span> <span class="va">Category</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html" class="external-link">scale_colour_brewer</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"Blues"</span><span class="op">)</span></span></code></pre></div>
<p><img src="example_hta_psoriasis_files/figure-html/pso_pred_RE_colour-1.png" width="700" style="display: block; margin: auto;"></p>
<p>If the <code>baseline</code> argument is omitted, predicted
probabilities will be produced for every study in the network based on
their estimated baseline probit probability
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>μ</mi><mi>j</mi></msub><annotation encoding="application/x-tex">\mu_j</annotation></semantics></math>.</p>
</div>
<div class="section level3">
<h3 id="ranks-and-rank-probabilities">Ranks and rank probabilities<a class="anchor" aria-label="anchor" href="#ranks-and-rank-probabilities"></a>
</h3>
<p>Treatment rankings, rank probabilities, and cumulative rank
probabilities can also be produced. We set
<code>lower_better = FALSE</code> since higher outcome categories are
better (the outcomes are positive).</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">pso_ranks</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/posterior_ranks.html">posterior_ranks</a></span><span class="op">(</span><span class="va">pso_fit_RE</span>, lower_better <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;                        mean   sd 2.5% 25% 50% 75% 97.5% Bulk_ESS Tail_ESS Rhat</span></span>
<span><span class="co">#&gt; rank[Supportive care]  7.99 0.12    8   8   8   8     8     5133       NA    1</span></span>
<span><span class="co">#&gt; rank[Ciclosporin]      2.76 1.26    1   2   3   4     5     6535     6914    1</span></span>
<span><span class="co">#&gt; rank[Efalizumab]       6.35 0.80    4   6   7   7     7     5853       NA    1</span></span>
<span><span class="co">#&gt; rank[Etanercept 25 mg] 4.91 1.08    3   4   5   6     7     6411     4916    1</span></span>
<span><span class="co">#&gt; rank[Etanercept 50 mg] 3.03 1.20    1   2   3   4     5     5547     5831    1</span></span>
<span><span class="co">#&gt; rank[Fumaderm]         4.90 1.96    1   3   5   7     7     7797     5347    1</span></span>
<span><span class="co">#&gt; rank[Infliximab]       1.80 1.18    1   1   1   2     5     4057     4624    1</span></span>
<span><span class="co">#&gt; rank[Methotrexate]     4.26 1.87    1   3   4   6     7     5791     6025    1</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">pso_ranks</span><span class="op">)</span></span></code></pre></div>
<p><img src="example_hta_psoriasis_files/figure-html/hta_psoriasis_ranks-1.png" width="700" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">pso_rankprobs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/posterior_ranks.html">posterior_rank_probs</a></span><span class="op">(</span><span class="va">pso_fit_RE</span>, lower_better <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;                     p_rank[1] p_rank[2] p_rank[3] p_rank[4] p_rank[5] p_rank[6] p_rank[7]</span></span>
<span><span class="co">#&gt; d[Supportive care]       0.00      0.00      0.00      0.00      0.00      0.00      0.01</span></span>
<span><span class="co">#&gt; d[Ciclosporin]           0.17      0.29      0.27      0.17      0.08      0.02      0.00</span></span>
<span><span class="co">#&gt; d[Efalizumab]            0.00      0.00      0.00      0.02      0.10      0.36      0.51</span></span>
<span><span class="co">#&gt; d[Etanercept 25 mg]      0.00      0.01      0.08      0.21      0.38      0.26      0.04</span></span>
<span><span class="co">#&gt; d[Etanercept 50 mg]      0.08      0.30      0.27      0.24      0.09      0.02      0.00</span></span>
<span><span class="co">#&gt; d[Fumaderm]              0.07      0.09      0.10      0.11      0.16      0.19      0.27</span></span>
<span><span class="co">#&gt; d[Infliximab]            0.58      0.19      0.13      0.06      0.03      0.01      0.00</span></span>
<span><span class="co">#&gt; d[Methotrexate]          0.09      0.12      0.14      0.18      0.17      0.14      0.15</span></span>
<span><span class="co">#&gt;                     p_rank[8]</span></span>
<span><span class="co">#&gt; d[Supportive care]       0.99</span></span>
<span><span class="co">#&gt; d[Ciclosporin]           0.00</span></span>
<span><span class="co">#&gt; d[Efalizumab]            0.00</span></span>
<span><span class="co">#&gt; d[Etanercept 25 mg]      0.00</span></span>
<span><span class="co">#&gt; d[Etanercept 50 mg]      0.00</span></span>
<span><span class="co">#&gt; d[Fumaderm]              0.01</span></span>
<span><span class="co">#&gt; d[Infliximab]            0.00</span></span>
<span><span class="co">#&gt; d[Methotrexate]          0.00</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">pso_rankprobs</span><span class="op">)</span></span></code></pre></div>
<p><img src="example_hta_psoriasis_files/figure-html/hta_psoriasis_rankprobs-1.png" width="700" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">pso_cumrankprobs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/posterior_ranks.html">posterior_rank_probs</a></span><span class="op">(</span><span class="va">pso_fit_RE</span>, lower_better <span class="op">=</span> <span class="cn">FALSE</span>, cumulative <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;                     p_rank[1] p_rank[2] p_rank[3] p_rank[4] p_rank[5] p_rank[6] p_rank[7]</span></span>
<span><span class="co">#&gt; d[Supportive care]       0.00      0.00      0.00      0.00      0.00      0.00      0.01</span></span>
<span><span class="co">#&gt; d[Ciclosporin]           0.17      0.46      0.73      0.90      0.98      1.00      1.00</span></span>
<span><span class="co">#&gt; d[Efalizumab]            0.00      0.00      0.01      0.03      0.13      0.49      1.00</span></span>
<span><span class="co">#&gt; d[Etanercept 25 mg]      0.00      0.02      0.10      0.32      0.69      0.95      1.00</span></span>
<span><span class="co">#&gt; d[Etanercept 50 mg]      0.08      0.38      0.65      0.89      0.98      1.00      1.00</span></span>
<span><span class="co">#&gt; d[Fumaderm]              0.07      0.16      0.26      0.37      0.53      0.71      0.99</span></span>
<span><span class="co">#&gt; d[Infliximab]            0.58      0.77      0.90      0.96      0.99      1.00      1.00</span></span>
<span><span class="co">#&gt; d[Methotrexate]          0.09      0.21      0.35      0.53      0.71      0.85      1.00</span></span>
<span><span class="co">#&gt;                     p_rank[8]</span></span>
<span><span class="co">#&gt; d[Supportive care]          1</span></span>
<span><span class="co">#&gt; d[Ciclosporin]              1</span></span>
<span><span class="co">#&gt; d[Efalizumab]               1</span></span>
<span><span class="co">#&gt; d[Etanercept 25 mg]         1</span></span>
<span><span class="co">#&gt; d[Etanercept 50 mg]         1</span></span>
<span><span class="co">#&gt; d[Fumaderm]                 1</span></span>
<span><span class="co">#&gt; d[Infliximab]               1</span></span>
<span><span class="co">#&gt; d[Methotrexate]             1</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">pso_cumrankprobs</span><span class="op">)</span></span></code></pre></div>
<p><img src="example_hta_psoriasis_files/figure-html/hta_psoriasis_cumrankprobs-1.png" width="700" style="display: block; margin: auto;"></p>
</div>
</div>
<div class="section level2 unnumbered">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-TSD2" class="csl-entry">
Dias, S., N. J. Welton, A. J. Sutton, and A. E. Ades. 2011.
<span>“<span>NICE DSU Technical Support Document</span> 2: A Generalised
Linear Modelling Framework for Pair-Wise and Network Meta-Analysis of
Randomised Controlled Trials.”</span> <span>National Institute for
Health and Care Excellence</span>. <a href="https://www.sheffield.ac.uk/nice-dsu" class="external-link">https://www.sheffield.ac.uk/nice-dsu</a>.
</div>
<div id="ref-Woolacott2006" class="csl-entry">
Woolacott, N., N. Hawkins, A. Mason, A. Kainth, Z. Khadjesari, Y. Bravo
Vergel, K. Misso, et al. 2006. <span>“Etanercept and Efalizumab for the
Treatment of Psoriasis: A Systematic Review.”</span> <em>Health
Technology Assessment</em> 10 (46). <a href="https://doi.org/10.3310/hta10460" class="external-link">https://doi.org/10.3310/hta10460</a>.
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by David M. Phillippo.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>



  <script data-goatcounter="https://multinma.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
</body>
</html>
