<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Set up a network containing contrast-based aggregate data (AgD), i.e.
summaries of relative effects between treatments such as log Odds Ratios.
Multiple data sources may be combined once created using combine_network()."><title>Set up contrast-based aggregate data — set_agd_contrast • multinma</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.9/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Set up contrast-based aggregate data — set_agd_contrast"><meta property="og:description" content="Set up a network containing contrast-based aggregate data (AgD), i.e.
summaries of relative effects between treatments such as log Odds Ratios.
Multiple data sources may be combined once created using combine_network()."><meta property="og:image" content="https://dmphillippo.github.io/multinma/logo.svg"><meta name="robots" content="noindex"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">multinma</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.7.1.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/vignette_overview.html">Overview of Examples</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Examples</h6>
    <a class="dropdown-item" href="../articles/example_atrial_fibrillation.html">Example: Atrial fibrillation</a>
    <a class="dropdown-item" href="../articles/example_bcg_vaccine.html">Example: BCG vaccine for tuberculosis</a>
    <a class="dropdown-item" href="../articles/example_blocker.html">Example: Beta blockers</a>
    <a class="dropdown-item" href="../articles/example_diabetes.html">Example: Diabetes</a>
    <a class="dropdown-item" href="../articles/example_dietary_fat.html">Example: Dietary fat</a>
    <a class="dropdown-item" href="../articles/example_hta_psoriasis.html">Example: Plaque psoriasis HTA report</a>
    <a class="dropdown-item" href="../articles/example_ndmm.html">Example: Newly diagnosed multiple myeloma</a>
    <a class="dropdown-item" href="../articles/example_parkinsons.html">Example: Parkinson's disease</a>
    <a class="dropdown-item" href="../articles/example_plaque_psoriasis.html">Example: Plaque psoriasis ML-NMR</a>
    <a class="dropdown-item" href="../articles/example_smoking.html">Example: Smoking cessation</a>
    <a class="dropdown-item" href="../articles/example_statins.html">Example: Statins for cholesterol lowering</a>
    <a class="dropdown-item" href="../articles/example_thrombolytics.html">Example: Thrombolytic treatments</a>
    <a class="dropdown-item" href="../articles/example_transfusion.html">Example: White blood cell transfusion</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/dmphillippo/multinma/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Set up contrast-based aggregate data</h1>
      <small class="dont-index">Source: <a href="https://github.com/dmphillippo/multinma/blob/HEAD/R/nma_data.R" class="external-link"><code>R/nma_data.R</code></a></small>
      <div class="d-none name"><code>set_agd_contrast.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Set up a network containing contrast-based aggregate data (AgD), i.e.
summaries of relative effects between treatments such as log Odds Ratios.
Multiple data sources may be combined once created using <code><a href="combine_network.html">combine_network()</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">set_agd_contrast</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">study</span>,</span>
<span>  <span class="va">trt</span>,</span>
<span>  y <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  se <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sample_size <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  trt_ref <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  trt_class <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p>a data frame</p></dd>


<dt>study</dt>
<dd><p>column of <code>data</code> specifying the studies, coded using integers,
strings, or factors</p></dd>


<dt>trt</dt>
<dd><p>column of <code>data</code> specifying treatments, coded using integers,
strings, or factors</p></dd>


<dt>y</dt>
<dd><p>column of <code>data</code> specifying a continuous outcome</p></dd>


<dt>se</dt>
<dd><p>column of <code>data</code> specifying the standard error for a continuous
outcome</p></dd>


<dt>sample_size</dt>
<dd><p>column of <code>data</code> giving the sample size in each arm.
Optional, see details.</p></dd>


<dt>trt_ref</dt>
<dd><p>reference treatment for the network, as a single integer,
string, or factor. If not specified, a reasonable well-connected default
will be chosen (see details).</p></dd>


<dt>trt_class</dt>
<dd><p>column of <code>data</code> specifying treatment classes, coded using
integers, strings, or factors. By default, no classes are specified.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>An object of class <a href="nma_data-class.html">nma_data</a></p>


    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Each study should have a single reference/baseline treatment,
against which relative effects in the other arm(s) are given. For the
reference arm, include a data row with continuous outcome <code>y</code> equal to
<code>NA</code>. If a study has three or more arms (so two or more relative effects),
set the standard error <code>se</code> for the reference arm data row equal to the
standard error of the mean outcome on the reference arm (this determines
the covariance of the relative effects, when expressed as differences in
mean outcomes between arms).</p>
<p>All arguments specifying columns of <code>data</code> accept the following:</p><ul><li><p>A column name as a character string, e.g. <code>study = "studyc"</code></p></li>
<li><p>A bare column name, e.g. <code>study = studyc</code></p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">dplyr::mutate()</a></code> style semantics for inline variable transformations, e.g. <code>study = paste(author, year)</code></p></li>
</ul><p>By default, <code>trt_ref = NULL</code> and a network reference treatment will be chosen
that attempts to maximise computational efficiency and stability. If an
alternative reference treatment is chosen and the model runs slowly or has
low effective sample size (ESS) this may be the cause - try letting the
default reference treatment be used instead. Regardless of which treatment is
used as the network reference at the model fitting stage, results can be
transformed afterwards: see the <code>trt_ref</code> argument of
<code><a href="relative_effects.html">relative_effects()</a></code> and <code><a href="predict.stan_nma.html">predict.stan_nma()</a></code>.</p>
<p>The <code>sample_size</code> argument is optional, but when specified:</p><ul><li><p>Enables automatic centering of predictors (<code>center = TRUE</code>) in <code><a href="nma.html">nma()</a></code>
when a regression model is given for a network combining IPD and AgD</p></li>
<li><p>Enables production of study-specific relative effects, rank probabilities,
etc. for studies in the network when a regression model is given</p></li>
<li><p>Nodes in <code><a href="plot.nma_data.html">plot.nma_data()</a></code> may be weighted by sample size</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="set_ipd.html">set_ipd()</a></code> for individual patient data, <code><a href="set_agd_arm.html">set_agd_arm()</a></code> for
arm-based aggregate data, and <code><a href="combine_network.html">combine_network()</a></code> for combining several
data sources in one network.</p>
<p><code><a href="print.nma_data.html">print.nma_data()</a></code> for the print method displaying details of the
network, and <code><a href="plot.nma_data.html">plot.nma_data()</a></code> for network plots.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Set up network of Parkinson's contrast data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">parkinsons</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   studyn trtn     y    se   n  diff se_diff</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      1    1 -1.22 0.504  54    NA   0.504</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      1    3 -1.53 0.439  95 -0.31   0.668</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      2    1 -0.70 0.282 172    NA   0.282</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      2    2 -2.40 0.258 173 -1.70   0.382</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      3    1 -0.30 0.505  76    NA   0.505</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6      3    2 -2.60 0.510  71 -2.30   0.718</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">park_net</span> <span class="op">&lt;-</span> <span class="fu">set_agd_contrast</span><span class="op">(</span><span class="va">parkinsons</span>,</span></span>
<span class="r-in"><span>                             study <span class="op">=</span> <span class="va">studyn</span>,</span></span>
<span class="r-in"><span>                             trt <span class="op">=</span> <span class="va">trtn</span>,</span></span>
<span class="r-in"><span>                             y <span class="op">=</span> <span class="va">diff</span>,</span></span>
<span class="r-in"><span>                             se <span class="op">=</span> <span class="va">se_diff</span>,</span></span>
<span class="r-in"><span>                             sample_size <span class="op">=</span> <span class="va">n</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Print details</span></span></span>
<span class="r-in"><span><span class="va">park_net</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A network with 7 AgD studies (contrast-based).</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;">--------------------------------------------------</span> <span style="font-weight: bold;">AgD studies (contrast-based)</span> <span style="color: #555555;">----</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Study Treatment arms</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1     2: 1 | 3      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2     2: 1 | 2      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3     3: 4 | 1 | 2  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4     2: 4 | 3      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5     2: 4 | 3      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6     2: 4 | 5      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7     2: 4 | 5      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Outcome type: continuous</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;">------------------------------------------------------------------------------------</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Total number of treatments: 5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Total number of studies: 7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Reference treatment is: 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Network is <span style="color: #00BB00;">connected</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Plot network</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">park_net</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="set_agd_contrast-1.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by David M. Phillippo.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer></div>

  

  <script data-goatcounter="https://multinma.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script></body></html>

