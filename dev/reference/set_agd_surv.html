<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Set up a network containing aggregate survival data (AgD) in the form of
event/censoring times (e.g. reconstructed from digitized Kaplan-Meier curves)
and covariate summary statistics from each study. Multiple data sources may be
combined once created using combine_network()."><title>Set up aggregate survival data — set_agd_surv • multinma</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.9/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Set up aggregate survival data — set_agd_surv"><meta property="og:description" content="Set up a network containing aggregate survival data (AgD) in the form of
event/censoring times (e.g. reconstructed from digitized Kaplan-Meier curves)
and covariate summary statistics from each study. Multiple data sources may be
combined once created using combine_network()."><meta property="og:image" content="https://dmphillippo.github.io/multinma/logo.svg"><meta name="robots" content="noindex"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">multinma</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.6.1.9002</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/vignette_overview.html">Overview of Examples</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Examples</h6>
    <a class="dropdown-item" href="../articles/example_atrial_fibrillation.html">Example: Atrial fibrillation</a>
    <a class="dropdown-item" href="../articles/example_bcg_vaccine.html">Example: BCG vaccine for tuberculosis</a>
    <a class="dropdown-item" href="../articles/example_blocker.html">Example: Beta blockers</a>
    <a class="dropdown-item" href="../articles/example_diabetes.html">Example: Diabetes</a>
    <a class="dropdown-item" href="../articles/example_dietary_fat.html">Example: Dietary fat</a>
    <a class="dropdown-item" href="../articles/example_hta_psoriasis.html">Example: Plaque psoriasis HTA report</a>
    <a class="dropdown-item" href="../articles/example_ndmm.html">Example: Newly diagnosed multiple myeloma</a>
    <a class="dropdown-item" href="../articles/example_parkinsons.html">Example: Parkinson's disease</a>
    <a class="dropdown-item" href="../articles/example_plaque_psoriasis.html">Example: Plaque psoriasis ML-NMR</a>
    <a class="dropdown-item" href="../articles/example_smoking.html">Example: Smoking cessation</a>
    <a class="dropdown-item" href="../articles/example_statins.html">Example: Statins for cholesterol lowering</a>
    <a class="dropdown-item" href="../articles/example_thrombolytics.html">Example: Thrombolytic treatments</a>
    <a class="dropdown-item" href="../articles/example_transfusion.html">Example: White blood cell transfusion</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/dmphillippo/multinma/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Set up aggregate survival data</h1>
      <small class="dont-index">Source: <a href="https://github.com/dmphillippo/multinma/blob/HEAD/R/nma_data.R" class="external-link"><code>R/nma_data.R</code></a></small>
      <div class="d-none name"><code>set_agd_surv.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Set up a network containing aggregate survival data (AgD) in the form of
event/censoring times (e.g. reconstructed from digitized Kaplan-Meier curves)
and covariate summary statistics from each study. Multiple data sources may be
combined once created using <code><a href="combine_network.html">combine_network()</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">set_agd_surv</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">study</span>,</span>
<span>  <span class="va">trt</span>,</span>
<span>  <span class="va">Surv</span>,</span>
<span>  covariates <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  trt_ref <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  trt_class <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p>a data frame</p></dd>


<dt>study</dt>
<dd><p>column of <code>data</code> specifying the studies, coded using integers,
strings, or factors</p></dd>


<dt>trt</dt>
<dd><p>column of <code>data</code> specifying treatments, coded using integers,
strings, or factors</p></dd>


<dt>Surv</dt>
<dd><p>column of <code>data</code> specifying a survival or time-to-event outcome,
using the <code><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">Surv()</a></code> function. Right/left/interval censoring and left
truncation (delayed entry) are supported.</p></dd>


<dt>covariates</dt>
<dd><p>data frame of covariate summary statistics for each study
or study arm, with corresponding <code>study</code> and <code>trt</code> columns to match to
those in <code>data</code></p></dd>


<dt>trt_ref</dt>
<dd><p>reference treatment for the network, as a single integer,
string, or factor. If not specified, a reasonable well-connected default
will be chosen (see details).</p></dd>


<dt>trt_class</dt>
<dd><p>column of <code>data</code> specifying treatment classes, coded using
integers, strings, or factors. By default, no classes are specified.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>An object of class <a href="nma_data-class.html">nma_data</a></p>


    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>By default, <code>trt_ref = NULL</code> and a network reference treatment will be chosen
that attempts to maximise computational efficiency and stability. If an
alternative reference treatment is chosen and the model runs slowly or has
low effective sample size (ESS) this may be the cause - try letting the
default reference treatment be used instead. Regardless of which treatment is
used as the network reference at the model fitting stage, results can be
transformed afterwards: see the <code>trt_ref</code> argument of
<code><a href="relative_effects.html">relative_effects()</a></code> and <code><a href="predict.stan_nma.html">predict.stan_nma()</a></code>.</p>
<p>All arguments specifying columns of <code>data</code> accept the following:</p><ul><li><p>A column name as a character string, e.g. <code>study = "studyc"</code></p></li>
<li><p>A bare column name, e.g. <code>study = studyc</code></p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">dplyr::mutate()</a></code> style semantics for inline variable transformations, e.g. <code>study = paste(author, year)</code></p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="set_ipd.html">set_ipd()</a></code> for individual patient data, <code><a href="set_agd_contrast.html">set_agd_contrast()</a></code> for
contrast-based aggregate data, and <code><a href="combine_network.html">combine_network()</a></code> for combining
several data sources in one network.</p>
<p><code><a href="print.nma_data.html">print.nma_data()</a></code> for the print method displaying details of the
network, and <code><a href="plot.nma_data.html">plot.nma_data()</a></code> for network plots.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">## Newly diagnosed multiple myeloma</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">ndmm_agd</span><span class="op">)</span>  <span class="co"># Reconstructed Kaplan-Meier data</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        study     studyf trt trtf eventtime status</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Morgan2012 Morgan2012 Pbo  Pbo  18.72575      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Morgan2012 Morgan2012 Pbo  Pbo  63.36000      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 Morgan2012 Morgan2012 Pbo  Pbo  34.35726      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 Morgan2012 Morgan2012 Pbo  Pbo  10.77826      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 Morgan2012 Morgan2012 Pbo  Pbo  63.36000      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 Morgan2012 Morgan2012 Pbo  Pbo  14.52966      1</span>
<span class="r-in"><span><span class="va">ndmm_agd_covs</span>   <span class="co"># Summary covariate information on each arm</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         study      studyf  trt trtf sample_size  age_min age_iqr_l age_median</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Jackson2019 Jackson2019  Len  Len        1137 17.28246  59.13164   65.76766</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Jackson2019 Jackson2019  Pbo  Pbo         864 21.18572  58.30991   65.47402</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  Morgan2012  Morgan2012  Pbo  Pbo         410 33.88979  58.05696   64.15999</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  Morgan2012  Morgan2012 Thal Thal         408 38.45127  59.30022   65.48736</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   age_iqr_h  age_max age_mean   age_sd iss_stage3 response_cr_vgpr      male</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  72.00756 85.76095 65.16867 8.936962  0.2480211        0.8258575 0.6165347</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  71.80261 86.23080 64.62894 9.399272  0.1921296        0.8310185 0.6215278</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  70.44791 84.79372 63.92360 9.006311  0.3634146        0.7170732 0.6195122</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  71.73597 84.69365 65.59387 8.384686  0.3186275        0.7450980 0.6151961</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">set_agd_surv</span><span class="op">(</span><span class="va">ndmm_agd</span>,</span></span>
<span class="r-in"><span>             study <span class="op">=</span> <span class="va">studyf</span>,</span></span>
<span class="r-in"><span>             trt <span class="op">=</span> <span class="va">trtf</span>,</span></span>
<span class="r-in"><span>             Surv <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">Surv</a></span><span class="op">(</span><span class="va">eventtime</span>, <span class="va">status</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>             covariates <span class="op">=</span> <span class="va">ndmm_agd_covs</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A network with 2 AgD studies (arm-based).</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;">-------------------------------------------------------</span> <span style="font-weight: bold;">AgD studies (arm-based)</span> <span style="color: #555555;">----</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Study       Treatment arms</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Jackson2019 2: Pbo | Len  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Morgan2012  2: Pbo | Thal </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Outcome type: survival</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;">------------------------------------------------------------------------------------</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Total number of treatments: 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Total number of studies: 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Reference treatment is: Pbo</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Network is <span style="color: #00BB00;">connected</span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by David M. Phillippo.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer></div>

  

  <script data-goatcounter="https://multinma.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script></body></html>

