<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="The nma function fits network meta-analysis and (multilevel) network
meta-regression models in Stan."><title>Network meta-analysis models — nma • multinma</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.2/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Network meta-analysis models — nma"><meta property="og:description" content="The nma function fits network meta-analysis and (multilevel) network
meta-regression models in Stan."><meta property="og:image" content="https://dmphillippo.github.io/multinma/logo.svg"><meta name="robots" content="noindex"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">multinma</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.5.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/vignette_overview.html">Overview of Examples</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Examples</h6>
    <a class="dropdown-item" href="../articles/example_atrial_fibrillation.html">Example: Atrial fibrillation</a>
    <a class="dropdown-item" href="../articles/example_bcg_vaccine.html">Example: BCG vaccine for tuberculosis</a>
    <a class="dropdown-item" href="../articles/example_blocker.html">Example: Beta blockers</a>
    <a class="dropdown-item" href="../articles/example_diabetes.html">Example: Diabetes</a>
    <a class="dropdown-item" href="../articles/example_dietary_fat.html">Example: Dietary fat</a>
    <a class="dropdown-item" href="../articles/example_hta_psoriasis.html">Example: Plaque psoriasis HTA report</a>
    <a class="dropdown-item" href="../articles/example_parkinsons.html">Example: Parkinson's disease</a>
    <a class="dropdown-item" href="../articles/example_plaque_psoriasis.html">Example: Plaque psoriasis ML-NMR</a>
    <a class="dropdown-item" href="../articles/example_smoking.html">Example: Smoking cessation</a>
    <a class="dropdown-item" href="../articles/example_statins.html">Example: Statins for cholesterol lowering</a>
    <a class="dropdown-item" href="../articles/example_thrombolytics.html">Example: Thrombolytic treatments</a>
    <a class="dropdown-item" href="../articles/example_transfusion.html">Example: White blood cell transfusion</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/dmphillippo/multinma/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Network meta-analysis models</h1>
      <small class="dont-index">Source: <a href="https://github.com/dmphillippo/multinma/blob/HEAD/R/nma.R" class="external-link"><code>R/nma.R</code></a></small>
      <div class="d-none name"><code>nma.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The <code>nma</code> function fits network meta-analysis and (multilevel) network
meta-regression models in Stan.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">nma</span><span class="op">(</span></span>
<span>  <span class="va">network</span>,</span>
<span>  consistency <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"consistency"</span>, <span class="st">"ume"</span>, <span class="st">"nodesplit"</span><span class="op">)</span>,</span>
<span>  trt_effects <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"fixed"</span>, <span class="st">"random"</span><span class="op">)</span>,</span>
<span>  regression <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  class_interactions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"common"</span>, <span class="st">"exchangeable"</span>, <span class="st">"independent"</span><span class="op">)</span>,</span>
<span>  likelihood <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  link <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  nodesplit <span class="op">=</span> <span class="fu"><a href="get_nodesplits.html">get_nodesplits</a></span><span class="op">(</span><span class="va">network</span>, include_consistency <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  prior_intercept <span class="op">=</span> <span class="fu"><a href="default_values.html">.default</a></span><span class="op">(</span><span class="fu"><a href="priors.html">normal</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">100</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  prior_trt <span class="op">=</span> <span class="fu"><a href="default_values.html">.default</a></span><span class="op">(</span><span class="fu"><a href="priors.html">normal</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  prior_het <span class="op">=</span> <span class="fu"><a href="default_values.html">.default</a></span><span class="op">(</span><span class="fu"><a href="priors.html">half_normal</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">5</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  prior_het_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sd"</span>, <span class="st">"var"</span>, <span class="st">"prec"</span><span class="op">)</span>,</span>
<span>  prior_reg <span class="op">=</span> <span class="fu"><a href="default_values.html">.default</a></span><span class="op">(</span><span class="fu"><a href="priors.html">normal</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  prior_aux <span class="op">=</span> <span class="fu"><a href="default_values.html">.default</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  QR <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  center <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  adapt_delta <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  int_thin <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">network</span><span class="op">$</span><span class="va">n_int</span><span class="op"><a href="https://rdrr.io/r/base/Arithmetic.html" class="external-link">%/%</a></span><span class="fl">10</span>, <span class="fl">1</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>network</dt>
<dd><p>An <code>nma_data</code> object, as created by the functions <code>set_*()</code>,
<code><a href="combine_network.html">combine_network()</a></code>, or <code><a href="add_integration.html">add_integration()</a></code></p></dd>


<dt>consistency</dt>
<dd><p>Character string specifying the type of (in)consistency
model to fit, either <code>"consistency"</code>, <code>"ume"</code>, or <code>"nodesplit"</code></p></dd>


<dt>trt_effects</dt>
<dd><p>Character string specifying either <code>"fixed"</code> or <code>"random"</code> effects</p></dd>


<dt>regression</dt>
<dd><p>A one-sided model formula, specifying the prognostic and
effect-modifying terms for a regression model. Any references to treatment
should use the <code>.trt</code> special variable, for example specifying effect
modifier interactions as <code>variable:.trt</code> (see details).</p></dd>


<dt>class_interactions</dt>
<dd><p>Character string specifying whether effect modifier
interactions are specified as <code>"common"</code>, <code>"exchangeable"</code>, or
<code>"independent"</code>.</p></dd>


<dt>likelihood</dt>
<dd><p>Character string specifying a likelihood, if unspecified
will be inferred from the data (see details)</p></dd>


<dt>link</dt>
<dd><p>Character string specifying a link function, if unspecified will
default to the canonical link (see details)</p></dd>


<dt>...</dt>
<dd><p>Further arguments passed to
<code>sampling()</code>, such as <code>iter</code>,
<code>chains</code>, <code>cores</code>, etc.</p></dd>


<dt>nodesplit</dt>
<dd><p>For <code>consistency = "nodesplit"</code>, the comparison(s) to split
in the node-splitting model(s). Either a length 2 vector giving the
treatments in a single comparison, or a 2 column data frame listing
multiple treatment comparisons to split in turn. By default, all possible
comparisons will be chosen (see <code><a href="get_nodesplits.html">get_nodesplits()</a></code>).</p></dd>


<dt>prior_intercept</dt>
<dd><p>Specification of prior distribution for the intercept</p></dd>


<dt>prior_trt</dt>
<dd><p>Specification of prior distribution for the treatment effects</p></dd>


<dt>prior_het</dt>
<dd><p>Specification of prior distribution for the heterogeneity
(if <code>trt_effects = "random"</code>)</p></dd>


<dt>prior_het_type</dt>
<dd><p>Character string specifying whether the prior
distribution <code>prior_het</code> is placed on the heterogeneity standard deviation
\(\tau\) (<code>"sd"</code>, the default), variance \(\tau^2\) (<code>"var"</code>), or
precision \(1/\tau^2\) (<code>"prec"</code>).</p></dd>


<dt>prior_reg</dt>
<dd><p>Specification of prior distribution for the regression
coefficients (if <code>regression</code> formula specified)</p></dd>


<dt>prior_aux</dt>
<dd><p>Specification of prior distribution for the auxiliary
parameter, if applicable (see details)</p></dd>


<dt>QR</dt>
<dd><p>Logical scalar (default <code>FALSE</code>), whether to apply a QR
decomposition to the model design matrix</p></dd>


<dt>center</dt>
<dd><p>Logical scalar (default <code>TRUE</code>), whether to center the
(numeric) regression terms about the overall means</p></dd>


<dt>adapt_delta</dt>
<dd><p>See <a href="adapt_delta.html">adapt_delta</a> for details</p></dd>


<dt>int_thin</dt>
<dd><p>A single integer value, the thinning factor for returning
cumulative estimates of integration error</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p><code>nma()</code> returns a <a href="stan_nma-class.html">stan_nma</a> object, except when <code>consistency = "nodesplit"</code> when a <a href="nma_nodesplit-class.html">nma_nodesplit</a> or <a href="nma_nodesplit-class.html">nma_nodesplit_df</a> object is
returned. <code>nma.fit()</code> returns a stanfit object.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>When specifying a model formula in the <code>regression</code> argument, the
usual formula syntax is available (as interpreted by <code><a href="https://rdrr.io/r/stats/model.matrix.html" class="external-link">model.matrix()</a></code>). The
only additional requirement here is that the special variable <code>.trt</code> should
be used to refer to treatment. For example, effect modifier interactions
should be specified as <code>variable:.trt</code>. Prognostic (main) effects and
interactions can be included together compactly as <code>variable*.trt</code>, which
expands to <code>variable + variable:.trt</code> (plus <code>.trt</code>, which is already in the
NMA model).</p>
<p>For the advanced user, the additional specials <code>.study</code> and <code>.trtclass</code> are
also available, and refer to studies and (if specified) treatment classes
respectively. When node-splitting models are fitted (<code>consistency = "nodesplit"</code>) the special <code>.omega</code> is available, indicating the arms
to which the node-splitting inconsistency factor is added.</p>
<p>See <code><a href="priors.html">?priors</a></code> for details on prior
specification. Default prior distributions are available, but may not be
appropriate for the particular setting and will raise a warning if used. No
attempt is made to tailor these defaults to the data provided. Please
consider appropriate prior distributions for the particular setting,
accounting for the scales of outcomes and covariates, etc. The function
<code><a href="plot_prior_posterior.html">plot_prior_posterior()</a></code> may be useful in examining the influence of the
chosen prior distributions on the posterior distributions, and the
<code><a href="summary.nma_prior.html">summary()</a></code> method for <code>nma_prior</code>
objects prints prior intervals.</p>
    </div>
    <div class="section level2">
    <h2 id="likelihoods-and-link-functions">Likelihoods and link functions<a class="anchor" aria-label="anchor" href="#likelihoods-and-link-functions"></a></h2>
    

<p>Currently, the following likelihoods and link functions are supported for
each data type:</p><table class="table table"><tr><td><strong>Data type</strong></td><td><strong>Likelihood</strong></td><td><strong>Link function</strong></td></tr><tr><td><strong>Binary</strong></td><td><code>bernoulli</code>, <code>bernoulli2</code></td><td><code>logit</code>, <code>probit</code>, <code>cloglog</code></td></tr><tr><td><strong>Count</strong></td><td><code>binomial</code>, <code>binomial2</code></td><td><code>logit</code>, <code>probit</code>, <code>cloglog</code></td></tr><tr><td><strong>Rate</strong></td><td><code>poisson</code></td><td><code>log</code></td></tr><tr><td><strong>Continuous</strong></td><td><code>normal</code></td><td><code>identity</code>, <code>log</code></td></tr><tr><td><strong>Ordered</strong></td><td><code>ordered</code></td><td><code>logit</code>, <code>probit</code>, <code>cloglog</code></td></tr></table><p>The <code>bernoulli2</code> and <code>binomial2</code> likelihoods correspond to a two-parameter
Binomial likelihood for arm-based AgD, which more closely matches the
underlying Poisson Binomial distribution for the summarised aggregate
outcomes in a ML-NMR model than the typical (one parameter) Binomial
distribution (see Phillippo et al. 2020)
.</p>
<p>When a <code>cloglog</code> link is used, including an offset for log follow-up time
(i.e. <code>regression = ~offset(log(time))</code>) results in a model on the log
hazard (see Dias et al. 2011)
.</p>
<p>Further details on each likelihood and link function are given by
Dias et al. (2011)
.</p>
    </div>
    <div class="section level2">
    <h2 id="auxiliary-parameters">Auxiliary parameters<a class="anchor" aria-label="anchor" href="#auxiliary-parameters"></a></h2>
    

<p>Auxiliary parameters are only present in the following models.</p><div class="section">
<h3 id="normal-likelihood-with-ipd">Normal likelihood with IPD<a class="anchor" aria-label="anchor" href="#normal-likelihood-with-ipd"></a></h3>


<p>When a Normal likelihood is fitted to IPD, the auxiliary parameters are the
arm-level standard deviations \(\sigma_{jk}\) on treatment \(k\) in
study \(j\).</p>
</div>

<div class="section">
<h3 id="ordered-multinomial-likelihood">Ordered multinomial likelihood<a class="anchor" aria-label="anchor" href="#ordered-multinomial-likelihood"></a></h3>


<p>When fitting a model to \(M\) ordered outcomes, the auxiliary parameters
are the latent cutoffs between each category, \(c_0 &lt; c_1 &lt; \dots &lt;
  c_M\). Only \(c_2\) to \(c_{M-1}\) are estimated; we fix \(c_0 =
  -\infty\), \(c_1 = 0\), and \(c_M = \infty\). When specifying priors for
these latent cutoffs, we choose to specify priors on the <em>differences</em>
\(c_{m+1} - c_m\). Stan automatically truncates any priors so that the
ordering constraints are satisfied.</p>
</div>

    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Dias S, Welton NJ, Sutton AJ, Ades AE (2011).
“NICE DSU Technical Support Document 2: A generalised linear modelling framework for pair-wise and network meta-analysis of randomised controlled trials.”
National Institute for Health and Care Excellence.
<a href="https://nicedsu.sites.sheffield.ac.uk" class="external-link">https://nicedsu.sites.sheffield.ac.uk</a>.<br><br> Phillippo DM, Dias S, Ades AE, Belger M, Brnabic A, Schacht A, Saure D, Kadziola Z, Welton NJ (2020).
“Multilevel Network Meta-Regression for population-adjusted treatment comparisons.”
<em>Journal of the Royal Statistical Society: Series A (Statistics in Society)</em>, <b>183</b>(3), 1189--1210.
<a href="https://doi.org/10.1111/rssa.12579" class="external-link">doi:10.1111/rssa.12579</a>
.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">## Smoking cessation NMA</span></span></span>
<span class="r-in"><span><span class="co"># Set up network of smoking cessation data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">smoking</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   studyn trtn                   trtc  r   n</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      1    1        No intervention  9 140</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      1    3 Individual counselling 23 140</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      1    4      Group counselling 10 138</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      2    2              Self-help 11  78</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      2    3 Individual counselling 12  85</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6      2    4      Group counselling 29 170</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">smk_net</span> <span class="op">&lt;-</span> <span class="fu"><a href="set_agd_arm.html">set_agd_arm</a></span><span class="op">(</span><span class="va">smoking</span>,</span></span>
<span class="r-in"><span>                       study <span class="op">=</span> <span class="va">studyn</span>,</span></span>
<span class="r-in"><span>                       trt <span class="op">=</span> <span class="va">trtc</span>,</span></span>
<span class="r-in"><span>                       r <span class="op">=</span> <span class="va">r</span>,</span></span>
<span class="r-in"><span>                       n <span class="op">=</span> <span class="va">n</span>,</span></span>
<span class="r-in"><span>                       trt_ref <span class="op">=</span> <span class="st">"No intervention"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Print details</span></span></span>
<span class="r-in"><span><span class="va">smk_net</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A network with 24 AgD studies (arm-based).</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;">-------------------------------------------------------</span> <span style="font-weight: bold;">AgD studies (arm-based)</span> <span style="color: #555555;">----</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Study Treatment arms                                                 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1     3: No intervention | Group counselling | Individual counselling</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2     3: Group counselling | Individual counselling | Self-help      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3     2: No intervention | Individual counselling                    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4     2: No intervention | Individual counselling                    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5     2: No intervention | Individual counselling                    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6     2: No intervention | Individual counselling                    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7     2: No intervention | Individual counselling                    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8     2: No intervention | Individual counselling                    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9     2: No intervention | Individual counselling                    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  10    2: No intervention | Self-help                                 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;"> ... plus 14 more studies</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Outcome type: count</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;">------------------------------------------------------------------------------------</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Total number of treatments: 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Total number of studies: 24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Reference treatment is: No intervention</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Network is <span style="color: #00BB00;">connected</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="co"># Fitting a fixed effect model</span></span></span>
<span class="r-in"><span><span class="va">smk_fit_FE</span> <span class="op">&lt;-</span> <span class="fu">nma</span><span class="op">(</span><span class="va">smk_net</span>, refresh <span class="op">=</span> <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="fl">200</span> <span class="kw">else</span> <span class="fl">0</span>,</span></span>
<span class="r-in"><span>                  trt_effects <span class="op">=</span> <span class="st">"fixed"</span>,</span></span>
<span class="r-in"><span>                  prior_intercept <span class="op">=</span> <span class="fu"><a href="priors.html">normal</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">100</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  prior_trt <span class="op">=</span> <span class="fu"><a href="priors.html">normal</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">100</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">smk_fit_FE</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A fixed effects NMA with a binomial likelihood (logit link).</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Inference for Stan model: binomial_1par.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 chains, each with iter=2000; warmup=1000; thin=1; </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> post-warmup draws per chain=1000, total post-warmup draws=4000.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                               mean se_mean   sd     2.5%      25%      50%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d[Group counselling]          0.84    0.00 0.17     0.52     0.72     0.84</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d[Individual counselling]     0.77    0.00 0.06     0.65     0.73     0.77</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d[Self-help]                  0.23    0.00 0.13    -0.01     0.15     0.23</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> lp__                      -5859.27    0.09 3.65 -5867.25 -5861.51 -5858.94</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                75%    97.5% n_eff Rhat</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d[Group counselling]          0.96     1.19  1889    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d[Individual counselling]     0.80     0.88  1718    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d[Self-help]                  0.31     0.48  2309    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> lp__                      -5856.69 -5853.00  1756    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Samples were drawn using NUTS(diag_e) at Mon Aug 29 23:14:51 2022.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> For each parameter, n_eff is a crude measure of effective sample size,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> and Rhat is the potential scale reduction factor on split chains (at </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> convergence, Rhat=1).</span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="co"># Fitting a random effects model</span></span></span>
<span class="r-in"><span><span class="va">smk_fit_RE</span> <span class="op">&lt;-</span> <span class="fu">nma</span><span class="op">(</span><span class="va">smk_net</span>, refresh <span class="op">=</span> <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="fl">200</span> <span class="kw">else</span> <span class="fl">0</span>,</span></span>
<span class="r-in"><span>                  trt_effects <span class="op">=</span> <span class="st">"random"</span>,</span></span>
<span class="r-in"><span>                  prior_intercept <span class="op">=</span> <span class="fu"><a href="priors.html">normal</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">100</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  prior_trt <span class="op">=</span> <span class="fu"><a href="priors.html">normal</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">100</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  prior_het <span class="op">=</span> <span class="fu"><a href="priors.html">normal</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">5</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">smk_fit_RE</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A random effects NMA with a binomial likelihood (logit link).</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Inference for Stan model: binomial_1par.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 chains, each with iter=2000; warmup=1000; thin=1; </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> post-warmup draws per chain=1000, total post-warmup draws=4000.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                               mean se_mean   sd     2.5%      25%      50%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d[Group counselling]          1.11    0.01 0.44     0.25     0.81     1.11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d[Individual counselling]     0.85    0.01 0.24     0.38     0.68     0.84</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d[Self-help]                  0.48    0.01 0.40    -0.28     0.22     0.48</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> lp__                      -5768.25    0.21 6.48 -5781.54 -5772.47 -5767.93</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tau                           0.83    0.01 0.18     0.54     0.71     0.81</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                75%    97.5% n_eff Rhat</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d[Group counselling]          1.39     1.98  1941    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d[Individual counselling]     1.00     1.33  1242    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d[Self-help]                  0.74     1.26  1780    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> lp__                      -5763.76 -5756.29   987    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tau                           0.94     1.26  1124    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Samples were drawn using NUTS(diag_e) at Mon Aug 29 23:15:07 2022.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> For each parameter, n_eff is a crude measure of effective sample size,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> and Rhat is the potential scale reduction factor on split chains (at </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> convergence, Rhat=1).</span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="co"># Fitting an unrelated mean effects (inconsistency) model</span></span></span>
<span class="r-in"><span><span class="va">smk_fit_RE_UME</span> <span class="op">&lt;-</span> <span class="fu">nma</span><span class="op">(</span><span class="va">smk_net</span>, refresh <span class="op">=</span> <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="fl">200</span> <span class="kw">else</span> <span class="fl">0</span>,</span></span>
<span class="r-in"><span>                      consistency <span class="op">=</span> <span class="st">"ume"</span>,</span></span>
<span class="r-in"><span>                      trt_effects <span class="op">=</span> <span class="st">"random"</span>,</span></span>
<span class="r-in"><span>                      prior_intercept <span class="op">=</span> <span class="fu"><a href="priors.html">normal</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">100</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                      prior_trt <span class="op">=</span> <span class="fu"><a href="priors.html">normal</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">100</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                      prior_het <span class="op">=</span> <span class="fu"><a href="priors.html">normal</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">5</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">smk_fit_RE_UME</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A random effects NMA with a binomial likelihood (logit link).</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> An inconsistency model ('ume') was fitted.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Inference for Stan model: binomial_1par.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 chains, each with iter=2000; warmup=1000; thin=1; </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> post-warmup draws per chain=1000, total post-warmup draws=4000.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                     mean se_mean   sd     2.5%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d[Group counselling vs. No intervention]            1.16    0.02 0.82    -0.31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d[Individual counselling vs. No intervention]       0.91    0.01 0.29     0.36</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d[Self-help vs. No intervention]                    0.34    0.01 0.62    -0.86</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d[Individual counselling vs. Group counselling]    -0.32    0.01 0.62    -1.52</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d[Self-help vs. Group counselling]                 -0.63    0.01 0.72    -2.05</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d[Self-help vs. Individual counselling]             0.14    0.02 1.07    -1.95</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> lp__                                            -5764.97    0.19 6.31 -5778.02</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tau                                                 0.95    0.01 0.22     0.59</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                      25%      50%      75%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d[Group counselling vs. No intervention]            0.61     1.11     1.64</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d[Individual counselling vs. No intervention]       0.72     0.90     1.09</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d[Self-help vs. No intervention]                   -0.05     0.32     0.74</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d[Individual counselling vs. Group counselling]    -0.72    -0.33     0.09</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d[Self-help vs. Group counselling]                 -1.09    -0.62    -0.16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d[Self-help vs. Individual counselling]            -0.53     0.13     0.82</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> lp__                                            -5769.05 -5764.55 -5760.60</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tau                                                 0.79     0.92     1.08</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                    97.5% n_eff Rhat</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d[Group counselling vs. No intervention]            2.88  2726    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d[Individual counselling vs. No intervention]       1.51  1418    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d[Self-help vs. No intervention]                    1.57  2274    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d[Individual counselling vs. Group counselling]     0.92  2797    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d[Self-help vs. Group counselling]                  0.80  2776    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d[Self-help vs. Individual counselling]             2.36  3629    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> lp__                                            -5753.40  1106    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tau                                                 1.44  1318    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Samples were drawn using NUTS(diag_e) at Mon Aug 29 23:15:24 2022.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> For each parameter, n_eff is a crude measure of effective sample size,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> and Rhat is the potential scale reduction factor on split chains (at </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> convergence, Rhat=1).</span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="co"># Fitting all possible node-splitting models</span></span></span>
<span class="r-in"><span><span class="va">smk_fit_RE_nodesplit</span> <span class="op">&lt;-</span> <span class="fu">nma</span><span class="op">(</span><span class="va">smk_net</span>, refresh <span class="op">=</span> <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="fl">200</span> <span class="kw">else</span> <span class="fl">0</span>,</span></span>
<span class="r-in"><span>                            consistency <span class="op">=</span> <span class="st">"nodesplit"</span>,</span></span>
<span class="r-in"><span>                            trt_effects <span class="op">=</span> <span class="st">"random"</span>,</span></span>
<span class="r-in"><span>                            prior_intercept <span class="op">=</span> <span class="fu"><a href="priors.html">normal</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">100</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                            prior_trt <span class="op">=</span> <span class="fu"><a href="priors.html">normal</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">100</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                            prior_het <span class="op">=</span> <span class="fu"><a href="priors.html">normal</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">5</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Fitting model 1 of 7, node-split: Group counselling vs. No intervention</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Fitting model 2 of 7, node-split: Individual counselling vs. No intervention</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Fitting model 3 of 7, node-split: Self-help vs. No intervention</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Fitting model 4 of 7, node-split: Individual counselling vs. Group counselling</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Fitting model 5 of 7, node-split: Self-help vs. Group counselling</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Fitting model 6 of 7, node-split: Self-help vs. Individual counselling</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Fitting model 7 of 7, consistency model</span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="co"># Summarise the node-splitting results</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">smk_fit_RE_nodesplit</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Node-splitting models fitted for 6 comparisons.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;">------------------------------</span> <span style="font-weight: bold;">Node-split Group counselling vs. No intervention</span> <span style="color: #555555;">----</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                  mean   sd  2.5%   25%   50%  75% 97.5% Bulk_ESS Tail_ESS Rhat</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d_net            1.09 0.44  0.24  0.80  1.09 1.37  2.00     1856     1931    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d_dir            1.08 0.77 -0.38  0.55  1.07 1.58  2.62     3877     3061    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d_ind            1.13 0.53  0.06  0.78  1.13 1.47  2.20     2140     2347    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> omega           -0.05 0.92 -1.86 -0.66 -0.07 0.54  1.86     2918     2538    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tau              0.87 0.20  0.56  0.73  0.84 0.99  1.35     1014     1773    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tau_consistency  0.84 0.19  0.54  0.71  0.82 0.95  1.27     1045     1874    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Residual deviance: 53.8<span style="color: #555555;"> (on 50 data points)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                pD: 44.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               DIC: 97.9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Bayesian p-value: 0.93</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;">-------------------------</span> <span style="font-weight: bold;">Node-split Individual counselling vs. No intervention</span> <span style="color: #555555;">----</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 mean   sd  2.5%   25%  50%  75% 97.5% Bulk_ESS Tail_ESS Rhat</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d_net           0.83 0.24  0.39  0.68 0.82 0.98  1.33     1301     1871    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d_dir           0.89 0.26  0.40  0.72 0.88 1.05  1.43     1521     2213    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d_ind           0.57 0.65 -0.70  0.15 0.54 0.97  1.91     1622     2092    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> omega           0.32 0.67 -1.05 -0.10 0.34 0.75  1.69     1637     2128    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tau             0.85 0.19  0.56  0.72 0.83 0.96  1.30     1331     2222    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tau_consistency 0.84 0.19  0.54  0.71 0.82 0.95  1.27     1045     1874    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Residual deviance: 54.2<span style="color: #555555;"> (on 50 data points)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                pD: 44</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               DIC: 98.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Bayesian p-value: 0.6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;">--------------------------------------</span> <span style="font-weight: bold;">Node-split Self-help vs. No intervention</span> <span style="color: #555555;">----</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                  mean   sd  2.5%   25%   50%  75% 97.5% Bulk_ESS Tail_ESS Rhat</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d_net            0.49 0.41 -0.31  0.23  0.48 0.74  1.33     1639     1829    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d_dir            0.32 0.56 -0.79 -0.04  0.33 0.68  1.41     3320     2582    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d_ind            0.70 0.64 -0.56  0.28  0.68 1.10  2.03     2164     2548    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> omega           -0.38 0.84 -2.09 -0.90 -0.37 0.17  1.22     2209     2433    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tau              0.87 0.20  0.56  0.73  0.84 0.98  1.32     1279     2141    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tau_consistency  0.84 0.19  0.54  0.71  0.82 0.95  1.27     1045     1874    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Residual deviance: 53.9<span style="color: #555555;"> (on 50 data points)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                pD: 44.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               DIC: 98.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Bayesian p-value: 0.64</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;">-----------------------</span> <span style="font-weight: bold;">Node-split Individual counselling vs. Group counselling</span> <span style="color: #555555;">----</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                  mean   sd  2.5%   25%   50%   75% 97.5% Bulk_ESS Tail_ESS Rhat</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d_net           -0.26 0.42 -1.10 -0.53 -0.26  0.01  0.54     2246     2110    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d_dir           -0.11 0.48 -1.08 -0.42 -0.11  0.20  0.83     3592     3262    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d_ind           -0.53 0.60 -1.75 -0.92 -0.51 -0.12  0.61     1615     2146    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> omega            0.42 0.66 -0.85 -0.02  0.41  0.85  1.72     1440     1994    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tau              0.86 0.19  0.56  0.73  0.83  0.96  1.32     1126     1591    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tau_consistency  0.84 0.19  0.54  0.71  0.82  0.95  1.27     1045     1874    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Residual deviance: 53.9<span style="color: #555555;"> (on 50 data points)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                pD: 44.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               DIC: 98.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Bayesian p-value: 0.52</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;">------------------------------------</span> <span style="font-weight: bold;">Node-split Self-help vs. Group counselling</span> <span style="color: #555555;">----</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                  mean   sd  2.5%   25%   50%   75% 97.5% Bulk_ESS Tail_ESS Rhat</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d_net           -0.60 0.49 -1.51 -0.92 -0.61 -0.29  0.36     2616     2675    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d_dir           -0.60 0.66 -1.94 -1.04 -0.58 -0.18  0.68     3602     3147    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d_ind           -0.59 0.66 -1.90 -1.03 -0.59 -0.16  0.70     1671     2228    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> omega           -0.01 0.88 -1.82 -0.58  0.01  0.56  1.68     1939     2191    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tau              0.86 0.19  0.56  0.73  0.84  0.97  1.32     1124     1855    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tau_consistency  0.84 0.19  0.54  0.71  0.82  0.95  1.27     1045     1874    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Residual deviance: 54<span style="color: #555555;"> (on 50 data points)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                pD: 44.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               DIC: 98.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Bayesian p-value: 0.99</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;">-------------------------------</span> <span style="font-weight: bold;">Node-split Self-help vs. Individual counselling</span> <span style="color: #555555;">----</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                  mean   sd  2.5%   25%   50%   75% 97.5% Bulk_ESS Tail_ESS Rhat</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d_net           -0.34 0.43 -1.17 -0.61 -0.34 -0.07  0.53     1911     1749    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d_dir            0.08 0.67 -1.30 -0.34  0.09  0.51  1.40     2907     2872    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d_ind           -0.62 0.53 -1.72 -0.97 -0.62 -0.27  0.41     1438     2068    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> omega            0.71 0.83 -0.99  0.18  0.70  1.23  2.36     1807     1917    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tau              0.86 0.19  0.56  0.72  0.83  0.97  1.30     1104     2210    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tau_consistency  0.84 0.19  0.54  0.71  0.82  0.95  1.27     1045     1874    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Residual deviance: 53.6<span style="color: #555555;"> (on 50 data points)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                pD: 44</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               DIC: 97.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Bayesian p-value: 0.37</span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Plaque psoriasis ML-NMR</span></span></span>
<span class="r-in"><span><span class="co"># Set up plaque psoriasis network combining IPD and AgD</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">pso_ipd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">plaque_psoriasis_ipd</span>,</span></span>
<span class="r-in"><span>                  <span class="va">studyc</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"UNCOVER-1"</span>, <span class="st">"UNCOVER-2"</span>, <span class="st">"UNCOVER-3"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">pso_agd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">plaque_psoriasis_agd</span>,</span></span>
<span class="r-in"><span>                  <span class="va">studyc</span> <span class="op">==</span> <span class="st">"FIXTURE"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">pso_ipd</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      studyc      trtc_long    trtc trtn pasi75 pasi90 pasi100 age  bmi pasi_w0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 UNCOVER-1 Ixekizumab Q2W IXE_Q2W    2      0      0       0  34 32.2    18.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 UNCOVER-1 Ixekizumab Q2W IXE_Q2W    2      1      0       0  64 41.9    23.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 UNCOVER-1 Ixekizumab Q2W IXE_Q2W    2      1      1       0  42 26.2    12.8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 UNCOVER-1 Ixekizumab Q2W IXE_Q2W    2      0      0       0  45 52.9    36.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 UNCOVER-1 Ixekizumab Q2W IXE_Q2W    2      1      0       0  67 22.9    20.9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 UNCOVER-1 Ixekizumab Q2W IXE_Q2W    2      1      1       1  57 22.4    18.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    male bsa weight durnpso prevsys   psa</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  TRUE  18   98.1     6.7    TRUE  TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  TRUE  33  129.6    14.5   FALSE  TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  TRUE  33   78.0    26.5    TRUE FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 FALSE  50  139.9    25.0    TRUE  TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 FALSE  35   54.2    11.9    TRUE FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  TRUE  29   67.5    15.2    TRUE FALSE</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">pso_agd</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    studyc          trtc_long    trtc trtn pasi75_r pasi75_n pasi90_r pasi90_n</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 FIXTURE         Etanercept     ETN    4      142      323       67      323</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 FIXTURE            Placebo     PBO    1       16      324        5      324</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 FIXTURE Secukinumab 150 mg SEC_150    5      219      327      137      327</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 FIXTURE Secukinumab 300 mg SEC_300    6      249      323      175      323</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   pasi100_r pasi100_n sample_size_w0 age_mean age_sd bmi_mean bmi_sd</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1        14       323            326     43.8   13.0     28.7    5.9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         0       324            326     44.1   12.6     27.9    6.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3        47       327            327     45.4   12.9     28.4    5.9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4        78       323            327     44.5   13.2     28.4    6.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   pasi_w0_mean pasi_w0_sd male bsa_mean bsa_sd weight_mean weight_sd</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         23.2        9.8 71.2     33.6   18.0        84.6      20.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         24.1       10.5 72.7     35.2   19.1        82.0      20.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3         23.7       10.5 72.2     34.5   19.4        83.6      20.8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         23.9        9.9 68.5     34.3   19.2        83.0      21.6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   durnpso_mean durnpso_sd prevsys  psa</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         16.4       12.0    65.6 13.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         16.6       11.6    62.6 15.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3         17.3       12.2    64.8 15.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         15.8       12.3    63.0 15.3</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">pso_ipd</span> <span class="op">&lt;-</span> <span class="va">pso_ipd</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="co"># Variable transformations</span></span></span>
<span class="r-in"><span>    bsa <span class="op">=</span> <span class="va">bsa</span> <span class="op">/</span> <span class="fl">100</span>,</span></span>
<span class="r-in"><span>    prevsys <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">prevsys</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    psa <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">psa</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    weight <span class="op">=</span> <span class="va">weight</span> <span class="op">/</span> <span class="fl">10</span>,</span></span>
<span class="r-in"><span>    durnpso <span class="op">=</span> <span class="va">durnpso</span> <span class="op">/</span> <span class="fl">10</span>,</span></span>
<span class="r-in"><span>    <span class="co"># Treatment classes</span></span></span>
<span class="r-in"><span>    trtclass <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span><span class="va">trtn</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">~</span> <span class="st">"Placebo"</span>,</span></span>
<span class="r-in"><span>                         <span class="va">trtn</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">5</span>, <span class="fl">6</span><span class="op">)</span> <span class="op">~</span> <span class="st">"IL blocker"</span>,</span></span>
<span class="r-in"><span>                         <span class="va">trtn</span> <span class="op">==</span> <span class="fl">4</span> <span class="op">~</span> <span class="st">"TNFa blocker"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="co"># Check complete cases for covariates of interest</span></span></span>
<span class="r-in"><span>    complete <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/complete.cases.html" class="external-link">complete.cases</a></span><span class="op">(</span><span class="va">durnpso</span>, <span class="va">prevsys</span>, <span class="va">bsa</span>, <span class="va">weight</span>, <span class="va">psa</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">pso_agd</span> <span class="op">&lt;-</span> <span class="va">pso_agd</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="co"># Variable transformations</span></span></span>
<span class="r-in"><span>    bsa_mean <span class="op">=</span> <span class="va">bsa_mean</span> <span class="op">/</span> <span class="fl">100</span>,</span></span>
<span class="r-in"><span>    bsa_sd <span class="op">=</span> <span class="va">bsa_sd</span> <span class="op">/</span> <span class="fl">100</span>,</span></span>
<span class="r-in"><span>    prevsys <span class="op">=</span> <span class="va">prevsys</span> <span class="op">/</span> <span class="fl">100</span>,</span></span>
<span class="r-in"><span>    psa <span class="op">=</span> <span class="va">psa</span> <span class="op">/</span> <span class="fl">100</span>,</span></span>
<span class="r-in"><span>    weight_mean <span class="op">=</span> <span class="va">weight_mean</span> <span class="op">/</span> <span class="fl">10</span>,</span></span>
<span class="r-in"><span>    weight_sd <span class="op">=</span> <span class="va">weight_sd</span> <span class="op">/</span> <span class="fl">10</span>,</span></span>
<span class="r-in"><span>    durnpso_mean <span class="op">=</span> <span class="va">durnpso_mean</span> <span class="op">/</span> <span class="fl">10</span>,</span></span>
<span class="r-in"><span>    durnpso_sd <span class="op">=</span> <span class="va">durnpso_sd</span> <span class="op">/</span> <span class="fl">10</span>,</span></span>
<span class="r-in"><span>    <span class="co"># Treatment classes</span></span></span>
<span class="r-in"><span>    trtclass <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span><span class="va">trtn</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">~</span> <span class="st">"Placebo"</span>,</span></span>
<span class="r-in"><span>                         <span class="va">trtn</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">5</span>, <span class="fl">6</span><span class="op">)</span> <span class="op">~</span> <span class="st">"IL blocker"</span>,</span></span>
<span class="r-in"><span>                         <span class="va">trtn</span> <span class="op">==</span> <span class="fl">4</span> <span class="op">~</span> <span class="st">"TNFa blocker"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Exclude small number of individuals with missing covariates</span></span></span>
<span class="r-in"><span><span class="va">pso_ipd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">pso_ipd</span>, <span class="va">complete</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">pso_net</span> <span class="op">&lt;-</span> <span class="fu"><a href="combine_network.html">combine_network</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="set_ipd.html">set_ipd</a></span><span class="op">(</span><span class="va">pso_ipd</span>,</span></span>
<span class="r-in"><span>          study <span class="op">=</span> <span class="va">studyc</span>,</span></span>
<span class="r-in"><span>          trt <span class="op">=</span> <span class="va">trtc</span>,</span></span>
<span class="r-in"><span>          r <span class="op">=</span> <span class="va">pasi75</span>,</span></span>
<span class="r-in"><span>          trt_class <span class="op">=</span> <span class="va">trtclass</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="set_agd_arm.html">set_agd_arm</a></span><span class="op">(</span><span class="va">pso_agd</span>,</span></span>
<span class="r-in"><span>              study <span class="op">=</span> <span class="va">studyc</span>,</span></span>
<span class="r-in"><span>              trt <span class="op">=</span> <span class="va">trtc</span>,</span></span>
<span class="r-in"><span>              r <span class="op">=</span> <span class="va">pasi75_r</span>,</span></span>
<span class="r-in"><span>              n <span class="op">=</span> <span class="va">pasi75_n</span>,</span></span>
<span class="r-in"><span>              trt_class <span class="op">=</span> <span class="va">trtclass</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Print network details</span></span></span>
<span class="r-in"><span><span class="va">pso_net</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A network with 3 IPD studies, and 1 AgD study (arm-based).</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;">-------------------------------------------------------------------</span> <span style="font-weight: bold;">IPD studies</span> <span style="color: #555555;">----</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Study     Treatment arms                  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  UNCOVER-1 3: IXE_Q2W | IXE_Q4W | PBO      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  UNCOVER-2 4: ETN | IXE_Q2W | IXE_Q4W | PBO</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  UNCOVER-3 4: ETN | IXE_Q2W | IXE_Q4W | PBO</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Outcome type: binary</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;">-------------------------------------------------------</span> <span style="font-weight: bold;">AgD studies (arm-based)</span> <span style="color: #555555;">----</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Study   Treatment arms                  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  FIXTURE 4: PBO | ETN | SEC_150 | SEC_300</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Outcome type: count</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #555555;">------------------------------------------------------------------------------------</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Total number of treatments: 6, in 3 classes</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Total number of studies: 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Reference treatment is: PBO</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Network is <span style="color: #00BB00;">connected</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Add integration points to the network</span></span></span>
<span class="r-in"><span><span class="va">pso_net</span> <span class="op">&lt;-</span> <span class="fu"><a href="add_integration.html">add_integration</a></span><span class="op">(</span><span class="va">pso_net</span>,</span></span>
<span class="r-in"><span>  durnpso <span class="op">=</span> <span class="fu"><a href="distr.html">distr</a></span><span class="op">(</span><span class="va">qgamma</span>, mean <span class="op">=</span> <span class="va">durnpso_mean</span>, sd <span class="op">=</span> <span class="va">durnpso_sd</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  prevsys <span class="op">=</span> <span class="fu"><a href="distr.html">distr</a></span><span class="op">(</span><span class="va">qbern</span>, prob <span class="op">=</span> <span class="va">prevsys</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  bsa <span class="op">=</span> <span class="fu"><a href="distr.html">distr</a></span><span class="op">(</span><span class="va">qlogitnorm</span>, mean <span class="op">=</span> <span class="va">bsa_mean</span>, sd <span class="op">=</span> <span class="va">bsa_sd</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  weight <span class="op">=</span> <span class="fu"><a href="distr.html">distr</a></span><span class="op">(</span><span class="va">qgamma</span>, mean <span class="op">=</span> <span class="va">weight_mean</span>, sd <span class="op">=</span> <span class="va">weight_sd</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  psa <span class="op">=</span> <span class="fu"><a href="distr.html">distr</a></span><span class="op">(</span><span class="va">qbern</span>, prob <span class="op">=</span> <span class="va">psa</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  n_int <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Using weighted average correlation matrix computed from IPD studies.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="co"># Fitting a ML-NMR model.</span></span></span>
<span class="r-in"><span><span class="co"># Specify a regression model to include effect modifier interactions for five</span></span></span>
<span class="r-in"><span><span class="co"># covariates, along with main (prognostic) effects. We use a probit link and</span></span></span>
<span class="r-in"><span><span class="co"># specify that the two-parameter Binomial approximation for the aggregate-level</span></span></span>
<span class="r-in"><span><span class="co"># likelihood should be used. We set treatment-covariate interactions to be equal</span></span></span>
<span class="r-in"><span><span class="co"># within each class. We narrow the possible range for random initial values with</span></span></span>
<span class="r-in"><span><span class="co"># init_r = 0.1, since probit models in particular are often hard to initialise.</span></span></span>
<span class="r-in"><span><span class="co"># Using the QR decomposition greatly improves sampling efficiency here, as is</span></span></span>
<span class="r-in"><span><span class="co"># often the case for regression models.</span></span></span>
<span class="r-in"><span><span class="va">pso_fit</span> <span class="op">&lt;-</span> <span class="fu">nma</span><span class="op">(</span><span class="va">pso_net</span>, refresh <span class="op">=</span> <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="fl">200</span> <span class="kw">else</span> <span class="fl">0</span>,</span></span>
<span class="r-in"><span>               trt_effects <span class="op">=</span> <span class="st">"fixed"</span>,</span></span>
<span class="r-in"><span>               link <span class="op">=</span> <span class="st">"probit"</span>,</span></span>
<span class="r-in"><span>               likelihood <span class="op">=</span> <span class="st">"bernoulli2"</span>,</span></span>
<span class="r-in"><span>               regression <span class="op">=</span> <span class="op">~</span><span class="op">(</span><span class="va">durnpso</span> <span class="op">+</span> <span class="va">prevsys</span> <span class="op">+</span> <span class="va">bsa</span> <span class="op">+</span> <span class="va">weight</span> <span class="op">+</span> <span class="va">psa</span><span class="op">)</span><span class="op">*</span><span class="va">.trt</span>,</span></span>
<span class="r-in"><span>               class_interactions <span class="op">=</span> <span class="st">"common"</span>,</span></span>
<span class="r-in"><span>               prior_intercept <span class="op">=</span> <span class="fu"><a href="priors.html">normal</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>               prior_trt <span class="op">=</span> <span class="fu"><a href="priors.html">normal</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>               prior_reg <span class="op">=</span> <span class="fu"><a href="priors.html">normal</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>               init_r <span class="op">=</span> <span class="fl">0.1</span>,</span></span>
<span class="r-in"><span>               QR <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Note: Setting "PBO" as the network reference treatment.</span>
<span class="r-in"><span><span class="va">pso_fit</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A fixed effects ML-NMR with a bernoulli2 likelihood (probit link).</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Regression model: ~(durnpso + prevsys + bsa + weight + psa) * .trt.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Centred covariates at the following overall mean values:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   durnpso   prevsys       bsa    weight       psa </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1.8259772 0.6496080 0.2917665 8.9328237 0.2167777 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Inference for Stan model: binomial_2par.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 chains, each with iter=2000; warmup=1000; thin=1; </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> post-warmup draws per chain=1000, total post-warmup draws=4000.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                         mean se_mean   sd     2.5%      25%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> beta[durnpso]                           0.05    0.00 0.06    -0.08     0.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> beta[prevsys]                          -0.13    0.00 0.17    -0.46    -0.24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> beta[bsa]                              -0.07    0.01 0.45    -0.98    -0.36</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> beta[weight]                            0.04    0.00 0.03    -0.02     0.02</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> beta[psa]                              -0.08    0.00 0.17    -0.40    -0.19</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> beta[durnpso:.trtclassTNFa blocker]    -0.03    0.00 0.07    -0.18    -0.08</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> beta[durnpso:.trtclassIL blocker]      -0.01    0.00 0.07    -0.15    -0.06</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> beta[prevsys:.trtclassTNFa blocker]     0.18    0.00 0.19    -0.19     0.05</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> beta[prevsys:.trtclassIL blocker]       0.06    0.00 0.18    -0.30    -0.06</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> beta[bsa:.trtclassTNFa blocker]         0.05    0.01 0.51    -0.96    -0.30</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> beta[bsa:.trtclassIL blocker]           0.29    0.01 0.48    -0.66    -0.03</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> beta[weight:.trtclassTNFa blocker]     -0.17    0.00 0.04    -0.24    -0.19</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> beta[weight:.trtclassIL blocker]       -0.10    0.00 0.03    -0.16    -0.12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> beta[psa:.trtclassTNFa blocker]        -0.06    0.00 0.21    -0.46    -0.20</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> beta[psa:.trtclassIL blocker]           0.01    0.00 0.19    -0.35    -0.12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d[ETN]                                  1.55    0.00 0.08     1.39     1.50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d[IXE_Q2W]                              2.96    0.00 0.09     2.79     2.90</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d[IXE_Q4W]                              2.54    0.00 0.08     2.38     2.49</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d[SEC_150]                              2.15    0.00 0.12     1.92     2.07</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d[SEC_300]                              2.46    0.00 0.12     2.22     2.37</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> lp__                                -1576.34    0.09 3.52 -1584.19 -1578.55</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                          50%      75%    97.5% n_eff Rhat</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> beta[durnpso]                           0.05     0.09     0.17  5456    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> beta[prevsys]                          -0.13    -0.02     0.20  5536    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> beta[bsa]                              -0.06     0.24     0.80  5096    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> beta[weight]                            0.04     0.06     0.10  5033    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> beta[psa]                              -0.08     0.04     0.25  5673    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> beta[durnpso:.trtclassTNFa blocker]    -0.03     0.02     0.11  5593    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> beta[durnpso:.trtclassIL blocker]      -0.01     0.03     0.12  6915    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> beta[prevsys:.trtclassTNFa blocker]     0.18     0.31     0.57  5577    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> beta[prevsys:.trtclassIL blocker]       0.06     0.19     0.42  6856    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> beta[bsa:.trtclassTNFa blocker]         0.05     0.40     1.05  5377    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> beta[bsa:.trtclassIL blocker]           0.29     0.60     1.26  6413    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> beta[weight:.trtclassTNFa blocker]     -0.17    -0.14    -0.10  5801    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> beta[weight:.trtclassIL blocker]       -0.10    -0.08    -0.04  6372    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> beta[psa:.trtclassTNFa blocker]        -0.06     0.09     0.36  6180    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> beta[psa:.trtclassIL blocker]           0.00     0.13     0.38  6860    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d[ETN]                                  1.55     1.61     1.71  4711    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d[IXE_Q2W]                              2.96     3.01     3.13  5331    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d[IXE_Q4W]                              2.54     2.60     2.70  5677    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d[SEC_150]                              2.15     2.23     2.38  5285    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> d[SEC_300]                              2.45     2.54     2.69  5998    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> lp__                                -1576.06 -1573.82 -1570.43  1545    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Samples were drawn using NUTS(diag_e) at Mon Aug 29 23:18:44 2022.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> For each parameter, n_eff is a crude measure of effective sample size,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> and Rhat is the potential scale reduction factor on split chains (at </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> convergence, Rhat=1).</span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by David M. Phillippo.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer></div>

  

  <script data-goatcounter="https://multinma.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script></body></html>

